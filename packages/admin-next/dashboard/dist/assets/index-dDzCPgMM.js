import{j as t,u as m,a4 as _,bz as C,bA as S,a1 as F}from"./index-S--WvUSo.js";import{u as N,a as D,D as O}from"./use-data-table-TeZp00wg.js";import{r as x}from"./react-PzSkSLoa.js";import{a as w,D as T}from"./date-cell-G_vX9su2.js";import{P as v}from"./placeholder-cell-O6UVTGmQ.js";import{T as P}from"./tooltip-Ixyw9oT8.js";import{C as A,a as E}from"./customer-cell-w4T4OK3Y.js";import{a as L,D as U}from"./display-id-cell-xQwmg453.js";import{g as H,a as k}from"./order-helpers-hEGvMzl3.js";import{S as g}from"./status-cell-9XExsAIG.js";import{M as q}from"./money-amount-cell-qk7EOos5.js";import{c as z}from"./index-JDlOzmVl.js";import{H as I}from"./heading-cSlef4Su.js";import"./react-dom-Og6--24v.js";import"./react-router-dom-aSYyayiN.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./button-Pc5Xo8ua.js";import"./index-1Zwdg31z.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./x-mark-mini-aYDSd38M.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./command-bar-wUgfUfvQ.js";import"./money-amount-helpers--myf8Rla.js";import"./currencies-bd3ADI6s.js";function y(){return y=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y.apply(this,arguments)}function R(e,l){if(e==null)return{};var n={},r=Object.keys(e),o,c;for(c=0;c<r.length;c++)o=r[c],!(l.indexOf(o)>=0)&&(n[o]=e[o]);return n}var $=["cdnSuffix","cdnUrl","countryCode","style","svg"],K="https://cdn.jsdelivr.net/gh/lipis/flag-icons/flags/4x3/",M="svg",Q=127397,J=function(l){var n=l.cdnSuffix,r=n===void 0?M:n,o=l.cdnUrl,c=o===void 0?K:o,s=l.countryCode,a=l.style,i=l.svg,u=i===void 0?!1:i,p=R(l,$);if(typeof s!="string")return null;if(u){var f=""+c+s.toLowerCase()+"."+r;return x.createElement("img",Object.assign({},p,{src:f,style:y({display:"inline-block",width:"1em",height:"1em",verticalAlign:"middle"},a)}))}var j=s.toUpperCase().replace(/./g,function(b){return String.fromCodePoint(b.charCodeAt(0)+Q)});return x.createElement("span",Object.assign({role:"img"},p,{style:y({display:"inline-block",fontSize:"1em",lineHeight:"1em",verticalAlign:"middle"},a)}),j)};const B=({country:e})=>e?t.jsx("div",{className:"flex size-5 items-center justify-center",children:t.jsx(P,{content:e.display_name,children:t.jsx("div",{className:"flex size-4 items-center justify-center overflow-hidden rounded-sm",children:t.jsx(J,{countryCode:e.iso_2.toUpperCase(),svg:!0,style:{width:"16px",height:"16px"},"aria-label":e.display_name})})})}):t.jsx(v,{}),G=({status:e})=>{const{t:l}=m(),{label:n,color:r}=H(l,e);return t.jsx(g,{color:r,children:n})},W=()=>{const{t:e}=m();return t.jsx("div",{className:"flex h-full w-full items-center",children:t.jsx("span",{className:"truncate",children:e("fields.fulfillment")})})},X=({status:e})=>{const{t:l}=m(),{label:n,color:r}=k(l,e);return t.jsx(g,{color:r,children:n})},Z=()=>{const{t:e}=m();return t.jsx("div",{className:"flex h-full w-full items-center",children:t.jsx("span",{className:"truncate",children:e("fields.payment")})})},V=({channel:e})=>{if(!e)return t.jsx("span",{className:"text-ui-fg-muted",children:"-"});const{name:l}=e;return t.jsx("div",{className:"flex h-full w-full items-center overflow-hidden",children:t.jsx("span",{className:"truncate",children:l})})},Y=()=>{const{t:e}=m();return t.jsx("div",{className:"flex h-full w-full items-center",children:t.jsx("span",{className:"truncate",children:e("fields.salesChannel")})})},ee=({currencyCode:e,total:l})=>l?t.jsx(q,{currencyCode:e,amount:l,align:"right"}):t.jsx(v,{}),te=()=>{const{t:e}=m();return t.jsx("div",{className:"flex h-full w-full items-center justify-end",children:t.jsx("span",{className:"truncate",children:e("fields.total")})})},d=z(),se=e=>{const{exclude:l=[]}=e??{},n=x.useMemo(()=>[d.accessor("display_id",{header:()=>t.jsx(L,{}),cell:({getValue:s})=>{const a=s();return t.jsx(U,{displayId:a})}}),d.accessor("created_at",{header:()=>t.jsx(w,{}),cell:({getValue:s})=>{const a=new Date(s());return t.jsx(T,{date:a})}}),d.accessor("customer",{header:()=>t.jsx(A,{}),cell:({getValue:s})=>{const a=s();return t.jsx(E,{customer:a})}}),d.accessor("sales_channel",{header:()=>t.jsx(Y,{}),cell:({getValue:s})=>{const a=s();return t.jsx(V,{channel:a})}}),d.accessor("payment_status",{header:()=>t.jsx(Z,{}),cell:({getValue:s})=>{const a=s();return t.jsx(X,{status:a})}}),d.accessor("fulfillment_status",{header:()=>t.jsx(W,{}),cell:({getValue:s})=>{const a=s();return t.jsx(G,{status:a})}}),d.accessor("total",{header:()=>t.jsx(te,{}),cell:({getValue:s,row:a})=>{const i=s(),u=a.original.currency_code;return t.jsx(ee,{currencyCode:u,total:i})}}),d.display({id:"actions",cell:({row:s})=>{var i;const a=(i=s.original.shipping_address)==null?void 0:i.country;return t.jsx(B,{country:a})}})],[]),r=s=>s.accessorKey!==void 0,o=s=>s.id!==void 0,c=s=>r(s)?l.includes(s.accessorKey):o(s)?l.includes(s.id):!1;return n.filter(s=>!c(s))},le=()=>{const{t:e}=m(),{regions:l}=_({limit:1e3,fields:"id,name",expand:""}),{sales_channels:n}=C({limit:1e3,fields:"id,name",expand:""});let r=[];if(l){const a={key:"region_id",label:e("fields.region"),type:"select",options:l.map(i=>({label:i.name,value:i.id})),multiple:!0,searchable:!0};r=[...r,a]}if(n){const a={key:"sales_channel_id",label:e("fields.salesChannel"),type:"select",multiple:!0,searchable:!0,options:n.map(i=>({label:i.name,value:i.id}))};r=[...r,a]}const o={key:"payment_status",label:e("orders.payment.statusLabel"),type:"select",multiple:!0,options:[{label:e("orders.payment.status.notPaid"),value:"not_paid"},{label:e("orders.payment.status.awaiting"),value:"awaiting"},{label:e("orders.payment.status.captured"),value:"captured"},{label:e("orders.payment.status.refunded"),value:"refunded"},{label:e("orders.payment.status.partiallyRefunded"),value:"partially_refunded"},{label:e("orders.payment.status.canceled"),value:"canceled"},{label:e("orders.payment.status.requiresAction"),value:"requires_action"}]},c={key:"fulfillment_status",label:e("orders.fulfillment.statusLabel"),type:"select",multiple:!0,options:[{label:e("orders.fulfillment.status.notFulfilled"),value:"not_fulfilled"},{label:e("orders.fulfillment.status.fulfilled"),value:"fulfilled"},{label:e("orders.fulfillment.status.partiallyFulfilled"),value:"partially_fulfilled"},{label:e("orders.fulfillment.status.returned"),value:"returned"},{label:e("orders.fulfillment.status.partiallyReturned"),value:"partially_returned"},{label:e("orders.fulfillment.status.shipped"),value:"shipped"},{label:e("orders.fulfillment.status.partiallyShipped"),value:"partially_shipped"},{label:e("orders.fulfillment.status.canceled"),value:"canceled"},{label:e("orders.fulfillment.status.requiresAction"),value:"requires_action"}]},s=[{label:"Created At",key:"created_at"},{label:"Updated At",key:"updated_at"}].map(a=>({key:a.key,label:a.label,type:"date"}));return r=[...r,o,c,...s],r},ae=({prefix:e,pageSize:l=20})=>{const n=N(["offset","q","created_at","updated_at","region_id","sales_channel_id","payment_status","fulfillment_status","order"],e),{offset:r,sales_channel_id:o,created_at:c,updated_at:s,fulfillment_status:a,payment_status:i,region_id:u,q:p}=n;return{searchParams:{limit:l,offset:r?Number(r):0,sales_channel_id:o==null?void 0:o.split(","),fulfillment_status:a==null?void 0:a.split(","),payment_status:i==null?void 0:i.split(","),created_at:c?JSON.parse(c):void 0,updated_at:s?JSON.parse(s):void 0,region_id:u==null?void 0:u.split(","),q:p},raw:n}},h=20,re="customer,items,sales_channel,shipping_address,shipping_address.country",ne="id,status,display_id,created_at,email,fulfillment_status,payment_status,total,currency_code",ie=()=>{const{t:e}=m(),{searchParams:l,raw:n}=ae({pageSize:h}),{orders:r,count:o,isError:c,error:s,isLoading:a}=S({expand:re,fields:ne,...l},{keepPreviousData:!0}),i=le(),u=se({}),{table:p}=D({data:r??[],columns:u,enablePagination:!0,count:o,pageSize:h});if(c)throw s;return t.jsxs(F,{className:"divide-y p-0",children:[t.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:t.jsx(I,{children:e("orders.domain")})}),t.jsx(O,{columns:u,table:p,pagination:!0,navigateTo:f=>`/orders/${f.original.id}`,filters:i,count:o,search:!0,isLoading:a,pageSize:h,orderBy:["display_id","created_at","updated_at"],queryObject:n})]})},Ie=()=>t.jsx("div",{className:"flex w-full flex-col gap-y-2",children:t.jsx(ie,{})});export{Ie as Component};
