import{u as _,j as e,T as b}from"./index-S--WvUSo.js";import{t as C}from"./zod-jt04JUtm.js";import{u as y,F as s}from"./form-0PHaH8g8.js";import{P as F}from"./percentage-input-hee_tAkG.js";import{u as I,a as d}from"./route-focus-modal-MMx5Xnk0.js";import{u as N}from"./tax-regions-jathV60U.js";import{c as S}from"./countries-QR_y0WJ_.js";import{B as u}from"./button-Pc5Xo8ua.js";import{H as T}from"./heading-cSlef4Su.js";import{S as o}from"./select-Z4sV_-wF.js";import{I as h}from"./input-A29ux7yj.js";import{S as L}from"./switch-VR1xZXYU.js";const D=({taxRegion:r,formSchema:x})=>{const{t:n}=_(),{handleSuccess:j}=I(),c=y({defaultValues:{country_code:(r==null?void 0:r.country_code)||void 0,parent_id:(r==null?void 0:r.id)||void 0},resolver:C(x)}),{mutateAsync:f,isPending:p}=N(),v=c.handleSubmit(async l=>{await f({parent_id:r==null?void 0:r.id,province_code:l.province_code,country_code:l.country_code,default_tax_rate:{name:l.name,code:l.code,rate:l.rate}},{onSuccess:()=>{r!=null&&r.id?j(`/settings/taxes/${r.id}`):j("/settings/taxes")}})});return e.jsx(d.Form,{form:c,children:e.jsxs("form",{onSubmit:v,className:"flex h-full flex-col",children:[e.jsx(d.Header,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(d.Close,{asChild:!0,children:e.jsx(u,{variant:"secondary",size:"small",children:n("actions.cancel")})}),e.jsx(u,{type:"submit",variant:"primary",size:"small",isLoading:p,children:n("actions.create")})]})}),e.jsx(d.Body,{className:"flex h-full w-full flex-col items-center overflow-hidden p-16",children:e.jsxs("div",{className:"flex flex-col gap-y-8 w-full max-w-[720px]",children:[e.jsxs("div",{children:[e.jsx(T,{className:"text-left",children:n(r?"taxRegions.create-child.title":"taxRegions.create.title")}),e.jsx(b,{className:"text-ui-fg-subtle txt-small",children:n(r?"taxRegions.create-child.description":"taxRegions.create.description")})]}),!r&&e.jsx(s.Field,{control:c.control,name:"country_code",render:({field:{ref:l,onChange:t,...a}})=>{var i;return e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:n("fields.country")}),e.jsx(s.Control,{children:e.jsxs(o,{...a,onValueChange:t,children:[e.jsx(o.Trigger,{ref:l,children:e.jsx(o.Value,{})}),e.jsx(o.Content,{children:(i=S)==null?void 0:i.map(m=>e.jsx(o.Item,{value:m.iso_2,children:m.display_name},m.iso_2))})]})}),e.jsx(s.ErrorMessage,{})]})}}),r&&e.jsx(s.Field,{control:c.control,name:"province_code",render:({field:l})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:n("fields.province")}),e.jsx(s.Control,{children:e.jsx(h,{...l})})]})}),e.jsx(s.Field,{control:c.control,name:"name",render:({field:l})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:"Tax Rate Name"}),e.jsx(s.Control,{children:e.jsx(h,{...l})})]})}),e.jsx(s.Field,{control:c.control,name:"rate",render:({field:l})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:n("fields.rate")}),e.jsx(s.Control,{children:e.jsx(F,{...l,value:l.value,onChange:t=>{t.target.value&&l.onChange(parseInt(t.target.value))}})}),e.jsx(s.Hint,{className:"!mt-1",children:n("taxRegions.fields.rate.hint")})]})}),e.jsx(s.Field,{control:c.control,name:"code",render:({field:l})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:n("fields.code")}),e.jsx(s.Control,{children:e.jsx(h,{...l})})]})}),!(r!=null&&r.parent_id)&&e.jsx(s.Field,{control:c.control,name:"is_combinable",render:({field:{ref:l,onChange:t,value:a,...i}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:n("taxRates.fields.isCombinable")}),e.jsx(s.Control,{children:e.jsx(L,{...i,checked:a,onCheckedChange:t})}),e.jsx(s.Hint,{className:"!mt-1",children:n("taxRegions.fields.is_combinable.hint")})]})})]})})]})})};export{D as T};
