import{u as g,o as v,i as b,j as e,T as w}from"./index-S--WvUSo.js";import{t as y}from"./zod-jt04JUtm.js";import{u as N,F as s}from"./form-0PHaH8g8.js";import{u as E,a as L,L as T}from"./react-router-dom-aSYyayiN.js";import{o as C,s as m}from"./index-JzuMwgWW.js";import{L as F}from"./logo-box-TfH3D5h8.js";import{T as S}from"./Trans-9IhttDMi.js";import{H as I}from"./heading-cSlef4Su.js";import{I as c}from"./input-A29ux7yj.js";import{B}from"./button-Pc5Xo8ua.js";import"./react-PzSkSLoa.js";import"./react-dom-Og6--24v.js";import"./information-circle-solid-rXH6vJ5W.js";import"./label-HFq5fzpT.js";import"./tooltip-Ixyw9oT8.js";import"./motion-jlFaYIfJ.js";const k=C({email:m().email(),password:m()}),W=()=>{var a,i;const{t:r}=g(),d=E(),x=L(),p=((i=(a=d.state)==null?void 0:a.from)==null?void 0:i.pathname)||"/orders",t=N({resolver:y(k),defaultValues:{email:"",password:""}}),{mutateAsync:u,isLoading:f}=v({retry:!1}),j=t.handleSubmit(async({email:o,password:h})=>{await u({email:o,password:h},{onSuccess:()=>{x(p,{replace:!0})},onError:n=>{var l;if(b(n)&&((l=n.response)==null?void 0:l.status)===401){t.setError("email",{type:"manual"}),t.setError("password",{type:"manual",message:r("errors.invalidCredentials")});return}t.setError("root.serverError",{type:"manual",message:r("errors.serverError")})}})});return e.jsx("div",{className:"bg-ui-bg-base flex min-h-dvh w-dvw items-center justify-center",children:e.jsxs("div",{className:"m-4 flex w-full max-w-[300px] flex-col items-center",children:[e.jsx(F,{className:"mb-4"}),e.jsxs("div",{className:"mb-4 flex flex-col items-center",children:[e.jsx(I,{children:r("login.title")}),e.jsx(w,{size:"small",className:"text-ui-fg-subtle text-center",children:r("login.hint")})]}),e.jsx(s,{...t,children:e.jsxs("form",{onSubmit:j,className:"flex w-full flex-col gap-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(s.Field,{control:t.control,name:"email",render:({field:o})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:r("fields.email")}),e.jsx(s.Control,{children:e.jsx(c,{autoComplete:"email",...o})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:t.control,name:"password",render:({field:o})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:r("fields.password")}),e.jsx(s.Control,{children:e.jsx(c,{type:"password",autoComplete:"current-password",...o})}),e.jsx(s.ErrorMessage,{})]})})]}),e.jsx(B,{className:"w-full",type:"submit",isLoading:f,children:r("actions.continue")})]})}),e.jsx("div",{className:"my-6 h-px w-full border-b border-dotted"}),e.jsx("span",{className:"text-ui-fg-subtle txt-small",children:e.jsx(S,{i18nKey:"login.forgotPassword",components:[e.jsx(T,{to:"/reset-password",className:"text-ui-fg-interactive transition-fg hover:text-ui-fg-interactive-hover focus-visible:text-ui-fg-interactive-hover outline-none"},"reset-password-link")]})})]})})};export{W as Component};
