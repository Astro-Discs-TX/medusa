import{an as l,j as a,u as m}from"./index-S--WvUSo.js";import{r as p}from"./react-PzSkSLoa.js";import{a as h}from"./form-0PHaH8g8.js";import{D as g,C as f}from"./currency-cell-td0Z0cRW.js";import{R as _}from"./readonly-cell-mOmG3VSA.js";import{u as x}from"./currencies--m0OMbks.js";import{c as j}from"./index-JDlOzmVl.js";const P=({form:i})=>{var r;const{store:t,isLoading:n}=l(),{currencies:e,isLoading:o}=x({code:t==null?void 0:t.supported_currency_codes,limit:(r=t==null?void 0:t.supported_currency_codes)==null?void 0:r.length},{enabled:!!t}),s=y({currencies:e}),d=h({control:i.control,name:"variants"});return a.jsx("div",{className:"flex size-full flex-col divide-y overflow-hidden",children:a.jsx(g,{columns:s,data:d,isLoading:n||o,state:i})})},c=j(),y=({currencies:i=[]})=>{const{t}=m();return p.useMemo(()=>[c.display({id:t("fields.title"),header:t("fields.title"),cell:({row:e})=>{const o=e.original;return a.jsx(_,{children:a.jsx("div",{className:"flex h-full w-full items-center gap-x-2 overflow-hidden",children:a.jsx("span",{className:"truncate",children:o.title})})})}}),...i.map(e=>c.display({header:`Price ${e.code.toUpperCase()}`,cell:({row:o,table:s})=>a.jsx(f,{currency:e,meta:s.options.meta,field:`variants.${o.index}.prices.${e.code}`})}))],[t,i])},z=i=>{var n,e,o,s,d;return{...i,is_giftcard:!1,tags:(n=i==null?void 0:i.tags)!=null&&n.length?(e=i.tags)==null?void 0:e.map(r=>({value:r})):void 0,sales_channels:(o=i==null?void 0:i.sales_channels)!=null&&o.length?(s=i.sales_channels)==null?void 0:s.map(r=>({id:r.id})):void 0,images:(d=i.images)!=null&&d.length?i.images:void 0,collection_id:i.collection_id||void 0,categories:i.categories.map(r=>({id:r})),type_id:i.type_id||void 0,handle:i.handle||void 0,origin_country:i.origin_country||void 0,material:i.material||void 0,mid_code:i.mid_code||void 0,hs_code:i.hs_code||void 0,thumbnail:i.thumbnail||void 0,subtitle:i.subtitle||void 0,description:i.description||void 0,width:i.width?parseFloat(i.width):void 0,length:i.length?parseFloat(i.length):void 0,height:i.height?parseFloat(i.height):void 0,weight:i.weight?parseFloat(i.weight):void 0,variants:w(i.variants)}},w=i=>i.filter(t=>t.should_create).map(t=>({title:Object.values(t.options||{}).join(" / "),options:t.options,prices:Object.entries(t.prices||{}).map(([n,e])=>({currency_code:n,amount:e?parseFloat(e):0}))}));export{P as V,z as a,w as n};
