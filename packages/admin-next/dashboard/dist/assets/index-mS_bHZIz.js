import{u as n,a_ as h,j as r,a$ as j,a1 as b}from"./index-S--WvUSo.js";import{L as y,O as g}from"./react-router-dom-aSYyayiN.js";import{u as _,a as O,D as v}from"./use-data-table-TeZp00wg.js";import{r as D}from"./react-PzSkSLoa.js";import{D as T}from"./date-cell-G_vX9su2.js";import{S as C}from"./status-cell-9XExsAIG.js";import{C as N,a as P}from"./customer-cell-w4T4OK3Y.js";import{A as S}from"./action-menu-olZwXQ3q.js";import{P as w}from"./pencil-square-u3fizEAQ.js";import{T as A}from"./trash-nTjeUaCp.js";import{u as k}from"./use-prompt-wB0F2CxI.js";import{c as z}from"./index-JDlOzmVl.js";import{H as E}from"./heading-cSlef4Su.js";import{B as H}from"./button-Pc5Xo8ua.js";import"./react-dom-Og6--24v.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./index-1Zwdg31z.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./x-mark-mini-aYDSd38M.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./command-bar-wUgfUfvQ.js";import"./placeholder-cell-O6UVTGmQ.js";import"./tooltip-Ixyw9oT8.js";import"./prompt-LzbVPZYR.js";import"./index-sF0hA49A.js";const L=({draftOrder:t})=>{const{t:e}=n(),s=k(),{mutateAsync:a}=h(t.id),o=async()=>{await s({title:e("general.areYouSure"),description:e("draftOrders.deleteWarning",{id:`#${t.display_id}`}),confirmText:e("actions.delete"),cancelText:e("actions.cancel")})&&await a()};return r.jsx(S,{groups:[{actions:[{label:e("actions.edit"),to:`${t.id}/edit`,icon:r.jsx(w,{})}]},{actions:[{label:e("actions.delete"),onClick:o,icon:r.jsx(A,{})}]}]})},i=z(),R=()=>{const{t}=n();return D.useMemo(()=>[i.accessor("display_id",{header:t("fields.id"),cell:({getValue:e})=>r.jsx("div",{className:"flex size-full items-center overflow-hidden",children:r.jsxs("span",{className:"truncate",children:["#",e()]})})}),i.accessor("status",{header:t("fields.status"),cell:({getValue:e})=>{const s=e(),{color:a,label:o}={open:{color:"orange",label:t("draftOrders.status.open")},completed:{color:"green",label:t("draftOrders.status.completed")}}[s];return r.jsx(C,{color:a,children:o})}}),i.accessor("order",{header:t("fields.order"),cell:({getValue:e})=>{var a;const s=(a=e())==null?void 0:a.display_id;return r.jsx("div",{className:"flex size-full items-center overflow-hidden",children:r.jsx("span",{className:"truncate",children:s?`#${s}`:"-"})})}}),i.accessor("cart.customer",{header:()=>r.jsx(N,{}),cell:({getValue:e})=>{const s=e();return r.jsx(P,{customer:s})}}),i.accessor("created_at",{header:t("fields.createdAt"),cell:({getValue:e})=>{const s=e();return r.jsx(T,{date:s})}}),i.display({id:"actions",cell:({row:e})=>r.jsx(L,{draftOrder:e.original})})],[t])},$=()=>{const{t}=n(),e=[{type:"select",multiple:!0,key:"status",label:t("fields.status"),options:[{label:t("draftOrders.status.open"),value:"open"},{label:t("draftOrders.status.completed"),value:"completed"}]}],s=[{label:t("fields.createdAt"),key:"created_at"},{label:t("fields.updatedAt"),key:"updated_at"}].map(a=>({key:a.key,label:a.label,type:"date"}));return[...e,...s]},q=({pageSize:t=20,prefix:e})=>{const s=_(["offset","q","order","status","created_at","updated_at"],e),{status:a,offset:o,created_at:l,updated_at:c,...d}=s;return{searchParams:{limit:t,offset:o?Number(o):0,status:a?a.split(","):void 0,created_at:l?JSON.parse(l):void 0,updated_at:c?JSON.parse(c):void 0,...d},raw:s}},u=20,B=()=>{const{t}=n(),{searchParams:e,raw:s}=q({pageSize:u}),{draft_orders:a,count:o,isLoading:l,isError:c,error:d}=j({...e},{keepPreviousData:!0}),m=R(),f=$(),{table:x}=O({data:a||[],columns:m,count:o,enablePagination:!0,getRowId:p=>p.id,pageSize:u});if(c)throw d;return r.jsxs(b,{className:"divide-y p-0",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[r.jsx(E,{children:t("draftOrders.domain")}),r.jsx(H,{variant:"secondary",size:"small",asChild:!0,children:r.jsx(y,{to:"create",children:t("actions.create")})})]}),r.jsx(v,{table:x,isLoading:l,columns:m,filters:f,pageSize:u,count:o,search:!0,pagination:!0,navigateTo:p=>p.original.id,orderBy:["status","created_at","updated_at"],queryObject:s})]})},ge=()=>r.jsxs("div",{className:"flex flex-col gap-y-2",children:[r.jsx(B,{}),r.jsx(g,{})]});export{ge as Component};
