import{u as j,j as e}from"./index-S--WvUSo.js";import{u as f,R as n}from"./route-focus-modal-MMx5Xnk0.js";import{u as h,a as y}from"./price-lists---tSXD3D.js";import{t as g}from"./zod-jt04JUtm.js";import{u as v,F as r}from"./form-0PHaH8g8.js";import{z as c}from"./index-JzuMwgWW.js";import{a as p}from"./constants-oWLT51HC.js";import{R as m}from"./radio-group-asQL-yXP.js";import{I as E}from"./input-A29ux7yj.js";import{T as b}from"./textarea-D4fuXHvE.js";import{B as x}from"./button-Pc5Xo8ua.js";import{c as F}from"./react-router-dom-aSYyayiN.js";import{H as C}from"./heading-cSlef4Su.js";import"./react-PzSkSLoa.js";import"./react-dom-Og6--24v.js";import"./drawer-H3TI1lDZ.js";import"./index-sF0hA49A.js";import"./prompt-LzbVPZYR.js";import"./information-circle-solid-rXH6vJ5W.js";import"./label-HFq5fzpT.js";import"./tooltip-Ixyw9oT8.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";const L=c.object({type:c.nativeEnum(p),title:c.string().min(1),description:c.string().min(1)}),R=({priceList:o})=>{const{t:i}=j(),{handleSuccess:l}=f(),t=v({defaultValues:{type:o.type,title:o.title,description:o.description},resolver:g(L)}),{mutateAsync:a}=h(o.id),d=t.handleSubmit(async s=>{await a(s,{onSuccess:()=>{l()}})});return e.jsx(n.Form,{form:t,children:e.jsxs("form",{className:"flex flex-1 flex-col overflow-hidden",onSubmit:d,children:[e.jsxs(n.Body,{className:"flex flex-1 flex-col gap-y-8 overflow-auto",children:[e.jsx(r.Field,{control:t.control,name:"type",render:({field:{onChange:s,...u}})=>e.jsxs(r.Item,{children:[e.jsxs("div",{children:[e.jsx(r.Label,{children:i("fields.type")}),e.jsx(r.Hint,{children:i("pricing.fields.typeHint")})]}),e.jsx(r.Control,{children:e.jsxs(m,{...u,onValueChange:s,children:[e.jsx(m.ChoiceBox,{value:p.SALE,label:i("pricing.type.sale"),description:i("pricing.fields.saleTypeHint")}),e.jsx(m.ChoiceBox,{value:p.OVERRIDE,label:i("pricing.type.override"),description:i("pricing.fields.overrideTypeHint")})]})})]})}),e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(r.Field,{control:t.control,name:"title",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{children:i("fields.title")}),e.jsx(r.Control,{children:e.jsx(E,{...s})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:t.control,name:"description",render:({field:s})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{children:i("fields.description")}),e.jsx(r.Control,{children:e.jsx(b,{...s})}),e.jsx(r.ErrorMessage,{})]})})]})]}),e.jsx(n.Footer,{className:"shrink-0",children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(n.Close,{asChild:!0,children:e.jsx(x,{size:"small",variant:"secondary",children:i("actions.cancel")})}),e.jsx(x,{size:"small",type:"submit",children:i("actions.save")})]})})]})})},W=()=>{const{t:o}=j(),{id:i}=F(),{price_list:l,isLoading:t,isError:a,error:d}=y(i),s=!t&&l;if(a)throw d;return e.jsxs(n,{children:[e.jsx(n.Header,{children:e.jsx(C,{children:o("pricing.edit.header")})}),s&&e.jsx(R,{priceList:l})]})};export{W as Component};
