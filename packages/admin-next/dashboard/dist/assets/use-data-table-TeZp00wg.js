import{j as r,d as $,bl as ue,aJ as _e,T as I,u as R,bV as X,aj as It,aa as E,I as Mt,bW as Et}from"./index-S--WvUSo.js";import{r as j,c as le,g as Rt}from"./react-PzSkSLoa.js";import{a as Lt,N as Ft}from"./empty-table-content-i72rBIA2.js";import{$ as ee,b as te,c as ae,e as re}from"./index-1Zwdg31z.js";import{b as U,a as kt}from"./react-router-dom-aSYyayiN.js";import{u as zt}from"./use-date-Putn0_Ur.js";import{D as Le}from"./date-picker-s8-9mila.js";import{X as se}from"./x-mark-mini-aYDSd38M.js";import{$ as Ht,b as Gt,a as Vt}from"./index-7dV3TD85.js";import{l as De}from"./lodash-5s15_I2H.js";import{L as de}from"./label-HFq5fzpT.js";import{I as Z}from"./input-A29ux7yj.js";import{B as Ut}from"./button-Pc5Xo8ua.js";import{T as k,f as Fe,u as Bt,g as Kt,a as qt,b as Jt}from"./index-JDlOzmVl.js";import{C as G}from"./command-bar-wUgfUfvQ.js";var Wt=Object.defineProperty,fe=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,ke=(e,t,a)=>t in e?Wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Qt=(e,t)=>{for(var a in t||(t={}))gt.call(t,a)&&ke(e,a,t[a]);if(fe)for(var a of fe(t))pt.call(t,a)&&ke(e,a,t[a]);return e},Xt=(e,t)=>{var a={};for(var s in e)gt.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&fe)for(var s of fe(e))t.indexOf(s)<0&&pt.call(e,s)&&(a[s]=e[s]);return a};const ht=j.forwardRef((e,t)=>{var a=e,{color:s="currentColor"}=a,i=Xt(a,["color"]);return j.createElement("svg",Qt({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",ref:t},i),j.createElement("path",{stroke:s,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.5 6.25 6.25 2.5m0 0L10 6.25M6.25 2.5v11.25m11.25 0-3.75 3.75m0 0L10 13.75m3.75 3.75V6.25"}))});ht.displayName="ArrowUpDown";const vt=j.createContext(null),ne=()=>{const e=j.useContext(vt);if(!e)throw new Error("useDataTableFacetedFilterContext must be used within a DataTableFacetedFilter");return e};function Yt(){this.__data__=[],this.size=0}var Zt=Yt;function ea(e,t){return e===t||e!==e&&t!==t}var bt=ea,ta=bt;function aa(e,t){for(var a=e.length;a--;)if(ta(e[a][0],t))return a;return-1}var ve=aa,ra=ve,sa=Array.prototype,na=sa.splice;function ia(e){var t=this.__data__,a=ra(t,e);if(a<0)return!1;var s=t.length-1;return a==s?t.pop():na.call(t,a,1),--this.size,!0}var oa=ia,la=ve;function ca(e){var t=this.__data__,a=la(t,e);return a<0?void 0:t[a][1]}var da=ca,ua=ve;function fa(e){return ua(this.__data__,e)>-1}var ga=fa,pa=ve;function ha(e,t){var a=this.__data__,s=pa(a,e);return s<0?(++this.size,a.push([e,t])):a[s][1]=t,this}var va=ha,ba=Zt,ma=oa,xa=da,ya=ga,ja=va;function B(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var s=e[t];this.set(s[0],s[1])}}B.prototype.clear=ba;B.prototype.delete=ma;B.prototype.get=xa;B.prototype.has=ya;B.prototype.set=ja;var be=B,_a=be;function $a(){this.__data__=new _a,this.size=0}var wa=$a;function Sa(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a}var Ca=Sa;function Oa(e){return this.__data__.get(e)}var Ta=Oa;function Na(e){return this.__data__.has(e)}var Pa=Na,Aa=typeof le=="object"&&le&&le.Object===Object&&le,mt=Aa,Da=mt,Ia=typeof self=="object"&&self&&self.Object===Object&&self,Ma=Da||Ia||Function("return this")(),F=Ma,Ea=F,Ra=Ea.Symbol,Ie=Ra,ze=Ie,xt=Object.prototype,La=xt.hasOwnProperty,Fa=xt.toString,Y=ze?ze.toStringTag:void 0;function ka(e){var t=La.call(e,Y),a=e[Y];try{e[Y]=void 0;var s=!0}catch{}var i=Fa.call(e);return s&&(t?e[Y]=a:delete e[Y]),i}var za=ka,Ha=Object.prototype,Ga=Ha.toString;function Va(e){return Ga.call(e)}var Ua=Va,He=Ie,Ba=za,Ka=Ua,qa="[object Null]",Ja="[object Undefined]",Ge=He?He.toStringTag:void 0;function Wa(e){return e==null?e===void 0?Ja:qa:Ge&&Ge in Object(e)?Ba(e):Ka(e)}var me=Wa;function Qa(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var yt=Qa,Xa=me,Ya=yt,Za="[object AsyncFunction]",er="[object Function]",tr="[object GeneratorFunction]",ar="[object Proxy]";function rr(e){if(!Ya(e))return!1;var t=Xa(e);return t==er||t==tr||t==Za||t==ar}var jt=rr,sr=F,nr=sr["__core-js_shared__"],ir=nr,$e=ir,Ve=function(){var e=/[^.]+$/.exec($e&&$e.keys&&$e.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function or(e){return!!Ve&&Ve in e}var lr=or,cr=Function.prototype,dr=cr.toString;function ur(e){if(e!=null){try{return dr.call(e)}catch{}try{return e+""}catch{}}return""}var _t=ur,fr=jt,gr=lr,pr=yt,hr=_t,vr=/[\\^$.*+?()[\]{}|]/g,br=/^\[object .+?Constructor\]$/,mr=Function.prototype,xr=Object.prototype,yr=mr.toString,jr=xr.hasOwnProperty,_r=RegExp("^"+yr.call(jr).replace(vr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $r(e){if(!pr(e)||gr(e))return!1;var t=fr(e)?_r:br;return t.test(hr(e))}var wr=$r;function Sr(e,t){return e==null?void 0:e[t]}var Cr=Sr,Or=wr,Tr=Cr;function Nr(e,t){var a=Tr(e,t);return Or(a)?a:void 0}var K=Nr,Pr=K,Ar=F,Dr=Pr(Ar,"Map"),Me=Dr,Ir=K,Mr=Ir(Object,"create"),xe=Mr,Ue=xe;function Er(){this.__data__=Ue?Ue(null):{},this.size=0}var Rr=Er;function Lr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Fr=Lr,kr=xe,zr="__lodash_hash_undefined__",Hr=Object.prototype,Gr=Hr.hasOwnProperty;function Vr(e){var t=this.__data__;if(kr){var a=t[e];return a===zr?void 0:a}return Gr.call(t,e)?t[e]:void 0}var Ur=Vr,Br=xe,Kr=Object.prototype,qr=Kr.hasOwnProperty;function Jr(e){var t=this.__data__;return Br?t[e]!==void 0:qr.call(t,e)}var Wr=Jr,Qr=xe,Xr="__lodash_hash_undefined__";function Yr(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=Qr&&t===void 0?Xr:t,this}var Zr=Yr,es=Rr,ts=Fr,as=Ur,rs=Wr,ss=Zr;function q(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var s=e[t];this.set(s[0],s[1])}}q.prototype.clear=es;q.prototype.delete=ts;q.prototype.get=as;q.prototype.has=rs;q.prototype.set=ss;var ns=q,Be=ns,is=be,os=Me;function ls(){this.size=0,this.__data__={hash:new Be,map:new(os||is),string:new Be}}var cs=ls;function ds(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var us=ds,fs=us;function gs(e,t){var a=e.__data__;return fs(t)?a[typeof t=="string"?"string":"hash"]:a.map}var ye=gs,ps=ye;function hs(e){var t=ps(this,e).delete(e);return this.size-=t?1:0,t}var vs=hs,bs=ye;function ms(e){return bs(this,e).get(e)}var xs=ms,ys=ye;function js(e){return ys(this,e).has(e)}var _s=js,$s=ye;function ws(e,t){var a=$s(this,e),s=a.size;return a.set(e,t),this.size+=a.size==s?0:1,this}var Ss=ws,Cs=cs,Os=vs,Ts=xs,Ns=_s,Ps=Ss;function J(e){var t=-1,a=e==null?0:e.length;for(this.clear();++t<a;){var s=e[t];this.set(s[0],s[1])}}J.prototype.clear=Cs;J.prototype.delete=Os;J.prototype.get=Ts;J.prototype.has=Ns;J.prototype.set=Ps;var $t=J,As=be,Ds=Me,Is=$t,Ms=200;function Es(e,t){var a=this.__data__;if(a instanceof As){var s=a.__data__;if(!Ds||s.length<Ms-1)return s.push([e,t]),this.size=++a.size,this;a=this.__data__=new Is(s)}return a.set(e,t),this.size=a.size,this}var Rs=Es,Ls=be,Fs=wa,ks=Ca,zs=Ta,Hs=Pa,Gs=Rs;function W(e){var t=this.__data__=new Ls(e);this.size=t.size}W.prototype.clear=Fs;W.prototype.delete=ks;W.prototype.get=zs;W.prototype.has=Hs;W.prototype.set=Gs;var Vs=W,Us="__lodash_hash_undefined__";function Bs(e){return this.__data__.set(e,Us),this}var Ks=Bs;function qs(e){return this.__data__.has(e)}var Js=qs,Ws=$t,Qs=Ks,Xs=Js;function ge(e){var t=-1,a=e==null?0:e.length;for(this.__data__=new Ws;++t<a;)this.add(e[t])}ge.prototype.add=ge.prototype.push=Qs;ge.prototype.has=Xs;var Ys=ge;function Zs(e,t){for(var a=-1,s=e==null?0:e.length;++a<s;)if(t(e[a],a,e))return!0;return!1}var en=Zs;function tn(e,t){return e.has(t)}var an=tn,rn=Ys,sn=en,nn=an,on=1,ln=2;function cn(e,t,a,s,i,n){var l=a&on,c=e.length,f=t.length;if(c!=f&&!(l&&f>c))return!1;var u=n.get(e),h=n.get(t);if(u&&h)return u==t&&h==e;var g=-1,p=!0,o=a&ln?new rn:void 0;for(n.set(e,t),n.set(t,e);++g<c;){var d=e[g],v=t[g];if(s)var x=l?s(v,d,g,t,e,n):s(d,v,g,e,t,n);if(x!==void 0){if(x)continue;p=!1;break}if(o){if(!sn(t,function(w,O){if(!nn(o,O)&&(d===w||i(d,w,a,s,n)))return o.push(O)})){p=!1;break}}else if(!(d===v||i(d,v,a,s,n))){p=!1;break}}return n.delete(e),n.delete(t),p}var wt=cn,dn=F,un=dn.Uint8Array,fn=un;function gn(e){var t=-1,a=Array(e.size);return e.forEach(function(s,i){a[++t]=[i,s]}),a}var pn=gn;function hn(e){var t=-1,a=Array(e.size);return e.forEach(function(s){a[++t]=s}),a}var vn=hn,Ke=Ie,qe=fn,bn=bt,mn=wt,xn=pn,yn=vn,jn=1,_n=2,$n="[object Boolean]",wn="[object Date]",Sn="[object Error]",Cn="[object Map]",On="[object Number]",Tn="[object RegExp]",Nn="[object Set]",Pn="[object String]",An="[object Symbol]",Dn="[object ArrayBuffer]",In="[object DataView]",Je=Ke?Ke.prototype:void 0,we=Je?Je.valueOf:void 0;function Mn(e,t,a,s,i,n,l){switch(a){case In:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Dn:return!(e.byteLength!=t.byteLength||!n(new qe(e),new qe(t)));case $n:case wn:case On:return bn(+e,+t);case Sn:return e.name==t.name&&e.message==t.message;case Tn:case Pn:return e==t+"";case Cn:var c=xn;case Nn:var f=s&jn;if(c||(c=yn),e.size!=t.size&&!f)return!1;var u=l.get(e);if(u)return u==t;s|=_n,l.set(e,t);var h=mn(c(e),c(t),s,i,n,l);return l.delete(e),h;case An:if(we)return we.call(e)==we.call(t)}return!1}var En=Mn;function Rn(e,t){for(var a=-1,s=t.length,i=e.length;++a<s;)e[i+a]=t[a];return e}var Ln=Rn,Fn=Array.isArray,Ee=Fn,kn=Ln,zn=Ee;function Hn(e,t,a){var s=t(e);return zn(e)?s:kn(s,a(e))}var Gn=Hn;function Vn(e,t){for(var a=-1,s=e==null?0:e.length,i=0,n=[];++a<s;){var l=e[a];t(l,a,e)&&(n[i++]=l)}return n}var Un=Vn;function Bn(){return[]}var Kn=Bn,qn=Un,Jn=Kn,Wn=Object.prototype,Qn=Wn.propertyIsEnumerable,We=Object.getOwnPropertySymbols,Xn=We?function(e){return e==null?[]:(e=Object(e),qn(We(e),function(t){return Qn.call(e,t)}))}:Jn,Yn=Xn;function Zn(e,t){for(var a=-1,s=Array(e);++a<e;)s[a]=t(a);return s}var ei=Zn;function ti(e){return e!=null&&typeof e=="object"}var je=ti,ai=me,ri=je,si="[object Arguments]";function ni(e){return ri(e)&&ai(e)==si}var ii=ni,Qe=ii,oi=je,St=Object.prototype,li=St.hasOwnProperty,ci=St.propertyIsEnumerable,di=Qe(function(){return arguments}())?Qe:function(e){return oi(e)&&li.call(e,"callee")&&!ci.call(e,"callee")},ui=di,pe={exports:{}};function fi(){return!1}var gi=fi;pe.exports;(function(e,t){var a=F,s=gi,i=t&&!t.nodeType&&t,n=i&&!0&&e&&!e.nodeType&&e,l=n&&n.exports===i,c=l?a.Buffer:void 0,f=c?c.isBuffer:void 0,u=f||s;e.exports=u})(pe,pe.exports);var Ct=pe.exports,pi=9007199254740991,hi=/^(?:0|[1-9]\d*)$/;function vi(e,t){var a=typeof e;return t=t??pi,!!t&&(a=="number"||a!="symbol"&&hi.test(e))&&e>-1&&e%1==0&&e<t}var bi=vi,mi=9007199254740991;function xi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=mi}var Ot=xi,yi=me,ji=Ot,_i=je,$i="[object Arguments]",wi="[object Array]",Si="[object Boolean]",Ci="[object Date]",Oi="[object Error]",Ti="[object Function]",Ni="[object Map]",Pi="[object Number]",Ai="[object Object]",Di="[object RegExp]",Ii="[object Set]",Mi="[object String]",Ei="[object WeakMap]",Ri="[object ArrayBuffer]",Li="[object DataView]",Fi="[object Float32Array]",ki="[object Float64Array]",zi="[object Int8Array]",Hi="[object Int16Array]",Gi="[object Int32Array]",Vi="[object Uint8Array]",Ui="[object Uint8ClampedArray]",Bi="[object Uint16Array]",Ki="[object Uint32Array]",C={};C[Fi]=C[ki]=C[zi]=C[Hi]=C[Gi]=C[Vi]=C[Ui]=C[Bi]=C[Ki]=!0;C[$i]=C[wi]=C[Ri]=C[Si]=C[Li]=C[Ci]=C[Oi]=C[Ti]=C[Ni]=C[Pi]=C[Ai]=C[Di]=C[Ii]=C[Mi]=C[Ei]=!1;function qi(e){return _i(e)&&ji(e.length)&&!!C[yi(e)]}var Ji=qi;function Wi(e){return function(t){return e(t)}}var Qi=Wi,he={exports:{}};he.exports;(function(e,t){var a=mt,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,n=i&&i.exports===s,l=n&&a.process,c=function(){try{var f=i&&i.require&&i.require("util").types;return f||l&&l.binding&&l.binding("util")}catch{}}();e.exports=c})(he,he.exports);var Xi=he.exports,Yi=Ji,Zi=Qi,Xe=Xi,Ye=Xe&&Xe.isTypedArray,eo=Ye?Zi(Ye):Yi,Tt=eo,to=ei,ao=ui,ro=Ee,so=Ct,no=bi,io=Tt,oo=Object.prototype,lo=oo.hasOwnProperty;function co(e,t){var a=ro(e),s=!a&&ao(e),i=!a&&!s&&so(e),n=!a&&!s&&!i&&io(e),l=a||s||i||n,c=l?to(e.length,String):[],f=c.length;for(var u in e)(t||lo.call(e,u))&&!(l&&(u=="length"||i&&(u=="offset"||u=="parent")||n&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||no(u,f)))&&c.push(u);return c}var uo=co,fo=Object.prototype;function go(e){var t=e&&e.constructor,a=typeof t=="function"&&t.prototype||fo;return e===a}var po=go;function ho(e,t){return function(a){return e(t(a))}}var vo=ho,bo=vo,mo=bo(Object.keys,Object),xo=mo,yo=po,jo=xo,_o=Object.prototype,$o=_o.hasOwnProperty;function wo(e){if(!yo(e))return jo(e);var t=[];for(var a in Object(e))$o.call(e,a)&&a!="constructor"&&t.push(a);return t}var So=wo,Co=jt,Oo=Ot;function To(e){return e!=null&&Oo(e.length)&&!Co(e)}var No=To,Po=uo,Ao=So,Do=No;function Io(e){return Do(e)?Po(e):Ao(e)}var Mo=Io,Eo=Gn,Ro=Yn,Lo=Mo;function Fo(e){return Eo(e,Lo,Ro)}var ko=Fo,Ze=ko,zo=1,Ho=Object.prototype,Go=Ho.hasOwnProperty;function Vo(e,t,a,s,i,n){var l=a&zo,c=Ze(e),f=c.length,u=Ze(t),h=u.length;if(f!=h&&!l)return!1;for(var g=f;g--;){var p=c[g];if(!(l?p in t:Go.call(t,p)))return!1}var o=n.get(e),d=n.get(t);if(o&&d)return o==t&&d==e;var v=!0;n.set(e,t),n.set(t,e);for(var x=l;++g<f;){p=c[g];var w=e[p],O=t[p];if(s)var D=l?s(O,w,p,t,e,n):s(w,O,p,e,t,n);if(!(D===void 0?w===O||i(w,O,a,s,n):D)){v=!1;break}x||(x=p=="constructor")}if(v&&!x){var P=e.constructor,_=t.constructor;P!=_&&"constructor"in e&&"constructor"in t&&!(typeof P=="function"&&P instanceof P&&typeof _=="function"&&_ instanceof _)&&(v=!1)}return n.delete(e),n.delete(t),v}var Uo=Vo,Bo=K,Ko=F,qo=Bo(Ko,"DataView"),Jo=qo,Wo=K,Qo=F,Xo=Wo(Qo,"Promise"),Yo=Xo,Zo=K,el=F,tl=Zo(el,"Set"),al=tl,rl=K,sl=F,nl=rl(sl,"WeakMap"),il=nl,Oe=Jo,Te=Me,Ne=Yo,Pe=al,Ae=il,Nt=me,Q=_t,et="[object Map]",ol="[object Object]",tt="[object Promise]",at="[object Set]",rt="[object WeakMap]",st="[object DataView]",ll=Q(Oe),cl=Q(Te),dl=Q(Ne),ul=Q(Pe),fl=Q(Ae),H=Nt;(Oe&&H(new Oe(new ArrayBuffer(1)))!=st||Te&&H(new Te)!=et||Ne&&H(Ne.resolve())!=tt||Pe&&H(new Pe)!=at||Ae&&H(new Ae)!=rt)&&(H=function(e){var t=Nt(e),a=t==ol?e.constructor:void 0,s=a?Q(a):"";if(s)switch(s){case ll:return st;case cl:return et;case dl:return tt;case ul:return at;case fl:return rt}return t});var gl=H,Se=Vs,pl=wt,hl=En,vl=Uo,nt=gl,it=Ee,ot=Ct,bl=Tt,ml=1,lt="[object Arguments]",ct="[object Array]",ce="[object Object]",xl=Object.prototype,dt=xl.hasOwnProperty;function yl(e,t,a,s,i,n){var l=it(e),c=it(t),f=l?ct:nt(e),u=c?ct:nt(t);f=f==lt?ce:f,u=u==lt?ce:u;var h=f==ce,g=u==ce,p=f==u;if(p&&ot(e)){if(!ot(t))return!1;l=!0,h=!1}if(p&&!h)return n||(n=new Se),l||bl(e)?pl(e,t,a,s,i,n):hl(e,t,f,a,s,i,n);if(!(a&ml)){var o=h&&dt.call(e,"__wrapped__"),d=g&&dt.call(t,"__wrapped__");if(o||d){var v=o?e.value():e,x=d?t.value():t;return n||(n=new Se),i(v,x,a,s,n)}}return p?(n||(n=new Se),vl(e,t,a,s,i,n)):!1}var jl=yl,_l=jl,ut=je;function Pt(e,t,a,s,i){return e===t?!0:e==null||t==null||!ut(e)&&!ut(t)?e!==e&&t!==t:_l(e,t,a,s,Pt,i)}var $l=Pt,wl=$l;function Sl(e,t){return wl(e,t)}var Cl=Sl;const Ol=Rt(Cl),ie=({param:e,prefix:t,multiple:a=!1})=>{const[s,i]=U(),n=t?`${t}_${e}`:e,l=t?`${t}_offset`:"offset";return{add:h=>{i(g=>{const p=new URLSearchParams(g);return a?(()=>{var x;const v=((x=p.get(n))==null?void 0:x.split(","))||[];v.includes(h)||(v.push(h),p.set(n,v.join(",")))})():(()=>{p.set(n,h)})(),p.delete(l),p})},delete:h=>{const g=o=>{var x;const d=((x=o.get(n))==null?void 0:x.split(","))||[],v=d.indexOf(h||"");v>-1&&(d.splice(v,1),o.set(n,d.join(",")))},p=o=>{o.delete(n)};i(o=>(h?(a?g(o):p(o),o.get(n)||o.delete(n)):o.delete(n),o.delete(l),o))},get:()=>{var h;return((h=s.get(n))==null?void 0:h.split(",").filter(Boolean))||[]}}},Tl=({filter:e,prefix:t,openOnMount:a})=>{const[s,i]=j.useState(a),[n,l]=j.useState(!1),{getFullDate:c}=zt(),{key:f,label:u}=e,{removeFilter:h}=ne(),g=ie({param:f,prefix:t}),p=Pl(),o=b=>{g.add(JSON.stringify(b)),l(!1)},d=()=>{g.delete(),l(b=>!b)},v=g.get(),x=Al(v),w=ft(x,"$gte"),O=ft(x,"$lte"),D=(b,A)=>{const L=A==="start"?"$gte":"$lte",M=b?b.toISOString():void 0;g.add(JSON.stringify({...x||{},[L]:M}))},P=()=>{const b=p.find(A=>Ol(A.value,x));return b==null?void 0:b.label},_=b=>b?c({date:b}):void 0,m=()=>[w,O].map(_).filter(Boolean).join(" - "),S=P()||m(),y=()=>{g.delete(),h(f)};let T=null;const N=b=>{i(b),T&&clearTimeout(T),!b&&!v.length&&(T=setTimeout(()=>{h(f)},200))};return r.jsxs(ee,{modal:!0,open:s,onOpenChange:N,children:[r.jsx(Nl,{label:u,value:S,onRemove:y}),r.jsx(te,{children:r.jsxs(ae,{"data-name":"date_filter_content",align:"start",sideOffset:8,collisionPadding:24,className:$("bg-ui-bg-base text-ui-fg-base shadow-elevation-flyout h-full max-h-[var(--radix-popper-available-height)] w-[300px] overflow-auto rounded-lg"),onInteractOutside:b=>{var A;b.target instanceof HTMLElement&&((A=b.target.attributes.getNamedItem("data-name"))==null?void 0:A.value)==="filters_menu_content"&&b.preventDefault()},children:[r.jsxs("ul",{className:"w-full p-1",children:[p.map(b=>{const A=g.get().includes(JSON.stringify(b.value));return r.jsx("li",{children:r.jsxs("button",{className:"bg-ui-bg-base hover:bg-ui-bg-base-hover focus-visible:bg-ui-bg-base-pressed text-ui-fg-base data-[disabled]:text-ui-fg-disabled txt-compact-small relative flex w-full cursor-pointer select-none items-center rounded-md px-2 py-1.5 outline-none transition-colors data-[disabled]:pointer-events-none",type:"button",onClick:()=>{o(b.value)},children:[r.jsx("div",{className:$("transition-fg flex h-5 w-5 items-center justify-center",{"[&_svg]:invisible":!A}),children:r.jsx(ue,{})}),b.label]})},b.label)}),r.jsx("li",{children:r.jsxs("button",{className:"bg-ui-bg-base hover:bg-ui-bg-base-hover focus-visible:bg-ui-bg-base-pressed text-ui-fg-base data-[disabled]:text-ui-fg-disabled txt-compact-small relative flex w-full cursor-pointer select-none items-center rounded-md px-2 py-1.5 outline-none transition-colors data-[disabled]:pointer-events-none",type:"button",onClick:d,children:[r.jsx("div",{className:$("transition-fg flex h-5 w-5 items-center justify-center",{"[&_svg]:invisible":!n}),children:r.jsx(ue,{})}),_e("filters.date.custom")]})})]}),n&&r.jsxs("div",{className:"border-t px-1 pb-3 pt-1",children:[r.jsxs("div",{children:[r.jsx("div",{className:"px-2 py-1",children:r.jsx(I,{size:"xsmall",leading:"compact",weight:"plus",children:_e("filters.date.from")})}),r.jsx("div",{className:"px-2 py-1",children:r.jsx(Le,{toDate:O,value:w,onChange:b=>D(b,"start")})})]}),r.jsxs("div",{children:[r.jsx("div",{className:"px-2 py-1",children:r.jsx(I,{size:"xsmall",leading:"compact",weight:"plus",children:_e("filters.date.to")})}),r.jsx("div",{className:"px-2 py-1",children:r.jsx(Le,{fromDate:w,value:O||void 0,onChange:b=>{D(b,"end")}})})]})]})]})})]})},Nl=({label:e,value:t,onRemove:a})=>{const s=i=>{i.stopPropagation(),a()};return r.jsx(re,{asChild:!0,className:$("bg-ui-bg-field transition-fg shadow-borders-base text-ui-fg-subtle flex cursor-pointer select-none items-center rounded-md","hover:bg-ui-bg-field-hover","data-[state=open]:bg-ui-bg-field-hover"),children:r.jsxs("div",{children:[r.jsx("div",{className:$("flex items-center justify-center px-2 py-1",{"border-r":!!t}),children:r.jsx(I,{size:"small",weight:"plus",leading:"compact",children:e})}),t&&r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:"border-r p-1 px-2",children:r.jsx(I,{size:"small",weight:"plus",leading:"compact",children:t})},t)}),t&&r.jsx("div",{children:r.jsx("button",{onClick:s,className:$("text-ui-fg-muted transition-fg flex items-center justify-center p-1","hover:bg-ui-bg-subtle-hover","active:bg-ui-bg-subtle-pressed active:text-ui-fg-base"),children:r.jsx(se,{})})})]})})},V=new Date;V.setHours(0,0,0,0);const Pl=()=>{const{t:e}=R();return j.useMemo(()=>[{label:e("filters.date.today"),value:{$gte:V.toISOString()}},{label:e("filters.date.lastSevenDays"),value:{$gte:new Date(V.getTime()-7*24*60*60*1e3).toISOString()}},{label:e("filters.date.lastThirtyDays"),value:{$gte:new Date(V.getTime()-30*24*60*60*1e3).toISOString()}},{label:e("filters.date.lastNinetyDays"),value:{$gte:new Date(V.getTime()-90*24*60*60*1e3).toISOString()}},{label:e("filters.date.lastTwelveMonths"),value:{$gte:new Date(V.getTime()-365*24*60*60*1e3).toISOString()}}],[e])},Al=e=>e!=null&&e.length?JSON.parse(e.join(",")):null,ft=(e,t)=>e!=null&&e[t]?new Date(e[t]):void 0,Dl=({filter:e,prefix:t,openOnMount:a})=>{const{t:s}=R(),[i,n]=j.useState(a),{key:l,label:c}=e,{removeFilter:f}=ne(),u=ie({param:l,prefix:t,multiple:!1}),h=u.get(),[g,p]=j.useState(Ml(h)),o=j.useCallback(De.debounce((_,m)=>{const S=_.target.value,y=JSON.parse((h==null?void 0:h.join(","))||"{}"),T=!isNaN(Number(y)),N=b=>{if(!S&&T){u.delete();return}if(y&&!S){delete y[b],u.add(JSON.stringify(y));return}if(!y){u.add(JSON.stringify({[b]:S}));return}u.add(JSON.stringify({...y,[b]:S}))};switch(m){case"eq":S?u.add(S):u.delete();break;case"lt":case"gt":N(m);break}},500),[u,h]);j.useEffect(()=>()=>{o.cancel()},[o]);let d=null;const v=_=>{n(_),d&&clearTimeout(d),!_&&!h.length&&(d=setTimeout(()=>{f(l)},200))},x=()=>{u.delete(),f(l)},w=[{operator:"exact",label:s("filters.compare.exact")},{operator:"range",label:s("filters.compare.range")}],O=`${l}-gt`,D=`${l}-lt`,P=l;return r.jsxs(ee,{modal:!0,open:i,onOpenChange:v,children:[r.jsx(Il,{label:c,value:h,onRemove:x}),r.jsx(te,{children:r.jsxs(ae,{"data-name":"number_filter_content",align:"start",sideOffset:8,collisionPadding:24,className:$("bg-ui-bg-base text-ui-fg-base shadow-elevation-flyout max-h-[var(--radix-popper-available-height)] w-[300px] divide-y overflow-y-auto rounded-lg outline-none"),onInteractOutside:_=>{var m;_.target instanceof HTMLElement&&((m=_.target.attributes.getNamedItem("data-name"))==null?void 0:m.value)==="filters_menu_content"&&_.preventDefault()},children:[r.jsx("div",{className:"p-1",children:r.jsx(Ht,{value:g,onValueChange:_=>p(_),className:"flex flex-col items-start",orientation:"vertical",autoFocus:!0,children:w.map(_=>r.jsxs(Gt,{value:_.operator,className:"txt-compact-small hover:bg-ui-bg-base-hover focus-visible:bg-ui-bg-base-hover active:bg-ui-bg-base-pressed transition-fg grid w-full grid-cols-[20px_1fr] gap-2 rounded-[4px] px-2 py-1.5 text-left outline-none",children:[r.jsx("div",{className:"size-5",children:r.jsx(Vt,{children:r.jsx(ue,{})})}),r.jsx("span",{className:"w-full",children:_.label})]},_.operator))})}),r.jsx("div",{children:g==="range"?r.jsxs("div",{className:"px-1 pb-3 pt-1",children:[r.jsx("div",{className:"px-2 py-1.5",children:r.jsx(de,{size:"xsmall",weight:"plus",htmlFor:O,children:s("filters.compare.greaterThan")})}),r.jsx("div",{className:"px-2 py-0.5",children:r.jsx(Z,{name:O,size:"small",type:"number",defaultValue:Ce(h,"gt"),onChange:_=>o(_,"gt")})}),r.jsx("div",{className:"px-2 py-1.5",children:r.jsx(de,{size:"xsmall",weight:"plus",htmlFor:D,children:s("filters.compare.lessThan")})}),r.jsx("div",{className:"px-2 py-0.5",children:r.jsx(Z,{name:D,size:"small",type:"number",defaultValue:Ce(h,"lt"),onChange:_=>o(_,"lt")})})]},"range"):r.jsxs("div",{className:"px-1 pb-3 pt-1",children:[r.jsx("div",{className:"px-2 py-1.5",children:r.jsx(de,{size:"xsmall",weight:"plus",htmlFor:P,children:c})}),r.jsx("div",{className:"px-2 py-0.5",children:r.jsx(Z,{name:P,size:"small",type:"number",defaultValue:Ce(h,"eq"),onChange:_=>o(_,"eq")})})]},"exact")})]})})]})},Il=({label:e,value:t,onRemove:a})=>{const{t:s}=R(),i=c=>{c.stopPropagation(),a()},n=JSON.parse((t==null?void 0:t.join(","))||"{}");let l="";if(typeof n=="object"){const c=[];n.gt&&c.push(s("filters.compare.greaterThanLabel",{value:n.gt})),n.lt&&c.push(s("filters.compare.lessThanLabel",{value:n.lt})),l=c.join(` ${s("filters.compare.andLabel")} `)}return typeof n=="number"&&(l=n.toString()),r.jsx(re,{asChild:!0,className:$("bg-ui-bg-field transition-fg shadow-borders-base text-ui-fg-subtle flex cursor-pointer select-none items-center rounded-md","hover:bg-ui-bg-field-hover","data-[state=open]:bg-ui-bg-field-hover"),children:r.jsxs("div",{children:[r.jsx("div",{className:$("flex items-center justify-center px-2 py-1",{"border-r":!!t}),children:r.jsx(I,{size:"small",weight:"plus",leading:"compact",children:e})}),!!t&&r.jsx("div",{className:"border-r p-1 px-2",children:r.jsx(I,{size:"small",weight:"plus",leading:"compact",className:"text-ui-fg-muted",children:s("general.is")})}),t&&r.jsx("div",{className:"flex items-center",children:r.jsx("div",{className:"border-r p-1 px-2",children:r.jsx(I,{size:"small",weight:"plus",leading:"compact",children:l})})}),t&&r.jsx("div",{children:r.jsx("button",{onClick:i,className:$("text-ui-fg-muted transition-fg flex items-center justify-center p-1","hover:bg-ui-bg-subtle-hover","active:bg-ui-bg-subtle-pressed active:text-ui-fg-base"),children:r.jsx(se,{})})})]})})},At=e=>{if(!e)return;const t=e.join(",");if(t)return JSON.parse(t)},Ce=(e,t)=>{const a=At(e);if(typeof a=="object")return a[t];if(typeof a=="number"&&t==="eq")return a},Ml=e=>typeof At(e)=="object"?"range":"exact",El=({filter:e,prefix:t,multiple:a,searchable:s,options:i,openOnMount:n})=>{const[l,c]=j.useState(n),[f,u]=j.useState(""),[h,g]=j.useState(null),{t:p}=R(),{removeFilter:o}=ne(),{key:d,label:v}=e,x=ie({param:d,prefix:t,multiple:a}),w=x.get(),O=w.map(y=>{var T;return(T=i.find(N=>N.value===y))==null?void 0:T.label}).filter(Boolean),D=()=>{x.delete(),o(d)};let P=null;const _=y=>{c(y),P&&clearTimeout(P),!y&&!w.length&&(P=setTimeout(()=>{o(d)},200))},m=()=>{u(""),h&&h.focus()},S=y=>{x.get().includes(String(y))?x.delete(String(y)):x.add(String(y))};return r.jsxs(ee,{modal:!0,open:l,onOpenChange:_,children:[r.jsx(Rl,{label:v,value:O,onRemove:D}),r.jsx(te,{children:r.jsx(ae,{hideWhenDetached:!0,align:"start",sideOffset:8,collisionPadding:8,className:$("bg-ui-bg-base text-ui-fg-base shadow-elevation-flyout z-[1] h-full max-h-[200px] w-[300px] overflow-hidden rounded-lg outline-none"),onInteractOutside:y=>{var T;y.target instanceof HTMLElement&&((T=y.target.attributes.getNamedItem("data-name"))==null?void 0:T.value)==="filters_menu_content"&&(y.preventDefault(),y.stopPropagation())},children:r.jsxs(X,{className:"h-full",children:[s&&r.jsx("div",{className:"border-b p-1",children:r.jsxs("div",{className:"grid grid-cols-[1fr_20px] gap-x-2 rounded-md px-2 py-1",children:[r.jsx(X.Input,{ref:g,value:f,onValueChange:u,className:"txt-compact-small placeholder:text-ui-fg-muted bg-transparent outline-none",placeholder:"Search"}),r.jsx("div",{className:"flex h-5 w-5 items-center justify-center",children:r.jsx("button",{disabled:!f,onClick:m,className:$("transition-fg text-ui-fg-muted focus-visible:bg-ui-bg-base-pressed rounded-md outline-none",{invisible:!f}),children:r.jsx(se,{})})})]})}),r.jsx(X.Empty,{className:"txt-compact-small flex items-center justify-center p-1",children:r.jsx("span",{className:"w-full px-2 py-1 text-center",children:p("general.noResultsTitle")})}),r.jsx(X.List,{className:"h-full max-h-[163px] min-h-[0] overflow-auto p-1 outline-none",children:i.map(y=>{const T=x.get().includes(String(y.value));return r.jsxs(X.Item,{className:"bg-ui-bg-base hover:bg-ui-bg-base-hover aria-selected:bg-ui-bg-base-pressed focus-visible:bg-ui-bg-base-pressed text-ui-fg-base data-[disabled]:text-ui-fg-disabled txt-compact-small relative flex cursor-pointer select-none items-center gap-x-2 rounded-md px-2 py-1.5 outline-none transition-colors data-[disabled]:pointer-events-none",value:y.label,onSelect:()=>{S(y.value)},children:[r.jsx("div",{className:$("transition-fg flex h-5 w-5 items-center justify-center",{"[&_svg]:invisible":!T}),children:a?r.jsx(It,{}):r.jsx(ue,{})}),y.label]},String(y.value))})})]})})})]})},Rl=({label:e,value:t,onRemove:a})=>{const{t:s}=R(),i=t?Array.isArray(t)?t:[t]:null,n=(i==null?void 0:i.length)||0,l=c=>{c.stopPropagation(),a()};return r.jsx(re,{asChild:!0,children:r.jsxs("div",{className:$("bg-ui-bg-field transition-fg shadow-borders-base text-ui-fg-subtle flex cursor-pointer select-none items-center overflow-hidden rounded-md","hover:bg-ui-bg-field-hover","data-[state=open]:bg-ui-bg-field-hover"),children:[r.jsx("div",{className:$("flex items-center justify-center whitespace-nowrap px-2 py-1",{"border-r":n>0}),children:r.jsx(I,{size:"small",weight:"plus",leading:"compact",children:e})}),r.jsxs("div",{className:"flex w-full items-center overflow-hidden",children:[n>0&&r.jsx("div",{className:"border-r p-1 px-2",children:r.jsx(I,{size:"small",weight:"plus",leading:"compact",className:"text-ui-fg-muted",children:s("general.is")})}),n>0&&r.jsx("div",{className:"flex-1 overflow-hidden border-r p-1 px-2",children:r.jsx(I,{size:"small",leading:"compact",weight:"plus",className:"truncate text-nowrap",children:i==null?void 0:i.join(", ")})})]}),i&&i.length>0&&r.jsx("div",{children:r.jsx("button",{onClick:l,className:$("text-ui-fg-muted transition-fg flex items-center justify-center p-1","hover:bg-ui-bg-subtle-hover","active:bg-ui-bg-subtle-pressed active:text-ui-fg-base"),children:r.jsx(se,{})})})]})})},Ll=({filter:e,prefix:t,openOnMount:a})=>{const[s,i]=j.useState(a),{key:n,label:l}=e,{removeFilter:c}=ne(),f=ie({param:n,prefix:t}),u=f.get(),h=j.useCallback(De.debounce(d=>{const v=d.target.value;v?f.add(v):f.delete()},500),[f]);j.useEffect(()=>()=>{h.cancel()},[h]);let g=null;const p=d=>{i(d),g&&clearTimeout(g),!d&&!u.length&&(g=setTimeout(()=>{c(n)},200))},o=()=>{f.delete(),c(n)};return r.jsxs(ee,{modal:!0,open:s,onOpenChange:p,children:[r.jsx(Fl,{label:l,value:u==null?void 0:u[0],onRemove:o}),r.jsx(te,{children:r.jsx(ae,{hideWhenDetached:!0,align:"start",sideOffset:8,collisionPadding:8,className:$("bg-ui-bg-base text-ui-fg-base shadow-elevation-flyout z-[1] h-full max-h-[200px] w-[300px] overflow-hidden rounded-lg outline-none"),onInteractOutside:d=>{var v;d.target instanceof HTMLElement&&((v=d.target.attributes.getNamedItem("data-name"))==null?void 0:v.value)==="filters_menu_content"&&(d.preventDefault(),d.stopPropagation())},children:r.jsxs("div",{className:"px-1 pb-3 pt-1",children:[r.jsx("div",{className:"px-2 py-1.5",children:r.jsx(de,{size:"xsmall",weight:"plus",htmlFor:n,children:l})}),r.jsx("div",{className:"px-2 py-0.5",children:r.jsx(Z,{name:n,size:"small",defaultValue:(u==null?void 0:u[0])||void 0,onChange:h})})]})})})]})},Fl=({label:e,value:t,onRemove:a})=>{const{t:s}=R();return r.jsx(re,{asChild:!0,children:r.jsxs("div",{className:$("bg-ui-bg-field transition-fg shadow-borders-base text-ui-fg-subtle flex cursor-pointer select-none items-center overflow-hidden rounded-md","hover:bg-ui-bg-field-hover","data-[state=open]:bg-ui-bg-field-hover"),children:[r.jsx("div",{className:$("flex items-center justify-center whitespace-nowrap px-2 py-1",{"border-r":!!t}),children:r.jsx(I,{size:"small",weight:"plus",leading:"compact",children:e})}),r.jsxs("div",{className:"flex w-full items-center overflow-hidden",children:[!!t&&r.jsx("div",{className:"border-r p-1 px-2",children:r.jsx(I,{size:"small",weight:"plus",leading:"compact",className:"text-ui-fg-muted",children:s("general.is")})}),!!t&&r.jsx("div",{className:"flex-1 overflow-hidden border-r p-1 px-2",children:r.jsx(I,{size:"small",leading:"compact",weight:"plus",className:"truncate text-nowrap",children:t})})]}),!!t&&r.jsx("div",{children:r.jsx("button",{onClick:a,className:$("text-ui-fg-muted transition-fg flex items-center justify-center p-1","hover:bg-ui-bg-subtle-hover","active:bg-ui-bg-subtle-pressed active:text-ui-fg-base"),children:r.jsx(se,{})})})]})})},kl=({filters:e,prefix:t})=>{const{t:a}=R(),[s]=U(),[i,n]=j.useState(!1),[l,c]=j.useState(Hl({searchParams:s,filters:e,prefix:t})),f=e.filter(o=>!l.find(d=>d.key===o.key)),u=j.useRef(!0);j.useEffect(()=>{if(u.current){const o=new URLSearchParams(s);e.forEach(d=>{const v=t?`${t}_${d.key}`:d.key;o.get(v)&&!l.find(w=>w.key===d.key)&&(d.type==="select"?c(w=>[...w,{...d,multiple:d.multiple,options:d.options,openOnMount:!1}]):c(w=>[...w,{...d,openOnMount:!1}]))})}u.current=!1},[l,e,t,s]);const h=o=>{n(!1),c(d=>[...d,{...o,openOnMount:!0}])},g=j.useCallback(o=>{c(d=>d.filter(v=>v.key!==o))},[]),p=j.useCallback(()=>{c([])},[]);return r.jsx(vt.Provider,{value:j.useMemo(()=>({removeFilter:g,removeAllFilters:p}),[p,g]),children:r.jsxs("div",{className:"max-w-2/3 flex flex-wrap items-center gap-2",children:[l.map(o=>{switch(o.type){case"select":return r.jsx(El,{filter:o,prefix:t,options:o.options,multiple:o.multiple,searchable:o.searchable,openOnMount:o.openOnMount},o.key);case"date":return r.jsx(Tl,{filter:o,prefix:t,openOnMount:o.openOnMount},o.key);case"string":return r.jsx(Ll,{filter:o,prefix:t,openOnMount:o.openOnMount},o.key);case"number":return r.jsx(Dl,{filter:o,prefix:t,openOnMount:o.openOnMount},o.key)}}),f.length>0&&r.jsxs(ee,{modal:!0,open:i,onOpenChange:n,children:[r.jsx(re,{asChild:!0,id:"filters_menu_trigger",children:r.jsx(Ut,{size:"small",variant:"secondary",children:a("filters.addFilter")})}),r.jsx(te,{children:r.jsx(ae,{className:$("bg-ui-bg-base text-ui-fg-base shadow-elevation-flyout z-[1] h-full max-h-[200px] w-[300px] overflow-auto rounded-lg p-1 outline-none"),"data-name":"filters_menu_content",align:"start",sideOffset:8,collisionPadding:8,onCloseAutoFocus:o=>{l.find(v=>v.openOnMount)&&o.preventDefault()},children:f.map(o=>r.jsx("div",{className:"bg-ui-bg-base hover:bg-ui-bg-base-hover focus-visible:bg-ui-bg-base-pressed text-ui-fg-base data-[disabled]:text-ui-fg-disabled txt-compact-small relative flex cursor-pointer select-none items-center rounded-md px-2 py-1.5 outline-none transition-colors data-[disabled]:pointer-events-none",role:"menuitem",onClick:()=>{h(o)},children:o.label},o.key))})})]}),l.length>0&&r.jsx(zl,{filters:e,prefix:t})]})})},zl=({filters:e,prefix:t})=>{const{removeAllFilters:a}=ne(),[s,i]=U(),n=()=>{i(l=>{const c=new URLSearchParams(l);return e.forEach(f=>{c.delete(t?`${t}_${f.key}`:f.key)}),c}),a()};return r.jsx("button",{type:"button",onClick:n,className:$("text-ui-fg-muted transition-fg txt-compact-small-plus rounded-md px-2 py-1","hover:text-ui-fg-subtle","focus-visible:shadow-borders-focus"),children:"Clear all"})},Hl=({searchParams:e,filters:t,prefix:a})=>{const s=new URLSearchParams(e),i=[];return t.forEach(n=>{const l=a?`${a}_${n.key}`:n.key;s.get(l)&&(n.type==="select"?i.push({...n,multiple:n.multiple,options:n.options,openOnMount:!1}):i.push({...n,openOnMount:!1}))}),i},Gl=(e,t)=>{const a=t?`${t}_order`:"order",s=e.get(a);if(!s)return{dir:"asc"};const i=s.startsWith("-")?"desc":"asc";return{key:s.replace("-",""),dir:i}},Vl=e=>e.split("_").map((s,i)=>i===0?s.charAt(0).toUpperCase()+s.slice(1):s).join(" "),Ul=({keys:e,prefix:t})=>{const[a,s]=U(),[i,n]=j.useState(Gl(a,t)),l=t?`${t}_order`:"order",{t:c}=R(),f=g=>{n(p=>({...p,dir:g})),h({key:i.key,dir:g})},u=g=>{n(p=>({...p,key:g})),h({key:g,dir:i.dir})},h=g=>{if(!g.key){s(o=>(o.delete(l),o));return}const p=g.dir==="asc"?g.key:`-${g.key}`;s(o=>(o.set(l,p),o))};return r.jsxs(E,{children:[r.jsx(E.Trigger,{asChild:!0,children:r.jsx(Mt,{size:"small",children:r.jsx(ht,{})})}),r.jsxs(E.Content,{className:"z-[1]",align:"end",children:[r.jsx(E.RadioGroup,{value:i.key,onValueChange:u,children:e.map(g=>{const p=String(g);return r.jsx(E.RadioItem,{value:p,onSelect:o=>o.preventDefault(),children:Vl(p)},p)})}),r.jsx(E.Separator,{}),r.jsxs(E.RadioGroup,{value:i.dir,onValueChange:f,children:[r.jsxs(E.RadioItem,{className:"flex items-center justify-between",value:"asc",onSelect:g=>g.preventDefault(),children:[c("general.ascending"),r.jsx(E.Label,{children:"1 - 30"})]}),r.jsxs(E.RadioItem,{className:"flex items-center justify-between",value:"desc",onSelect:g=>g.preventDefault(),children:[c("general.descending"),r.jsx(E.Label,{children:"30 - 1"})]})]})]})]})},Bl=({placeholder:e,prefix:t})=>{const{t:a}=R(),s=e||a("general.search"),i=ie({param:"q",prefix:t,multiple:!1}),n=i.get(),l=j.useCallback(De.debounce(c=>{const f=c.target.value;f?i.add(f):i.delete()},500),[i]);return j.useEffect(()=>()=>{l.cancel()},[l]),r.jsx(Z,{name:"q",type:"search",size:"small",defaultValue:(n==null?void 0:n[0])||void 0,onChange:l,placeholder:s})},Kl=({search:e,orderBy:t,filters:a,prefix:s})=>(e||t||a||s)&&r.jsxs("div",{className:"flex items-start justify-between gap-x-4 px-6 py-4",children:[r.jsx("div",{className:"w-full max-w-[60%]",children:a&&a.length>0&&r.jsx(kl,{filters:a,prefix:s})}),r.jsxs("div",{className:"flex shrink-0 items-center gap-x-2",children:[e&&r.jsx(Bl,{prefix:s}),t&&r.jsx(Ul,{keys:t,prefix:s})]})]}),ql=({table:e,columns:t,pagination:a,navigateTo:s,commands:i,count:n=0,noResults:l=!1,layout:c="fit"})=>{const{t:f}=R(),u=kt(),[h,g]=j.useState(!1),p=t.find(m=>m.id==="select"),o=t.find(m=>m.id==="actions"),d=i&&i.length>0,v=e.getState().rowSelection,{pageIndex:x,pageSize:w}=e.getState().pagination,D=100/(t.length-(p?1:0)-(o?1:0)),P=m=>{m.currentTarget.scrollLeft>0?g(!0):g(!1)},_=async m=>{await m(v).then(()=>{e.resetRowSelection()})};return r.jsxs("div",{className:$("flex w-full flex-col overflow-hidden",{"flex flex-1 flex-col":c==="fill"}),children:[r.jsx("div",{onScroll:P,className:$("w-full",{"min-h-0 flex-grow overflow-auto":c==="fill","overflow-x-auto":c==="fit"}),children:l?r.jsx("div",{className:$({"border-b":c==="fit"}),children:r.jsx(Lt,{})}):r.jsxs(k,{className:"w-full",children:[r.jsx(k.Header,{className:"border-t-0",children:e.getHeaderGroups().map(m=>r.jsx(k.Row,{className:$({"border-b-0 [&_th:last-of-type]:w-[1%] [&_th:last-of-type]:whitespace-nowrap":o,"[&_th:first-of-type]:w-[1%] [&_th:first-of-type]:whitespace-nowrap":p}),children:m.headers.map((S,y)=>{const T=S.id==="actions",N=S.id==="select",b=T||N,A=m.headers.findIndex(z=>z.id!=="select"),L=A!==-1?S.id===m.headers[A].id:y===0,M=N||L;return r.jsx(k.HeaderCell,{"data-table-header-id":S.id,style:{width:b?void 0:`${D}%`},className:$({"bg-ui-bg-base sticky left-0 after:absolute after:inset-y-0 after:right-0 after:h-full after:w-px after:bg-transparent after:content-['']":M,"left-[68px]":M&&p&&!N,"after:bg-ui-border-base":h&&M&&!b}),children:Fe(S.column.columnDef.header,S.getContext())},S.id)})},m.id))}),r.jsx(k.Body,{className:"border-b-0",children:e.getRowModel().rows.map(m=>{const S=s?s(m):void 0,y=p&&!m.getCanSelect(),T=m.depth%2!==0;return r.jsx(k.Row,{"data-selected":m.getIsSelected(),className:$("transition-fg group/row [&_td:last-of-type]:w-[1%] [&_td:last-of-type]:whitespace-nowrap",{"bg-ui-bg-subtle hover:bg-ui-bg-subtle-hover":T,"cursor-pointer":!!S,"bg-ui-bg-highlight hover:bg-ui-bg-highlight-hover":m.getIsSelected(),"!bg-ui-bg-disabled !hover:bg-ui-bg-disabled":y}),onClick:S?()=>u(S):void 0,children:m.getVisibleCells().map((N,b)=>{const A=m.getVisibleCells(),L=N.column.id==="select",M=A.findIndex(Dt=>Dt.column.id!=="select"),z=M!==-1?N.column.id===A[M].column.id:b===0,oe=L||z,Re=m.depth>0&&z?m.depth*14+24:void 0;return r.jsx(k.Cell,{className:$({"bg-ui-bg-base group-data-[selected=true]/row:bg-ui-bg-highlight group-data-[selected=true]/row:group-hover/row:bg-ui-bg-highlight-hover group-hover/row:bg-ui-bg-base-hover transition-fg sticky left-0 after:absolute after:inset-y-0 after:right-0 after:h-full after:w-px after:bg-transparent after:content-['']":oe,"bg-ui-bg-subtle group-hover/row:bg-ui-bg-subtle-hover":T&&oe,"left-[68px]":oe&&p&&!L,"after:bg-ui-border-base":h&&oe&&!L,"!bg-ui-bg-disabled !hover:bg-ui-bg-disabled":y}),style:{paddingLeft:Re?`${Re}px`:void 0},children:Fe(N.column.columnDef.cell,N.getContext())},N.id)})},m.id)})})]})}),a&&r.jsx("div",{className:$({"border-t":c==="fill"}),children:r.jsx(Jl,{canNextPage:e.getCanNextPage(),canPreviousPage:e.getCanPreviousPage(),nextPage:e.nextPage,previousPage:e.previousPage,count:n,pageIndex:x,pageCount:e.getPageCount(),pageSize:w})}),d&&r.jsx(G,{open:!!Object.keys(v).length,children:r.jsxs(G.Bar,{children:[r.jsx(G.Value,{children:f("general.countSelected",{count:Object.keys(v).length})}),r.jsx(G.Seperator,{}),i==null?void 0:i.map((m,S)=>r.jsxs(j.Fragment,{children:[r.jsx(G.Command,{label:m.label,shortcut:m.shortcut,action:()=>_(m.action)}),S<i.length-1&&r.jsx(G.Seperator,{})]},S))]})})]})},Jl=e=>{const{t}=R(),a={of:t("general.of"),results:t("general.results"),pages:t("general.pages"),prev:t("general.prev"),next:t("general.next")};return r.jsx(k.Pagination,{className:"flex-shrink-0",...e,translations:a})},Wl=j.memo(Kl),uc=({table:e,columns:t,pagination:a,navigateTo:s,commands:i,count:n=0,search:l=!1,orderBy:c,filters:f,prefix:u,queryObject:h={},pageSize:g,isLoading:p=!1,layout:o="fit"})=>{if(p)return r.jsx(Et,{layout:o,rowCount:g,search:l,filters:!!(f!=null&&f.length),orderBy:!!(c!=null&&c.length),pagination:!!a});const d=Object.values(h).filter(w=>!!w).length===0,v=!p&&n===0&&!d;return!p&&n===0&&d?r.jsx(Ft,{className:$({"flex h-full flex-col overflow-hidden":o==="fill"})}):r.jsxs("div",{className:$("divide-y",{"flex h-full flex-col overflow-hidden":o==="fill"}),children:[r.jsx(Wl,{search:l,orderBy:c,filters:f,prefix:u}),r.jsx(ql,{table:e,count:n,columns:t,pagination:!0,navigateTo:s,commands:i,noResults:v,layout:o})]})};function fc(e,t){const[a]=U(),s={};return e.forEach(i=>{const n=t?`${t}_${i}`:i,l=a.get(n)||void 0;s[i]=l}),s}const gc=({data:e=[],columns:t,count:a=0,pageSize:s=20,enablePagination:i=!0,enableRowSelection:n=!1,enableExpandableRows:l=!1,rowSelection:c,getSubRows:f,getRowId:u,meta:h,prefix:g})=>{const[p,o]=U(),d=`${g?`${g}_`:""}offset`,v=p.get(d),[{pageIndex:x,pageSize:w},O]=j.useState({pageIndex:v?Math.ceil(Number(v)/s):0,pageSize:s}),D=j.useMemo(()=>({pageIndex:x,pageSize:w}),[x,w]),[P,_]=j.useState({}),m=(c==null?void 0:c.state)??P,S=(c==null?void 0:c.updater)??_;j.useEffect(()=>{if(!i)return;const N=v?Math.ceil(Number(v)/s):0;N!==x&&O(b=>({...b,pageIndex:N}))},[v,i,s,x]);const y=N=>{const b=N(D),{pageIndex:A,pageSize:L}=b;return o(M=>{if(!A)return M.delete(d),M;const z=new URLSearchParams(M);return z.set(d,String(A*L)),z}),O(b),b};return{table:Bt({data:e,columns:t,state:{rowSelection:m,pagination:i?D:void 0},pageCount:Math.ceil((a??0)/w),enableRowSelection:n,getRowId:u,getSubRows:f,onRowSelectionChange:n?S:void 0,onPaginationChange:i?y:void 0,getCoreRowModel:Kt(),getPaginationRowModel:i?qt():void 0,getExpandedRowModel:l?Jt():void 0,manualPagination:i?!0:void 0,meta:h})}};export{uc as D,F as _,gc as a,me as b,yt as c,je as i,fc as u};
