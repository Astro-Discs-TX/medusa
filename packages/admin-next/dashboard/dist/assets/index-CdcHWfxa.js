import{u as m,b4 as v,j as i,b5 as x,b6 as g,a1 as b}from"./index-S--WvUSo.js";import{u as j,a as k,D as w}from"./use-data-table-TeZp00wg.js";import{r as N}from"./react-PzSkSLoa.js";import{P as l}from"./placeholder-cell-O6UVTGmQ.js";import{A as _}from"./action-menu-olZwXQ3q.js";import{P as q}from"./pencil-square-u3fizEAQ.js";import{T as S}from"./trash-nTjeUaCp.js";import{u as P}from"./use-prompt-wB0F2CxI.js";import{c as T}from"./index-JDlOzmVl.js";import{H as I}from"./heading-cSlef4Su.js";import"./react-dom-Og6--24v.js";import"./react-router-dom-aSYyayiN.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./button-Pc5Xo8ua.js";import"./index-1Zwdg31z.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./x-mark-mini-aYDSd38M.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./command-bar-wUgfUfvQ.js";import"./prompt-LzbVPZYR.js";import"./index-sF0hA49A.js";const z=({item:t})=>{const{t:s}=m(),e=P(),{mutateAsync:r}=v(t.id),a=async()=>{await e({title:s("general.areYouSure"),description:s("inventory.deleteWarning"),confirmText:s("actions.delete"),cancelText:s("actions.cancel")})&&await r()};return i.jsx(_,{groups:[{actions:[{icon:i.jsx(q,{}),label:s("actions.edit"),to:`${t.id}/edit`}]},{actions:[{icon:i.jsx(S,{}),label:s("actions.delete"),onClick:a}]}]})},n=T(),C=()=>{const{t}=m();return N.useMemo(()=>[n.accessor("title",{header:t("fields.title"),cell:({getValue:s})=>{const e=s();return e?i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})}):i.jsx(l,{})}}),n.accessor("sku",{header:t("fields.sku"),cell:({getValue:s})=>{const e=s();return e?i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})}):i.jsx(l,{})}}),n.accessor("variants",{header:t("fields.variant"),cell:({getValue:s})=>{const e=s();if(!e||e.length===0)return i.jsx(l,{});const r=e[0];return i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:r.title})})}}),n.accessor("reserved_quantity",{header:t("inventory.reserved"),cell:({getValue:s})=>{const e=s();return e?i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})}):i.jsx(l,{})}}),n.accessor("stocked_quantity",{header:t("fields.inStock"),cell:({getValue:s})=>{const e=s();return e?i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})}):i.jsx(l,{})}}),n.display({id:"actions",cell:({row:s})=>i.jsx(z,{item:s.original})})],[t])},O=()=>{const{t}=m(),{stock_locations:s}=x({limit:1e3}),e=[];if(s){const r={type:"select",options:s.map(a=>({label:a.name,value:a.id})),key:"location_id",searchable:!0,label:t("fields.location")};e.push(r)}return e.push({type:"string",key:"material",label:t("fields.material")}),e.push({type:"string",key:"sku",label:t("fields.sku")}),e.push({type:"string",key:"mid_code",label:t("fields.midCode")}),e.push({type:"number",key:"height",label:t("fields.height")}),e.push({type:"number",key:"width",label:t("fields.width")}),e.push({type:"number",key:"length",label:t("fields.length")}),e.push({type:"number",key:"weight",label:t("fields.weight")}),e.push({type:"select",options:[{label:t("fields.true"),value:"true"},{label:t("fields.false"),value:"false"}],key:"requires_shipping",multiple:!1,label:t("fields.requiresShipping")}),e},A=({pageSize:t=20,prefix:s})=>{const e=j(["location_id","q","order","requires_shipping","offset","sku","material","mid_code","order","weight","width","length","height"],s),{offset:r,weight:a,width:o,length:c,height:d,requires_shipping:u,...p}=e;return{searchParams:{limit:t,offset:r?parseInt(r):void 0,weight:a?JSON.parse(a):void 0,width:o?JSON.parse(o):void 0,length:c?JSON.parse(c):void 0,height:d?JSON.parse(d):void 0,requires_shipping:u?JSON.parse(u):void 0,...p},raw:e}},f=20,D=()=>{const{t}=m(),{searchParams:s,raw:e}=A({pageSize:f}),{inventory_items:r,count:a,isLoading:o,isError:c,error:d}=g({...s},{keepPreviousData:!0}),u=O(),p=C(),{table:y}=k({data:r||[],columns:p,count:a,enablePagination:!0,getRowId:h=>h.id,pageSize:f});if(c)throw d;return i.jsxs(b,{className:"divide-y p-0",children:[i.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:i.jsx(I,{children:t("inventory.domain")})}),i.jsx(w,{table:y,columns:p,pageSize:f,count:a,isLoading:o,pagination:!0,search:!0,filters:u,queryObject:e,orderBy:["title","sku","stocked_quantity","reserved_quantity"],navigateTo:h=>`${h.id}`})]})},ue=()=>i.jsx("div",{className:"flex flex-col gap-y-2",children:i.jsx(D,{})});export{ue as Component};
