import{u as d,j as s,b5 as v,b2 as j,a1 as y}from"./index-S--WvUSo.js";import{L as _}from"./react-router-dom-aSYyayiN.js";import{u as b,a as g,D as N}from"./use-data-table-TeZp00wg.js";import{r as P}from"./react-PzSkSLoa.js";import{I as T}from"./inline-link-mCSkZwyp.js";import{D as w}from"./date-cell-G_vX9su2.js";import{P as f}from"./placeholder-cell-O6UVTGmQ.js";import{A as k}from"./action-menu-olZwXQ3q.js";import{c as S}from"./reservations-e8r1gx2W.js";import{P as z}from"./pencil-square-u3fizEAQ.js";import{T as C}from"./trash-nTjeUaCp.js";import{t as L}from"./toast-4oQfF9Sm.js";import{u as R}from"./use-prompt-wB0F2CxI.js";import{c as q}from"./index-JDlOzmVl.js";import{H as D}from"./heading-cSlef4Su.js";import{B as I}from"./button-Pc5Xo8ua.js";import"./react-dom-Og6--24v.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./index-1Zwdg31z.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./x-mark-mini-aYDSd38M.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./command-bar-wUgfUfvQ.js";import"./tooltip-Ixyw9oT8.js";import"./information-circle-solid-rXH6vJ5W.js";import"./x-circle-solid-rnqhxvfk.js";import"./check-circle-solid-7j4QonPK.js";import"./prompt-LzbVPZYR.js";import"./index-sF0hA49A.js";const A="line_item,inventory_item",E=({reservation:r})=>{const{t:e}=d(),t=R(),{mutateAsync:a}=S(r.id),i=async()=>{await t({title:e("general.areYouSure"),description:e("reservations.deleteWarning"),confirmText:e("actions.delete"),cancelText:e("actions.cancel")})&&await a(void 0,{onSuccess:()=>{L.success(e("general.success"),{dismissLabel:e("actions.close"),description:e("inventory.reservation.deleteSuccessToast")})}})};return s.jsx(k,{groups:[{actions:[{label:e("actions.edit"),to:`${r.id}/edit`,icon:s.jsx(z,{})}]},{actions:[{label:e("actions.delete"),onClick:i,icon:s.jsx(C,{})}]}]})},o=q(),H=()=>{const{t:r}=d();return P.useMemo(()=>[o.accessor("inventory_item",{header:r("fields.sku"),cell:({getValue:e})=>{const t=e();return!t||!t.sku?s.jsx(f,{}):s.jsx("div",{className:"flex size-full items-center overflow-hidden",children:s.jsx("span",{className:"truncate",children:t.sku})})}}),o.accessor("line_item",{header:r("fields.order"),cell:({getValue:e})=>{var a;const t=e();return!t||!((a=t.order)!=null&&a.display_id)?s.jsx(f,{}):s.jsx("div",{className:"flex size-full items-center overflow-hidden",children:s.jsx(T,{to:`/orders/${t.order.id}`,children:s.jsxs("span",{className:"truncate",children:["#",t.order.display_id]})})})}}),o.accessor("description",{header:r("fields.description"),cell:({getValue:e})=>{const t=e();return t?s.jsx("div",{className:"flex size-full items-center overflow-hidden",children:s.jsx("span",{className:"truncate",children:t})}):s.jsx(f,{})}}),o.accessor("created_at",{header:r("fields.created"),cell:({getValue:e})=>{const t=e();return s.jsx(w,{date:t})}}),o.accessor("quantity",{header:()=>s.jsx("div",{className:"flex size-full items-center justify-end overflow-hidden text-right",children:s.jsx("span",{className:"truncate",children:r("fields.quantity")})}),cell:({getValue:e})=>{const t=e();return s.jsx("div",{className:"flex size-full items-center justify-end overflow-hidden text-right",children:s.jsx("span",{className:"truncate",children:t})})}}),o.display({id:"actions",cell:({row:e})=>{const t=e.original;return s.jsx(E,{reservation:t})}})],[r])},O=()=>{const{t:r}=d(),{stock_locations:e}=v({limit:1e3}),t=[];if(e){const a={type:"select",options:e.map(i=>({label:i.name,value:i.id})),key:"location_id",searchable:!0,label:r("fields.location")};t.push(a)}return t.push({type:"date",key:"created_at",label:r("fields.createdAt")}),t},B=({pageSize:r=20,prefix:e})=>{const t=b(["location_id","offset","created_at","quantity","updated_at","order"],e),{location_id:a,created_at:i,updated_at:n,quantity:c,offset:l,...m}=t;return{searchParams:{limit:r,offset:l?parseInt(l):void 0,location_id:a,created_at:i?JSON.parse(i):void 0,updated_at:n?JSON.parse(n):void 0,quantity:c?JSON.parse(c):void 0,...m},raw:t}},x=20,J=()=>{const{t:r}=d(),{searchParams:e,raw:t}=B({pageSize:x}),{reservations:a,count:i,isLoading:n,isError:c,error:l}=j({expand:A,...e},{keepPreviousData:!0}),m=O(),p=H(),{table:h}=g({data:a||[],columns:p,count:i,enablePagination:!0,getRowId:u=>u.id,pageSize:x});if(c)throw l;return s.jsxs(y,{className:"divide-y p-0",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[s.jsx(D,{children:r("reservations.domain")}),s.jsx(I,{variant:"secondary",size:"small",asChild:!0,children:s.jsx(_,{to:"create",children:r("actions.create")})})]}),s.jsx(N,{table:h,columns:p,pageSize:x,count:i,isLoading:n,filters:m,pagination:!0,navigateTo:u=>`${u.id}`,orderBy:["created_at","updated_at"],queryObject:t,search:!1})]})},Te=()=>s.jsx("div",{className:"flex flex-col gap-y-2",children:s.jsx(J,{})});export{Te as Component};
