import{u as i,j as s,a1 as b,ap as P}from"./index-S--WvUSo.js";import{r as g}from"./react-PzSkSLoa.js";import{L as _,O as N}from"./react-router-dom-aSYyayiN.js";import{A as T}from"./action-menu-olZwXQ3q.js";import{u as w,a as C,D as R}from"./use-data-table-TeZp00wg.js";import{c as L,d as S}from"./regions-en8xSoIX.js";import{P as h}from"./placeholder-cell-O6UVTGmQ.js";import{L as j}from"./list-summary-5vNt7oxx.js";import{c as z}from"./countries-QR_y0WJ_.js";import{f as H}from"./format-provider-yygkXOZ0.js";import{c as v}from"./index-JDlOzmVl.js";import{P as k}from"./pencil-square-u3fizEAQ.js";import{T as A}from"./trash-nTjeUaCp.js";import{t as x}from"./toast-4oQfF9Sm.js";import{u as D}from"./use-prompt-wB0F2CxI.js";import{H as O}from"./heading-cSlef4Su.js";import{B as q}from"./button-Pc5Xo8ua.js";import"./react-dom-Og6--24v.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./index-1Zwdg31z.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./x-mark-mini-aYDSd38M.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./command-bar-wUgfUfvQ.js";import"./tooltip-Ixyw9oT8.js";import"./information-circle-solid-rXH6vJ5W.js";import"./x-circle-solid-rnqhxvfk.js";import"./check-circle-solid-7j4QonPK.js";import"./prompt-LzbVPZYR.js";import"./index-sF0hA49A.js";const E=({countries:e})=>(i(),!e||e.length===0?s.jsx(h,{}):s.jsx("div",{className:"flex size-full items-center overflow-hidden",children:s.jsx(j,{list:e.map(t=>z.find(r=>r.iso_2===t.iso_2).display_name)})})),B=()=>{const{t:e}=i();return s.jsx("div",{className:"flex size-full items-center",children:s.jsx("span",{children:e("fields.countries")})})},F=({paymentProviders:e})=>{if(!e||e.length===0)return s.jsx(h,{});const t=e.map(r=>H(r.id));return s.jsx("div",{className:"flex size-full items-center overflow-hidden",children:s.jsx(j,{list:t})})},I=()=>{const{t:e}=i();return s.jsx("div",{className:"flex size-full items-center overflow-hidden",children:s.jsx("span",{className:"truncate",children:e("fields.paymentProviders")})})},M=({name:e})=>s.jsx("div",{className:"flex h-full w-full items-center overflow-hidden",children:s.jsx("span",{className:"truncate",children:e})}),J=()=>{const{t:e}=i();return s.jsx("div",{className:"flex h-full w-full items-center",children:s.jsx("span",{className:"truncate",children:e("fields.name")})})},d=v(),Q=()=>g.useMemo(()=>[d.accessor("name",{header:()=>s.jsx(J,{}),cell:({getValue:e})=>s.jsx(M,{name:e()})}),d.accessor("countries",{header:()=>s.jsx(B,{}),cell:({getValue:e})=>s.jsx(E,{countries:e()})}),d.accessor("payment_providers",{header:()=>s.jsx(I,{}),cell:({getValue:e})=>s.jsx(F,{paymentProviders:e()})})],[]),G=()=>{const{t:e}=i();return[...[{label:e("fields.createdAt"),key:"created_at"},{label:e("fields.updatedAt"),key:"updated_at"}].map(a=>({key:a.key,label:a.label,type:"date"}))]},V=({prefix:e,pageSize:t=20})=>{const r=w(["offset","q","order","created_at","updated_at"],e),{offset:a,q:o,order:l,created_at:n,updated_at:c}=r;return{searchParams:{limit:t,offset:a?Number(a):0,order:l,created_at:n?JSON.parse(n):void 0,updated_at:c?JSON.parse(c):void 0,q:o},raw:r}},p=20,W=()=>{const{t:e}=i(),{searchParams:t,raw:r}=V({pageSize:p}),{regions:a,count:o,isPending:l,isError:n,error:c}=L({...t,fields:"*payment_providers"},{placeholderData:P}),u=G(),f=$(),{table:y}=C({data:a??[],columns:f,count:o,enablePagination:!0,getRowId:m=>m.id,pageSize:p});if(n)throw c;return s.jsxs(b,{className:"divide-y p-0",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[s.jsx(O,{level:"h2",children:e("regions.domain")}),s.jsx(_,{to:"/settings/regions/create",children:s.jsx(q,{size:"small",variant:"secondary",children:e("actions.create")})})]}),s.jsx(R,{table:y,columns:f,count:o,pageSize:p,isLoading:l,filters:u,orderBy:["name","created_at","updated_at"],navigateTo:m=>`${m.original.id}`,pagination:!0,search:!0,queryObject:r})]})},Y=({region:e})=>{const{t}=i(),r=D(),{mutateAsync:a}=S(e.id),o=async()=>{if(await r({title:t("general.areYouSure"),description:t("regions.deleteRegionWarning",{name:e.name}),verificationText:e.name,verificationInstruction:t("general.typeToConfirm"),confirmText:t("actions.delete"),cancelText:t("actions.cancel")}))try{await a(void 0),x.success(t("general.success"),{description:t("regions.toast.delete"),dismissLabel:t("actions.close")})}catch(n){x.error(t("general.error"),{description:n.message,dismissLabel:t("actions.close")})}};return s.jsx(T,{groups:[{actions:[{label:t("actions.edit"),to:`/settings/regions/${e.id}/edit`,icon:s.jsx(k,{})}]},{actions:[{label:t("actions.delete"),onClick:o,icon:s.jsx(A,{})}]}]})},Z=v(),$=()=>{const e=Q();return g.useMemo(()=>[...e,Z.display({id:"actions",cell:({row:t})=>s.jsx(Y,{region:t.original})})],[e])},De=()=>s.jsxs("div",{className:"flex flex-col gap-y-2",children:[s.jsx(W,{}),s.jsx(N,{})]});export{De as Component};
