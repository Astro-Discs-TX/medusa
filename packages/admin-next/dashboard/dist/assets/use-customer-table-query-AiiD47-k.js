import{j as s,u as o}from"./index-S--WvUSo.js";import{r as p}from"./react-PzSkSLoa.js";import{P as m}from"./placeholder-cell-O6UVTGmQ.js";import{S as h}from"./status-cell-9XExsAIG.js";import{D as x}from"./date-cell-G_vX9su2.js";import{c as j}from"./index-JDlOzmVl.js";import{u as N}from"./customer-groups-G4KCvF3b.js";import{u as b}from"./use-data-table-TeZp00wg.js";const _=({email:e})=>e?s.jsx("div",{className:"flex h-full w-full items-center overflow-hidden",children:s.jsx("span",{className:"truncate",children:e})}):s.jsx(m,{}),v=()=>{const{t:e}=o();return s.jsx("div",{className:"flex h-full w-full items-center",children:s.jsx("span",{className:"truncate",children:e("fields.email")})})},y=({firstName:e,lastName:t})=>{if(!e&&!t)return s.jsx(m,{});const r=[e,t].filter(Boolean).join(" ");return s.jsx("div",{className:"flex h-full w-full items-center overflow-hidden",children:s.jsx("span",{className:"truncate",children:r})})},C=()=>{const{t:e}=o();return s.jsx("div",{className:"flex h-full w-full items-center",children:s.jsx("span",{className:"truncate",children:e("fields.name")})})},g=({hasAccount:e})=>{const{t}=o(),r=e?"green":"orange",l=t(e?"customers.fields.registered":"customers.fields.guest");return s.jsx(h,{color:r,children:l})},w=()=>{const{t:e}=o();return s.jsx("div",{className:"flex h-full w-full items-center",children:s.jsx("span",{className:"truncate",children:e("fields.account")})})},k=({createdAt:e})=>e?s.jsx(x,{date:e}):s.jsx(m,{}),A=()=>{const{t:e}=o();return s.jsx("div",{className:"flex h-full w-full items-center",children:s.jsx("span",{className:"truncate",children:e("fields.createdAt")})})},d=j(),D=()=>p.useMemo(()=>[d.accessor("email",{header:()=>s.jsx(v,{}),cell:({getValue:e})=>s.jsx(_,{email:e()})}),d.display({id:"name",header:()=>s.jsx(C,{}),cell:({row:{original:{first_name:e,last_name:t}}})=>s.jsx(y,{firstName:e,lastName:t})}),d.accessor("has_account",{header:()=>s.jsx(w,{}),cell:({getValue:e})=>s.jsx(g,{hasAccount:e()})}),d.accessor("created_at",{header:()=>s.jsx(A,{}),cell:({getValue:e})=>s.jsx(k,{createdAt:e()})})],[]),J=e=>{const{t}=o(),r=e==null?void 0:e.includes("groups"),{customer_groups:l}=N({limit:1e3,expand:""},{enabled:!r});let a=[];if(l&&!r){const c={key:"groups",label:t("customers.groups"),type:"select",multiple:!0,options:l.map(i=>({label:i.name,value:i.id}))};a=[...a,c]}const n={key:"has_account",label:t("fields.account"),type:"select",options:[{label:t("customers.registered"),value:"true"},{label:t("customers.guest"),value:"false"}]},u=[{label:t("fields.createdAt"),key:"created_at"},{label:t("fields.updatedAt"),key:"updated_at"}].map(c=>({key:c.key,label:c.label,type:"date"}));return a=[...a,n,...u],a},Q=({prefix:e,pageSize:t=20})=>{const r=b(["offset","q","has_account","groups","order","created_at","updated_at"],e),{offset:l,groups:a,created_at:n,updated_at:u,has_account:c,q:i,order:f}=r;return{searchParams:{limit:t,offset:l?Number(l):0,groups:a==null?void 0:a.split(","),has_account:c?c==="true":void 0,order:f,created_at:n?JSON.parse(n):void 0,updated_at:u?JSON.parse(u):void 0,q:i},raw:r}};export{J as a,D as b,Q as u};
