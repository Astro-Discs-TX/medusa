import{d as f,I as H,K as P,u as S,j as s}from"./index-S--WvUSo.js";import{r as t}from"./react-PzSkSLoa.js";import{e as D,a as x}from"./react-router-dom-aSYyayiN.js";import{X as T,D as u}from"./drawer-H3TI1lDZ.js";import{F as I}from"./form-0PHaH8g8.js";import{P as l}from"./prompt-LzbVPZYR.js";import{$ as K,b as X,c as z,a as h,f as A,g as q}from"./index-sF0hA49A.js";const g=e=>t.createElement(A,{...e});g.displayName="FocusModal";const C=t.forwardRef((e,a)=>t.createElement(K,{ref:a,...e}));C.displayName="FocusModal.Trigger";const y=h;y.displayName="FocusModal.Close";const F=({className:e,...a})=>t.createElement(q,{className:f(e),...a});F.displayName="FocusModal.Portal";const $=t.forwardRef(({className:e,...a},n)=>t.createElement(X,{ref:n,className:f("bg-ui-bg-overlay fixed inset-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));$.displayName="FocusModal.Overlay";const M=t.forwardRef(({className:e,...a},n)=>t.createElement(F,null,t.createElement($,null),t.createElement(z,{ref:n,className:f("bg-ui-bg-base shadow-elevation-modal fixed inset-2 flex flex-col overflow-hidden rounded-lg border focus-visible:outline-none","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=open]:slide-in-from-bottom-0 data-[state=closed]:slide-in-from-bottom-2  duration-200",e),...a})));M.displayName="FocusModal.Content";const j=t.forwardRef(({children:e,className:a,...n},r)=>t.createElement("div",{ref:r,className:f("border-ui-border-base flex items-center justify-between gap-x-4 border-b px-4 py-2",a),...n},t.createElement("div",{className:"flex items-center gap-x-2"},t.createElement(h,{asChild:!0},t.createElement(H,{size:"small",type:"button",variant:"transparent"},t.createElement(T,null))),t.createElement(P,null,"esc")),e));j.displayName="FocusModal.Header";const v=t.forwardRef(({className:e,...a},n)=>t.createElement("div",{ref:n,className:f("flex-1",e),...a}));v.displayName="FocusModal.Body";const m=Object.assign(g,{Trigger:C,Content:M,Header:j,Body:v,Close:y}),E=({form:e,blockSearch:a=!1,children:n})=>{const{t:r}=S(),{formState:{isDirty:c}}=e,o=D(({currentLocation:d,nextLocation:p})=>{const{isSubmitSuccessful:O}=p.state||{};if(O)return!1;const b=d.pathname!==p.pathname,B=d.search!==p.search;return a?c&&(b||B):c&&b}),i=()=>{var d;(d=o==null?void 0:o.reset)==null||d.call(o)},w=()=>{var d;(d=o==null?void 0:o.proceed)==null||d.call(o)};return s.jsxs(I,{...e,children:[n,s.jsx(l,{open:o.state==="blocked",variant:"confirmation",children:s.jsxs(l.Content,{children:[s.jsxs(l.Header,{children:[s.jsx(l.Title,{children:r("general.unsavedChangesTitle")}),s.jsx(l.Description,{children:r("general.unsavedChangesDescription")})]}),s.jsxs(l.Footer,{children:[s.jsx(l.Cancel,{onClick:i,type:"button",children:r("actions.cancel")}),s.jsx(l.Action,{onClick:w,type:"button",children:r("actions.continue")})]})]})})]})},R=t.createContext(null),ce=()=>{const e=t.useContext(R);if(!e)throw new Error("useRouteModal must be used within a RouteModalProvider");return e},N=({prev:e,children:a})=>{const n=x(),r=c=>{n(c||e,{replace:!0,state:{isSubmitSuccessful:!0}})};return s.jsx(R.Provider,{value:{handleSuccess:r},children:a})},G=({prev:e="..",children:a})=>{const n=x(),[r,c]=t.useState(!1);t.useEffect(()=>{c(!0)},[]);const o=i=>{if(!i){document.body.style.pointerEvents="auto",n(e,{replace:!0});return}c(i)};return s.jsx(u,{open:r,onOpenChange:o,children:s.jsx(N,{prev:e,children:s.jsx(u.Content,{children:a})})})},J=u.Header,Q=u.Body,U=u.Footer,V=u.Close,W=E,de=Object.assign(G,{Header:J,Body:Q,Footer:U,Close:V,Form:W}),Y=({prev:e="..",children:a})=>{const n=x(),[r,c]=t.useState(!1);t.useEffect(()=>{c(!0)},[]);const o=i=>{if(!i){document.body.style.pointerEvents="auto",n(e,{replace:!0});return}c(i)};return s.jsx(m,{open:r,onOpenChange:o,children:s.jsx(N,{prev:e,children:s.jsx(m.Content,{children:a})})})},Z=m.Header,_=m.Body,k=m.Close,L=E,le=Object.assign(Y,{Header:Z,Body:_,Close:k,Form:L});export{de as R,le as a,ce as u};
