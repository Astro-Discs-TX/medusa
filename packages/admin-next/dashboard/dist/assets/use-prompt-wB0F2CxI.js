import{r as e}from"./react-PzSkSLoa.js";import{ab as h}from"./index-S--WvUSo.js";import{P as n}from"./prompt-LzbVPZYR.js";import{I as k}from"./input-A29ux7yj.js";import{L as I}from"./label-HFq5fzpT.js";const b=({open:l,variant:c="danger",title:m,description:o,verificationText:t,verificationInstruction:s="Please type {val} to confirm:",cancelText:p="Cancel",confirmText:a="Confirm",onConfirm:f,onCancel:d})=>{const[i,y]=e.useState(""),P=r=>{y(r.target.value)},E=e.useMemo(()=>t?i===t:!0,[i,t]),C=r=>{r.preventDefault(),t&&E&&f()};e.useEffect(()=>{const r=g=>{g.key==="Escape"&&l&&d()};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[d,l]);let u=s.includes("{val}")?s.split("{val}"):["Please type","to confirm:"];return u.length!==2&&(u=["Please type","to confirm:"]),e.createElement(n,{open:l,variant:c},e.createElement(n.Content,null,e.createElement("form",{onSubmit:C},e.createElement(n.Header,null,e.createElement(n.Title,null,m),e.createElement(n.Description,null,o)),t&&e.createElement("div",{className:"border-ui-border-base mt-6 flex flex-col gap-y-4 border-y p-6"},e.createElement(I,{htmlFor:"verificationText",className:"text-ui-fg-subtle"},u[0]," ",e.createElement("span",{className:"text-ui-fg-base txt-compact-medium-plus"},t)," ",u[1]),e.createElement(k,{autoFocus:!0,autoComplete:"off",id:"verificationText",placeholder:t,onChange:P})),e.createElement(n.Footer,null,e.createElement(n.Cancel,{onClick:d},p),e.createElement(n.Action,{disabled:!E,type:t?"submit":"button",onClick:t?void 0:f},a)))))};b.displayName="RenderPrompt";const w=()=>async c=>new Promise(m=>{let o=!0;const t=()=>{o=!1,a(),m(!1)},s=()=>{o=!1,m(!0),a()},p=h(document.createElement("div")),a=()=>{p.render(e.createElement(b,{open:o,onConfirm:s,onCancel:t,...c}))};a()});export{w as u};
