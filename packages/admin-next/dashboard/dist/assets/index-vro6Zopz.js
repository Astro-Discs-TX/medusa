import{u as S,j as e,a6 as j,T as d,ao as g,a7 as b}from"./index-S--WvUSo.js";import{u as v,R as o}from"./route-focus-modal-MMx5Xnk0.js";import{u as N,a as y}from"./price-lists---tSXD3D.js";import{t as C}from"./zod-jt04JUtm.js";import{u as $,F as a}from"./form-0PHaH8g8.js";import{z as u}from"./index-JzuMwgWW.js";import{D as F}from"./divider-GiVPCNCn.js";import{S as D}from"./switch-VR1xZXYU.js";import{D as w}from"./date-picker-s8-9mila.js";import{B as _}from"./button-Pc5Xo8ua.js";import{c as z}from"./react-router-dom-aSYyayiN.js";import{H as P}from"./heading-cSlef4Su.js";import"./react-PzSkSLoa.js";import"./react-dom-Og6--24v.js";import"./drawer-H3TI1lDZ.js";import"./index-sF0hA49A.js";import"./prompt-LzbVPZYR.js";import"./information-circle-solid-rXH6vJ5W.js";import"./label-HFq5fzpT.js";import"./tooltip-Ixyw9oT8.js";import"./index-Hm2Uj9Gg.js";import"./index-1Zwdg31z.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";const H=u.object({ends_at:u.date().nullable(),starts_at:u.date().nullable()}),L=({priceList:n})=>{const{t}=S(),{handleSuccess:c}=v(),l=$({defaultValues:{ends_at:n.ends_at?new Date(n.ends_at):null,starts_at:n.starts_at?new Date(n.starts_at):null},resolver:C(H)}),{mutateAsync:m}=N(n.id),x=l.handleSubmit(async s=>{var r,i;await m({starts_at:((r=s.starts_at)==null?void 0:r.toISOString())||null,ends_at:((i=s.ends_at)==null?void 0:i.toISOString())||null},{onSuccess:()=>{c()}})});return e.jsx(o.Form,{form:l,children:e.jsxs("form",{className:"flex flex-1 flex-col overflow-hidden",onSubmit:x,children:[e.jsxs(o.Body,{className:"flex flex-1 flex-col gap-y-8 overflow-auto",children:[e.jsx(a.Field,{control:l.control,name:"starts_at",render:({field:{value:s,onChange:r,...i}})=>{const f=p=>{if(!p){r(null);return}r(new Date)};return e.jsx(a.Item,{children:e.jsxs(j,{open:!!s,onOpenChange:f,children:[e.jsxs("div",{className:"grid grid-cols-[1fr_32px] gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{size:"small",leading:"compact",weight:"plus",children:t("pricing.fields.startDateLabel")}),e.jsx(d,{size:"small",className:"text-ui-fg-subtle",children:t("pricing.fields.startDateHint")})]}),e.jsx(g,{asChild:!0,children:e.jsx(D,{name:i.name,checked:!!s})})]}),e.jsx(b,{children:e.jsxs("div",{className:"flex flex-col gap-y-2 pt-4",children:[e.jsx(a.Label,{className:"!txt-small text-ui-fg-subtle",children:t("fields.startDate")}),e.jsx(a.Control,{children:e.jsx(w,{value:s||void 0,onChange:r,...i})})]})}),e.jsx(a.ErrorMessage,{})]})})}}),e.jsx(F,{}),e.jsx(a.Field,{control:l.control,name:"ends_at",render:({field:{value:s,onChange:r,...i}})=>{const f=p=>{if(!p){r(null);return}const h=new Date(new Date().setDate(new Date().getDate()+7));r(h)};return e.jsx(a.Item,{children:e.jsxs(j,{open:!!s,onOpenChange:f,children:[e.jsxs("div",{className:"grid grid-cols-[1fr_32px] gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{size:"small",leading:"compact",weight:"plus",children:t("pricing.fields.endDateLabel")}),e.jsx(d,{size:"small",className:"text-ui-fg-subtle",children:t("pricing.fields.endDateHint")})]}),e.jsx(g,{asChild:!0,children:e.jsx(D,{name:i.name,checked:!!s})})]}),e.jsx(b,{children:e.jsxs("div",{className:"flex flex-col gap-y-2 pt-4",children:[e.jsx(a.Label,{className:"!txt-small text-ui-fg-subtle",children:t("fields.endDate")}),e.jsx(a.Control,{children:e.jsx(w,{value:s||void 0,onChange:r,...i})})]})}),e.jsx(a.ErrorMessage,{})]})})}})]}),e.jsx(o.Footer,{className:"shrink-0",children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(o.Close,{asChild:!0,children:e.jsx(_,{size:"small",variant:"secondary",children:t("actions.cancel")})}),e.jsx(_,{size:"small",type:"submit",children:t("actions.save")})]})})]})})},ae=()=>{const{t:n}=S(),{id:t}=z(),{price_list:c,isLoading:l,isError:m,error:x}=y(t),s=!l&&c;if(m)throw x;return e.jsxs(o,{children:[e.jsx(o.Header,{children:e.jsx(P,{children:n("pricing.configuration.editHeader")})}),s&&e.jsx(L,{priceList:c})]})};export{ae as Component};
