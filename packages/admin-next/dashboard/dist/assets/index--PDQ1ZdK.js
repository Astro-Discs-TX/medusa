import{u as p,j as i,a1 as g}from"./index-S--WvUSo.js";import{u as x,a as v,D as b}from"./use-data-table-TeZp00wg.js";import{e as j,a as k}from"./inventory-EQcmxo3i.js";import{A as N}from"./action-menu-olZwXQ3q.js";import{P as w}from"./pencil-square-u3fizEAQ.js";import{T as _}from"./trash-nTjeUaCp.js";import{u as q}from"./use-prompt-wB0F2CxI.js";import{P as d}from"./placeholder-cell-O6UVTGmQ.js";import{r as I}from"./react-PzSkSLoa.js";import{c as S}from"./index-JDlOzmVl.js";import{u as T}from"./stock-locations-5f5MPAbM.js";import{H as P}from"./heading-cSlef4Su.js";import{O}from"./react-router-dom-aSYyayiN.js";import"./react-dom-Og6--24v.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./button-Pc5Xo8ua.js";import"./index-1Zwdg31z.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./x-mark-mini-aYDSd38M.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./command-bar-wUgfUfvQ.js";import"./prompt-LzbVPZYR.js";import"./index-sF0hA49A.js";const z=({item:t})=>{const{t:s}=p(),e=q(),{mutateAsync:a}=j(t.id),r=async()=>{await e({title:s("general.areYouSure"),description:s("inventory.deleteWarning"),confirmText:s("actions.delete"),cancelText:s("actions.cancel")})&&await a()};return i.jsx(N,{groups:[{actions:[{icon:i.jsx(w,{}),label:s("actions.edit"),to:`${t.id}/edit`}]},{actions:[{icon:i.jsx(_,{}),label:s("actions.delete"),onClick:r}]}]})},o=S(),C=()=>{const{t}=p();return I.useMemo(()=>[o.accessor("title",{header:t("fields.title"),cell:({getValue:s})=>{const e=s();return e?i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})}):i.jsx(d,{})}}),o.accessor("sku",{header:t("fields.sku"),cell:({getValue:s})=>{const e=s();return e?i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})}):i.jsx(d,{})}}),o.accessor("reserved_quantity",{header:t("inventory.reserved"),cell:({getValue:s})=>{const e=s();return Number.isNaN(e)?i.jsx(d,{}):i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})})}}),o.accessor("stocked_quantity",{header:t("fields.inStock"),cell:({getValue:s})=>{const e=s();return Number.isNaN(e)?i.jsx(d,{}):i.jsx("div",{className:"flex size-full items-center overflow-hidden",children:i.jsx("span",{className:"truncate",children:e})})}}),o.display({id:"actions",cell:({row:s})=>i.jsx(z,{item:s.original})})],[t])},A=()=>{const{t}=p(),{stock_locations:s}=T({limit:1e3}),e=[];if(s){const a={type:"select",options:s.map(r=>({label:r.name,value:r.id})),key:"location_id",searchable:!0,label:t("fields.location")};e.push(a)}return e.push({type:"string",key:"material",label:t("fields.material")}),e.push({type:"string",key:"sku",label:t("fields.sku")}),e.push({type:"string",key:"mid_code",label:t("fields.midCode")}),e.push({type:"number",key:"height",label:t("fields.height")}),e.push({type:"number",key:"width",label:t("fields.width")}),e.push({type:"number",key:"length",label:t("fields.length")}),e.push({type:"number",key:"weight",label:t("fields.weight")}),e.push({type:"select",options:[{label:t("fields.true"),value:"true"},{label:t("fields.false"),value:"false"}],key:"requires_shipping",multiple:!1,label:t("fields.requiresShipping")}),e},D=({pageSize:t=20,prefix:s})=>{const e=x(["location_id","q","order","requires_shipping","offset","sku","material","mid_code","order","weight","width","length","height"],s),{offset:a,weight:r,width:n,length:l,height:c,requires_shipping:m,...u}=e;return{searchParams:{limit:t,offset:a?parseInt(a):void 0,weight:r?JSON.parse(r):void 0,width:n?JSON.parse(n):void 0,length:l?JSON.parse(l):void 0,height:c?JSON.parse(c):void 0,requires_shipping:m?JSON.parse(m):void 0,...u},raw:e}},f=20,E=()=>{const{t}=p(),{searchParams:s,raw:e}=D({pageSize:f}),{inventory_items:a,count:r,isPending:n,isError:l,error:c}=k({...s}),m=A(),u=C(),{table:y}=v({data:a??[],columns:u,count:r,enablePagination:!0,getRowId:h=>h.id,pageSize:f});if(l)throw c;return i.jsxs(g,{className:"divide-y p-0",children:[i.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:i.jsx(P,{children:t("inventory.domain")})}),i.jsx(b,{table:y,columns:u,pageSize:f,count:r,isLoading:n,pagination:!0,search:!0,filters:m,queryObject:e,orderBy:["title","sku","stocked_quantity","reserved_quantity"],navigateTo:h=>`${h.id}`})]})},he=()=>i.jsxs("div",{className:"flex flex-col gap-y-2",children:[i.jsx(E,{}),i.jsx(O,{})]});export{he as Component};
