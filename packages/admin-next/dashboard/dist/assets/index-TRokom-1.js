import{u as j,at as y,j as e,an as C}from"./index-S--WvUSo.js";import{u as S,R as c}from"./route-focus-modal-MMx5Xnk0.js";import{t as b}from"./zod-jt04JUtm.js";import{u as v,F as s}from"./form-0PHaH8g8.js";import{z as d}from"./index-JzuMwgWW.js";import{c as F}from"./regions-en8xSoIX.js";import{t as p}from"./toast-4oQfF9Sm.js";import{I as L}from"./input-A29ux7yj.js";import{S as o}from"./select-Z4sV_-wF.js";import{B as h}from"./button-Pc5Xo8ua.js";import{H as E}from"./heading-cSlef4Su.js";import"./react-PzSkSLoa.js";import"./react-dom-Og6--24v.js";import"./react-router-dom-aSYyayiN.js";import"./drawer-H3TI1lDZ.js";import"./index-sF0hA49A.js";import"./prompt-LzbVPZYR.js";import"./information-circle-solid-rXH6vJ5W.js";import"./label-HFq5fzpT.js";import"./tooltip-Ixyw9oT8.js";import"./x-circle-solid-rnqhxvfk.js";import"./check-circle-solid-7j4QonPK.js";import"./index-Hm2Uj9Gg.js";import"./triangles-mini-HukRlWGp.js";const I=d.object({name:d.string().min(1),default_currency_code:d.string().optional(),default_region_id:d.string().optional()}),R=({store:t})=>{const{t:r}=j(),{handleSuccess:m}=S(),i=v({defaultValues:{name:t.name,default_region_id:t.default_region_id||void 0,default_currency_code:t.default_currency_code||void 0},resolver:b(I)}),{mutateAsync:u,isPending:x}=y(t.id),{regions:f,isPending:g}=F({limit:999}),_=i.handleSubmit(async n=>{try{await u(n),m(),p.success(r("general.success"),{description:r("store.toast.update"),dismissLabel:r("actions.close")})}catch(a){p.error(r("general.error"),{description:a.message,dismissLabel:r("actions.close")})}});return e.jsx(c.Form,{form:i,children:e.jsxs("form",{onSubmit:_,className:"flex h-full flex-col",children:[e.jsx(c.Body,{children:e.jsxs("div",{className:"flex flex-col gap-y-8",children:[e.jsx(s.Field,{control:i.control,name:"name",render:({field:n})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:r("fields.name")}),e.jsx(s.Control,{children:e.jsx(L,{placeholder:"ACME",...n})}),e.jsx(s.ErrorMessage,{})]})}),e.jsx(s.Field,{control:i.control,name:"default_currency_code",render:({field:{onChange:n,...a}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:r("store.defaultCurrency")}),e.jsx(s.Control,{children:e.jsxs(o,{...a,onValueChange:n,children:[e.jsx(o.Trigger,{ref:a.ref,children:e.jsx(o.Value,{})}),e.jsx(o.Content,{children:t.supported_currency_codes.map(l=>e.jsx(o.Item,{value:l,children:l.toUpperCase()},l))})]})})]})}),e.jsx(s.Field,{control:i.control,name:"default_region_id",render:({field:{onChange:n,...a}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{children:r("store.defaultRegion")}),e.jsx(s.Control,{children:e.jsxs(o,{...a,onValueChange:n,disabled:g,children:[e.jsx(o.Trigger,{ref:a.ref,children:e.jsx(o.Value,{})}),e.jsx(o.Content,{children:(f||[]).map(l=>e.jsx(o.Item,{value:l.id,children:l.name},l.id))})]})})]})})]})}),e.jsx(c.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(c.Close,{asChild:!0,children:e.jsx(h,{size:"small",variant:"secondary",children:r("actions.cancel")})}),e.jsx(h,{size:"small",isLoading:x,type:"submit",children:r("actions.save")})]})})]})})},ee=()=>{const{t}=j(),{store:r,isPending:m,isError:i,error:u}=C();if(i)throw u;const x=!!r&&!m;return e.jsxs(c,{children:[e.jsx(c.Header,{children:e.jsx(E,{children:t("store.edit.header")})}),x&&e.jsx(R,{store:r})]})};export{ee as Component};
