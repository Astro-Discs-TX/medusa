import{u as C,j as e}from"./index-S--WvUSo.js";import{u as q,R as x}from"./route-focus-modal-MMx5Xnk0.js";import{e as z,a as B}from"./products-_PEbH1CR.js";import{t as V}from"./zod-jt04JUtm.js";import{u as R,F as r}from"./form-0PHaH8g8.js";import{z as t}from"./index-JzuMwgWW.js";import{r as D}from"./react-PzSkSLoa.js";import{D as y}from"./divider-GiVPCNCn.js";import{C as O}from"./combobox-DjjFlb75.js";import{C as $}from"./country-select-m4Xtwmuu.js";import{c as Q}from"./cast-number-oeIUIgsb.js";import{o as j}from"./validation-CjPNSdXy.js";import{I as l}from"./input-A29ux7yj.js";import{H as g}from"./heading-cSlef4Su.js";import{S as b}from"./switch-VR1xZXYU.js";import{B as v}from"./button-Pc5Xo8ua.js";import{c as T}from"./react-router-dom-aSYyayiN.js";import"./react-dom-Og6--24v.js";import"./drawer-H3TI1lDZ.js";import"./index-sF0hA49A.js";import"./prompt-LzbVPZYR.js";import"./information-circle-solid-rXH6vJ5W.js";import"./label-HFq5fzpT.js";import"./tooltip-Ixyw9oT8.js";import"./x-mark-mini-aYDSd38M.js";import"./triangles-mini-HukRlWGp.js";import"./plus-mini-IRJECoWI.js";import"./countries-QR_y0WJ_.js";import"./index-Hm2Uj9Gg.js";const A=t.object({title:t.string().min(1),material:t.string().optional(),sku:t.string().optional(),ean:t.string().optional(),upc:t.string().optional(),barcode:t.string().optional(),inventory_quantity:j,manage_inventory:t.boolean(),allow_backorder:t.boolean(),weight:j,height:j,width:j,length:j,mid_code:t.string().optional(),hs_code:t.string().optional(),origin_country:t.string().optional(),options:t.record(t.string())}),G=({product:h,isStockAndInventoryEnabled:u=!1})=>{const{t:o}=C(),{handleSuccess:p}=q(),s=R({defaultValues:{inventory_quantity:0,manage_inventory:!0,allow_backorder:!1,options:{}},resolver:V(A)}),{mutateAsync:f,isLoading:w}=z(h.id),F=s.handleSubmit(async n=>{const i=m=>{if(!(typeof m>"u"||m===""))return typeof m=="string"?Q(m):m},{weight:a,height:c,width:d,length:I,inventory_quantity:L,allow_backorder:_,manage_inventory:E,sku:M,ean:k,upc:N,barcode:S,...H}=n,P=u?{}:{sku:M,ean:k,upc:N,barcode:S,inventory_quantity:i(L),allow_backorder:_,manage_inventory:E};await f({weight:i(a),height:i(c),width:i(d),length:i(I),prices:[],...P,...H},{onSuccess:()=>{p()}})});return e.jsx(x.Form,{form:s,children:e.jsxs("form",{onSubmit:F,className:"flex size-full flex-col overflow-hidden",children:[e.jsxs(x.Body,{className:"flex size-full flex-col gap-y-8 overflow-auto",children:[e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(r.Field,{control:s.control,name:"title",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{children:o("fields.title")}),e.jsx(r.Control,{children:e.jsx(l,{...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"material",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.material")}),e.jsx(r.Control,{children:e.jsx(l,{...n})}),e.jsx(r.ErrorMessage,{})]})}),h.options.map(n=>e.jsx(r.Field,{control:s.control,name:`options.${n.title}`,render:({field:{value:i,onChange:a,...c}})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{children:n.title}),e.jsx(r.Control,{children:e.jsx(O,{value:i,onChange:d=>{a(d)},...c,options:n.values.map(d=>({label:d.value,value:d.value}))})})]})},n.id))]}),e.jsx(y,{}),!u&&e.jsxs(D.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(g,{level:"h2",children:o("products.variant.inventory.header")}),e.jsx(r.Field,{control:s.control,name:"sku",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.sku")}),e.jsx(r.Control,{children:e.jsx(l,{...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"ean",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.ean")}),e.jsx(r.Control,{children:e.jsx(l,{...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"upc",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.upc")}),e.jsx(r.Control,{children:e.jsx(l,{...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"barcode",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.barcode")}),e.jsx(r.Control,{children:e.jsx(l,{...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"inventory_quantity",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{children:o("fields.inventoryQuantity")}),e.jsx(r.Control,{children:e.jsx(l,{type:"number",...n})}),e.jsx(r.ErrorMessage,{})]})})]}),e.jsx(r.Field,{control:s.control,name:"manage_inventory",render:({field:{value:n,onChange:i,...a}})=>e.jsxs(r.Item,{children:[e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r.Label,{children:o("products.variant.inventory.manageInventoryLabel")}),e.jsx(r.Control,{children:e.jsx(b,{checked:n,onCheckedChange:c=>i(!!c),...a})})]}),e.jsx(r.Hint,{children:o("products.variant.inventory.manageInventoryHint")})]}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"allow_backorder",render:({field:{value:n,onChange:i,...a}})=>e.jsxs(r.Item,{children:[e.jsxs("div",{className:"flex flex-col gap-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(r.Label,{children:o("products.variant.inventory.allowBackordersLabel")}),e.jsx(r.Control,{children:e.jsx(b,{checked:n,onCheckedChange:c=>i(!!c),...a})})]}),e.jsx(r.Hint,{children:o("products.variant.inventory.allowBackordersHint")})]}),e.jsx(r.ErrorMessage,{})]})})]}),e.jsx(y,{})]}),e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(g,{level:"h2",children:o("products.attributes")}),e.jsx(r.Field,{control:s.control,name:"weight",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.weight")}),e.jsx(r.Control,{children:e.jsx(l,{type:"number",...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"width",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.width")}),e.jsx(r.Control,{children:e.jsx(l,{type:"number",...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"length",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.length")}),e.jsx(r.Control,{children:e.jsx(l,{type:"number",...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"height",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.height")}),e.jsx(r.Control,{children:e.jsx(l,{type:"number",...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"mid_code",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.midCode")}),e.jsx(r.Control,{children:e.jsx(l,{...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"hs_code",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.hsCode")}),e.jsx(r.Control,{children:e.jsx(l,{...n})}),e.jsx(r.ErrorMessage,{})]})}),e.jsx(r.Field,{control:s.control,name:"origin_country",render:({field:n})=>e.jsxs(r.Item,{children:[e.jsx(r.Label,{optional:!0,children:o("fields.countryOfOrigin")}),e.jsx(r.Control,{children:e.jsx($,{...n})}),e.jsx(r.ErrorMessage,{})]})})]})]}),e.jsx(x.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(x.Close,{asChild:!0,children:e.jsx(v,{variant:"secondary",size:"small",children:o("actions.cancel")})}),e.jsx(v,{type:"submit",size:"small",isLoading:w,children:o("actions.save")})]})})]})})},Ce=()=>{const{id:h}=T(),{t:u}=C(),{product:o,isLoading:p,isError:s,error:f}=B(h);if(s)throw f;return e.jsxs(x,{children:[e.jsx(x.Header,{children:e.jsx(g,{children:u("products.variant.create.header")})}),!p&&o&&e.jsx(G,{product:o})]})};export{Ce as Component};
