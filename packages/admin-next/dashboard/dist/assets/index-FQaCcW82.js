import{u as c,j as o,a1 as h,ap as j}from"./index-S--WvUSo.js";import{L as y,O as b}from"./react-router-dom-aSYyayiN.js";import{u as g,a as C,D as T}from"./use-data-table-TeZp00wg.js";import{d as _,c as v}from"./collections-1ZxhMSyG.js";import{r as P}from"./react-PzSkSLoa.js";import{A as S}from"./action-menu-olZwXQ3q.js";import{P as k}from"./pencil-square-u3fizEAQ.js";import{T as w}from"./trash-nTjeUaCp.js";import{u as A}from"./use-prompt-wB0F2CxI.js";import{c as D}from"./index-JDlOzmVl.js";import{H as N}from"./heading-cSlef4Su.js";import{B as O}from"./button-Pc5Xo8ua.js";import"./react-dom-Og6--24v.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./index-1Zwdg31z.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./x-mark-mini-aYDSd38M.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./command-bar-wUgfUfvQ.js";import"./prompt-LzbVPZYR.js";import"./index-sF0hA49A.js";const n=D(),q=()=>{const{t}=c();return P.useMemo(()=>[n.accessor("title",{header:t("fields.title")}),n.accessor("handle",{header:t("fields.handle"),cell:({getValue:e})=>`/${e()}`}),n.accessor("products",{header:t("fields.products"),cell:({getValue:e})=>{var a;const r=(a=e())==null?void 0:a.length;return o.jsx("span",{children:r||"-"})}}),n.display({id:"actions",cell:({row:e})=>o.jsx(E,{collection:e.original})})],[t])},E=({collection:t})=>{const{t:e}=c(),r=A(),{mutateAsync:a}=_(t.id),s=async()=>{await r({title:e("general.areYouSure"),description:e("collections.deleteWarning",{title:t.title}),verificationText:t.title,verificationInstruction:e("general.typeToConfirm"),confirmText:e("actions.delete"),cancelText:e("actions.cancel")})&&await a()};return o.jsx(S,{groups:[{actions:[{label:e("actions.edit"),to:`/collections/${t.id}/edit`,icon:o.jsx(k,{})}]},{actions:[{label:e("actions.delete"),onClick:s,icon:o.jsx(w,{})}]}]})},L=()=>{const{t}=c();let e=[];const r=[{label:t("fields.createdAt"),key:"created_at"},{label:t("fields.updatedAt"),key:"updated_at"}].map(a=>({key:a.key,label:a.label,type:"date"}));return e=[...e,...r],e},z=({prefix:t,pageSize:e=20})=>{const r=g(["offset","q","order","created_at","updated_at"],t),{offset:a,created_at:s,updated_at:i,q:l,order:d}=r;return{searchParams:{limit:e,offset:a?Number(a):0,order:d,created_at:s?JSON.parse(s):void 0,updated_at:i?JSON.parse(i):void 0,q:l},raw:r}},p=20,H=()=>{const{t}=c(),{searchParams:e,raw:r}=z({pageSize:p}),{collections:a,count:s,isError:i,error:l,isLoading:d}=v({...e},{placeholderData:j}),u=L(),f=q(),{table:x}=C({data:a??[],columns:f,count:s,enablePagination:!0,getRowId:m=>m.id,pageSize:p});if(i)throw l;return o.jsxs(h,{className:"divide-y p-0",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[o.jsx(N,{children:t("collections.domain")}),o.jsx(y,{to:"/collections/create",children:o.jsx(O,{size:"small",variant:"secondary",children:t("actions.create")})})]}),o.jsx(T,{table:x,columns:f,pageSize:p,count:s,filters:u,orderBy:["title","handle","created_at","updated_at"],search:!0,navigateTo:m=>`/collections/${m.original.id}`,queryObject:r,isLoading:d})]})},ue=()=>o.jsxs("div",{className:"flex flex-col gap-y-2",children:[o.jsx(H,{}),o.jsx(b,{})]});export{ue as Component};
