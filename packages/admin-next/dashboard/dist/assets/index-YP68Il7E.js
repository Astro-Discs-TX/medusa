import{Z as o,aH as m,W as d,u,aI as p,j as e,a1 as x,T as c,d as f,au as j}from"./index-S--WvUSo.js";import{J as y}from"./json-view-section-Dui2O31i.js";import{A as g}from"./action-menu-olZwXQ3q.js";import{a as h,d as v,c as w,j as T,O as D}from"./react-router-dom-aSYyayiN.js";import{P as q}from"./pencil-square-u3fizEAQ.js";import{T as N}from"./trash-nTjeUaCp.js";import{u as U}from"./use-prompt-wB0F2CxI.js";import{H as C}from"./heading-cSlef4Su.js";import"./react-PzSkSLoa.js";import"./react-dom-Og6--24v.js";import"./badge-99FyByJO.js";import"./drawer-H3TI1lDZ.js";import"./index-sF0hA49A.js";import"./x-mark-mini-aYDSd38M.js";import"./prompt-LzbVPZYR.js";import"./button-Pc5Xo8ua.js";import"./input-A29ux7yj.js";import"./label-HFq5fzpT.js";const P=s=>({queryKey:m.detail(s),queryFn:async()=>d.users.retrieve(s)}),V=async({params:s})=>{const t=s.id,a=P(t);return o.getQueryData(a.queryKey)??await o.fetchQuery(a)},S=({user:s})=>{const{t}=u(),a=h(),r=U(),{mutateAsync:n}=p(s.id),i=[s.first_name,s.last_name].filter(Boolean).join(" "),l=async()=>{await r({title:t("general.areYouSure"),description:t("users.deleteUserWarning",{name:i??s.email}),verificationText:i??s.email,verificationInstruction:t("general.typeToConfirm"),confirmText:t("actions.delete"),cancelText:t("actions.cancel")})&&await n(void 0,{onSuccess:()=>{a("..")}})};return e.jsxs(x,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx(C,{children:s.email}),e.jsx(g,{groups:[{actions:[{label:t("actions.edit"),to:"edit",icon:e.jsx(q,{})}]},{actions:[{label:t("actions.delete"),onClick:l,icon:e.jsx(N,{})}]}]})]}),e.jsxs("div",{className:"grid grid-cols-2 items-center px-6 py-4",children:[e.jsx(c,{size:"small",leading:"compact",weight:"plus",children:t("fields.name")}),e.jsx(c,{size:"small",leading:"compact",className:f({"text-ui-fg-subtle":!i}),children:i??"-"})]})]})},Y=()=>{const s=v(),{id:t}=w(),{user:a,isPending:r,isError:n,error:i}=j(t,void 0,{initialData:s});if(r)return e.jsx("div",{children:"Loading..."});if(n||!a)throw i||T("An unknown error has occured",500);return e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx(S,{user:a}),e.jsx(y,{data:a}),e.jsx(D,{})]})};export{Y as Component,V as loader};
