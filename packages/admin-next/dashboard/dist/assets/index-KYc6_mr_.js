import{u as g,j as e,a1 as v,T as n,S as P,ap as k,Z as b,W as I}from"./index-S--WvUSo.js";import{J as N}from"./json-view-section-Dui2O31i.js";import{a as w,c as L}from"./categories-OC4w38xk.js";import{A as _}from"./action-menu-olZwXQ3q.js";import{a as T,b as M,g as D,c as R}from"./utils-Dovxpp5e.js";import{H as E}from"./heading-cSlef4Su.js";import{S}from"./status-badge-sML89E1A.js";import{r as s}from"./react-PzSkSLoa.js";import{L as B,c as F,d as H}from"./react-router-dom-aSYyayiN.js";import{I as Z}from"./inline-link-mCSkZwyp.js";import{T as h}from"./index-1Zwdg31z.js";import{T as q}from"./tooltip-Ixyw9oT8.js";import{B as G}from"./badge-99FyByJO.js";import{a as U,D as Q}from"./use-data-table-TeZp00wg.js";import{f as V}from"./products-_PEbH1CR.js";import{u as K,b as J,a as W}from"./use-product-table-columns-k99B-kCF.js";import"./react-dom-Og6--24v.js";import"./drawer-H3TI1lDZ.js";import"./index-sF0hA49A.js";import"./x-mark-mini-aYDSd38M.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./button-Pc5Xo8ua.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./index-JDlOzmVl.js";import"./command-bar-wUgfUfvQ.js";import"./product-types-gZDu6wo-.js";import"./sales-channels--fho5-f4.js";import"./placeholder-cell-O6UVTGmQ.js";import"./product-cell-gRltbXZC.js";import"./thumbnail-gerN888-.js";import"./status-cell-9XExsAIG.js";var $=Object.defineProperty,x=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,C=(t,a,r)=>a in t?$(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,X=(t,a)=>{for(var r in a||(a={}))O.call(a,r)&&C(t,r,a[r]);if(x)for(var r of x(a))z.call(a,r)&&C(t,r,a[r]);return t},Y=(t,a)=>{var r={};for(var i in t)O.call(t,i)&&a.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&x)for(var i of x(t))a.indexOf(i)<0&&z.call(t,i)&&(r[i]=t[i]);return r};const y=s.forwardRef((t,a)=>{var r=t,i=Y(r,["color"]);return s.createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",ref:a},i),s.createElement("path",{fill:"#60A5FA",fillRule:"evenodd",d:"M18.25 14.722a2.972 2.972 0 0 1-2.972 2.972H4.722a2.972 2.972 0 0 1-2.972-2.972V5.278a2.972 2.972 0 0 1 2.972-2.973H6.89c.902 0 1.754.41 2.318 1.112l.445.555h5.625a2.972 2.972 0 0 1 2.972 2.972v7.778Z",clipRule:"evenodd"}),s.createElement("path",{fill:"url(#a)",fillOpacity:.15,fillRule:"evenodd",d:"M18.25 14.722a2.972 2.972 0 0 1-2.972 2.972H4.722a2.972 2.972 0 0 1-2.972-2.972V5.278a2.972 2.972 0 0 1 2.972-2.973H6.89c.902 0 1.754.41 2.318 1.112l.445.555h5.625a2.972 2.972 0 0 1 2.972 2.972v7.778Z",clipRule:"evenodd"}),s.createElement("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.15,strokeWidth:.5,d:"M9.458 4.128a.25.25 0 0 0 .195.094h5.625A2.722 2.722 0 0 1 18 6.944v7.778a2.722 2.722 0 0 1-2.722 2.722H4.722A2.722 2.722 0 0 1 2 14.722V5.278a2.722 2.722 0 0 1 2.722-2.723H6.89c.826 0 1.606.375 2.123 1.018l.445.555Z"}),s.createElement("g",{filter:"url(#b)"},s.createElement("path",{fill:"#60A5FA",d:"M1.75 9.722A2.972 2.972 0 0 1 4.722 6.75h10.556a2.972 2.972 0 0 1 2.972 2.972v5a2.972 2.972 0 0 1-2.972 2.972H4.722a2.972 2.972 0 0 1-2.972-2.972v-5Z"}),s.createElement("path",{fill:"url(#c)",fillOpacity:.2,d:"M1.75 9.722A2.972 2.972 0 0 1 4.722 6.75h10.556a2.972 2.972 0 0 1 2.972 2.972v5a2.972 2.972 0 0 1-2.972 2.972H4.722a2.972 2.972 0 0 1-2.972-2.972v-5Z"})),s.createElement("defs",null,s.createElement("linearGradient",{id:"a",x1:10,x2:10,y1:2.305,y2:17.694,gradientUnits:"userSpaceOnUse"},s.createElement("stop",null),s.createElement("stop",{offset:1,stopOpacity:0})),s.createElement("linearGradient",{id:"c",x1:10,x2:10,y1:6.75,y2:17.694,gradientUnits:"userSpaceOnUse"},s.createElement("stop",{stopColor:"#fff"}),s.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),s.createElement("filter",{id:"b",width:16.5,height:10.944,x:1.75,y:6.75,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},s.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),s.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),s.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),s.createElement("feOffset",{dy:-.5}),s.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),s.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),s.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_6347_11987"}),s.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),s.createElement("feOffset",{dy:.5}),s.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),s.createElement("feColorMatrix",{values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.2 0"}),s.createElement("feBlend",{in2:"effect1_innerShadow_6347_11987",result:"effect2_innerShadow_6347_11987"}))))});y.displayName="FolderIllustration";const ee=({category:t})=>{const{t:a}=g(),r=T(t.is_active,a),i=M(t.is_internal,a);return e.jsxs(v,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx(E,{children:t.name}),e.jsxs("div",{className:"flex items-center gap-x-4",children:[e.jsxs("div",{className:"flex items-center gap-x-2",children:[e.jsx(S,{color:r.color,children:r.label}),e.jsx(S,{color:i.color,children:i.label})]}),e.jsx(_,{groups:[]})]})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 gap-3 px-6 py-4",children:[e.jsx(n,{size:"small",leading:"compact",weight:"plus",children:a("fields.description")}),e.jsx(n,{size:"small",leading:"compact",children:t.description||"-"})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 gap-3 px-6 py-4",children:[e.jsx(n,{size:"small",leading:"compact",weight:"plus",children:a("fields.handle")}),e.jsxs(n,{size:"small",leading:"compact",children:["/",t.handle]})]})]})},te=({category:t})=>{const{t:a}=g();return e.jsxs(v,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx(E,{level:"h2",children:a("categories.organization.header")}),e.jsx(_,{groups:[]})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 items-start gap-3 px-6 py-4",children:[e.jsx(n,{size:"small",leading:"compact",weight:"plus",children:a("categories.organization.pathLabel")}),e.jsx(ae,{category:t})]}),e.jsxs("div",{className:"text-ui-fg-subtle grid grid-cols-2 items-start gap-3 px-6 py-4",children:[e.jsx(n,{size:"small",leading:"compact",weight:"plus",children:a("categories.organization.childrenLabel")}),e.jsx(re,{category:t})]})]})},ae=({category:t})=>{const[a,r]=s.useState(!1),{t:i}=g(),{product_category:c,isLoading:d,isError:m,error:f}=w(t.id,{include_ancestors_tree:!0,fields:"id,name,parent_category"}),l=s.useMemo(()=>D(c),[c]);if(d||!c)return e.jsx(P,{className:"h-5 w-16"});if(m)throw f;return l.length?l.length>1&&!a?e.jsxs("div",{className:"grid grid-cols-[20px_1fr] items-start gap-x-2",children:[e.jsx(y,{}),e.jsxs("div",{className:"flex items-center gap-x-0.5",children:[e.jsx(q,{content:i("categories.organization.pathExpandTooltip"),children:e.jsx("button",{className:"outline-none",type:"button",onClick:()=>r(!0),children:e.jsx(n,{size:"xsmall",leading:"compact",weight:"plus",children:"..."})})}),e.jsx(h,{}),e.jsx(n,{size:"xsmall",leading:"compact",weight:"plus",className:"truncate",children:l[l.length-1].name})]})]}):l.length>1&&a?e.jsxs("div",{className:"grid grid-cols-[20px_1fr] items-start gap-x-2",children:[e.jsx(y,{}),e.jsx("div",{className:"gap- flex flex-wrap items-center gap-x-0.5 gap-y-1",children:l.map((o,p)=>e.jsxs("div",{className:"flex items-center gap-x-0.5",children:[p===l.length-1?e.jsx(n,{size:"xsmall",leading:"compact",weight:"plus",children:o.name}):e.jsx(Z,{to:`/categories/${o.id}`,className:"txt-compact-xsmall-plus text-ui-fg-subtle hover:text-ui-fg-base focus-visible:text-ui-fg-base",children:o.name}),p<l.length-1&&e.jsx(h,{})]},o.id))})]}):e.jsx("div",{className:"grid grid-cols-1 items-start gap-x-2",children:l.map((o,p)=>e.jsxs("div",{className:"flex items-center gap-x-0.5",children:[e.jsx(n,{size:"xsmall",leading:"compact",weight:"plus",children:o.name}),p<l.length-1&&e.jsx(h,{})]},o.id))}):e.jsx(n,{size:"small",leading:"compact",children:"-"})},re=({category:t})=>{const{product_category:a,isLoading:r,isError:i,error:c}=w(t.id,{include_descendants_tree:!0,fields:"id,name,category_children"}),d=s.useMemo(()=>R(a),[a]);if(r||!a)return e.jsx(P,{className:"h-5 w-16"});if(i)throw c;return d.length?e.jsx("div",{className:"flex flex-wrap gap-1",children:d.map(m=>e.jsx(G,{size:"2xsmall",asChild:!0,children:e.jsx(B,{to:`/categories/${m.id}`,children:m.name})},m.id))}):e.jsx(n,{size:"small",leading:"compact",children:"-"})},j=10,se=({category:t})=>{const{t:a}=g(),{raw:r,searchParams:i}=K({pageSize:j}),{products:c,count:d,isLoading:m,isError:f,error:l}=V({...i,category_id:[t.id]},{placeholderData:k}),o=J(),p=W(["categories"]),{table:A}=U({data:c||[],columns:o,count:d,getRowId:u=>u.id,pageSize:j,enableRowSelection:!0,enablePagination:!0});if(f)throw l;return e.jsxs(v,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx(E,{level:"h2",children:a("products.domain")}),e.jsx(_,{groups:[]})]}),e.jsx(Q,{table:A,filters:p,columns:o,orderBy:["title","created_at","updated_at"],pageSize:j,count:d,navigateTo:u=>u.id,isLoading:m,queryObject:r})]})},Qe=()=>{const{id:t}=F(),a=H(),{product_category:r,isLoading:i,isError:c,error:d}=w(t,void 0,{initialData:a});if(i||!r)return e.jsx("div",{children:"Loading..."});if(c)throw d;return e.jsx("div",{className:"flex flex-col gap-y-2",children:e.jsxs("div",{className:"flex flex-col gap-x-4 lg:flex-row lg:items-start",children:[e.jsxs("div",{className:"flex w-full flex-col gap-y-2",children:[e.jsx(ee,{category:r}),e.jsx(se,{category:r}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(N,{data:r})})]}),e.jsxs("div",{className:"mt-2 flex w-full max-w-[100%] flex-col gap-y-2 lg:mt-0 lg:max-w-[400px]",children:[e.jsx(te,{category:r}),e.jsx("div",{className:"lg:hidden",children:e.jsx(N,{data:r})})]})]})})},ie=t=>({queryKey:L.detail(t),queryFn:async()=>I.categories.retrieve(t)}),Ve=async({params:t})=>{const a=t.id,r=ie(a);return b.getQueryData(r.queryKey)??await b.fetchQuery(r)};export{Qe as Component,Ve as loader};
