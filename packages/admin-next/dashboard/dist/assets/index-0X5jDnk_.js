import{u as n,j as t,aK as y,aQ as h,a1 as j}from"./index-S--WvUSo.js";import{L as b,O as C}from"./react-router-dom-aSYyayiN.js";import{u as T,a as v,D as _}from"./use-data-table-TeZp00wg.js";import{r as D}from"./react-PzSkSLoa.js";import{A as P}from"./action-menu-olZwXQ3q.js";import{D as G}from"./date-cell-G_vX9su2.js";import{M as m}from"./money-amount-cell-qk7EOos5.js";import{S as A}from"./status-cell-9XExsAIG.js";import{D as S}from"./display-id-cell-xQwmg453.js";import{P as k}from"./pencil-square-u3fizEAQ.js";import{T as w}from"./trash-nTjeUaCp.js";import{u as B}from"./use-prompt-wB0F2CxI.js";import{B as N}from"./badge-99FyByJO.js";import{c as q}from"./index-JDlOzmVl.js";import{H as z}from"./heading-cSlef4Su.js";import{B as E}from"./button-Pc5Xo8ua.js";import"./react-dom-Og6--24v.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./index-1Zwdg31z.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./x-mark-mini-aYDSd38M.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./command-bar-wUgfUfvQ.js";import"./placeholder-cell-O6UVTGmQ.js";import"./tooltip-Ixyw9oT8.js";import"./money-amount-helpers--myf8Rla.js";import"./currencies-bd3ADI6s.js";import"./prompt-LzbVPZYR.js";import"./index-sF0hA49A.js";const i=q(),L=()=>{const{t:r}=n();return D.useMemo(()=>[i.accessor("code",{header:r("fields.code"),cell:({getValue:e})=>t.jsx(N,{size:"2xsmall",className:"overflow-hidden truncate",children:e()})}),i.accessor("order",{header:r("fields.order"),cell:({getValue:e})=>{const a=e();return t.jsx(S,{displayId:a==null?void 0:a.display_id})}}),i.accessor("region",{header:r("fields.region"),cell:({row:e})=>e.original.region.name}),i.accessor("is_disabled",{header:r("fields.status"),cell:({getValue:e})=>{const a=e();return t.jsx(A,{color:a?"red":"green",children:r(a?"general.disabled":"general.enabled")})}}),i.accessor("created_at",{header:r("fields.dateIssued"),cell:({getValue:e})=>t.jsx(G,{date:e()})}),i.accessor("value",{header:r("giftCards.initialBalance"),cell:({getValue:e,row:a})=>{const s=a.original.region.currency_code,o=e();return t.jsx(m,{amount:o,currencyCode:s})}}),i.accessor("balance",{header:r("giftCards.currentBalance"),cell:({getValue:e,row:a})=>{const s=a.original.region.currency_code,o=e();return t.jsx(m,{amount:o,currencyCode:s})}}),i.display({id:"actions",cell:({row:e})=>t.jsx(H,{giftCard:e.original})})],[r])},H=({giftCard:r})=>{const{t:e}=n(),a=B(),{mutateAsync:s}=y(r.id),o=async()=>{await a({title:e("general.areYouSure"),description:e("giftCards.deleteGiftCardWarning",{code:r.code}),confirmText:e("actions.delete"),cancelText:e("actions.cancel")})&&await s()};return t.jsx(P,{groups:[{actions:[{icon:t.jsx(k,{}),label:e("actions.edit"),to:`/gift-cards/${r.id}/edit`}]},{actions:[{icon:t.jsx(w,{}),label:e("actions.delete"),onClick:o}]}]})},I=()=>{const{t:r}=n();let e=[];const a=[{label:r("fields.createdAt"),key:"created_at"},{label:r("fields.updatedAt"),key:"updated_at"}].map(s=>({key:s.key,label:s.label,type:"date"}));return e=[...e,...a],e},M=({pageSize:r})=>{const e=T(["offset","q"]),{offset:a,q:s}=e;return{searchParams:{limit:r,offset:a?Number(a):0,q:s},raw:e}},c=20,O=()=>{const{t:r}=n(),{searchParams:e,raw:a}=M({pageSize:c}),{gift_cards:s,count:o,isError:l,error:u,isLoading:p}=h({...e},{keepPreviousData:!0}),f=I(),d=L(),{table:g}=v({data:s??[],columns:d,enablePagination:!0,count:o,pageSize:c});if(l)throw u;return t.jsxs(j,{className:"divide-y p-0",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[t.jsx(z,{children:r("giftCards.domain")}),t.jsx("div",{className:"flex items-center gap-x-2",children:t.jsx(E,{size:"small",variant:"secondary",asChild:!0,children:t.jsx(b,{to:"create",children:r("actions.create")})})})]}),t.jsx(_,{columns:d,table:g,pagination:!0,navigateTo:x=>`/gift-cards/${x.original.id}`,filters:f,count:o,search:!0,isLoading:p,pageSize:c,orderBy:["created_at","updated_at"],queryObject:a})]})},De=()=>t.jsxs("div",{className:"flex flex-col gap-y-2",children:[t.jsx(O,{}),t.jsx(C,{})]});export{De as Component};
