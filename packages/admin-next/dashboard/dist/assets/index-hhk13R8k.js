import{Z as p,W as v,u as c,j as e,a1 as x,aP as L,T as o}from"./index-S--WvUSo.js";import{s as N,g as b,u as _}from"./stock-locations-5f5MPAbM.js";import{a as w,d as S,L as k,O as C}from"./react-router-dom-aSYyayiN.js";import{c as T}from"./countries-QR_y0WJ_.js";import{A as q}from"./action-menu-olZwXQ3q.js";import{B as z}from"./badge-list-summary-xN70drfF.js";import{P as B}from"./pencil-square-u3fizEAQ.js";import{T as D}from"./trash-nTjeUaCp.js";import{t as u}from"./toast-4oQfF9Sm.js";import{u as P}from"./use-prompt-wB0F2CxI.js";import{B as h}from"./button-Pc5Xo8ua.js";import{S as F}from"./status-badge-sML89E1A.js";import{H as Q}from"./heading-cSlef4Su.js";import"./react-PzSkSLoa.js";import"./react-dom-Og6--24v.js";import"./badge-99FyByJO.js";import"./tooltip-Ixyw9oT8.js";import"./information-circle-solid-rXH6vJ5W.js";import"./x-circle-solid-rnqhxvfk.js";import"./check-circle-solid-7j4QonPK.js";import"./prompt-LzbVPZYR.js";import"./index-sF0hA49A.js";import"./input-A29ux7yj.js";import"./label-HFq5fzpT.js";const g="name,*sales_channels,address.city,address.country_code,*fulfillment_sets,*fulfillment_sets.service_zones,*fulfillment_sets.service_zones.shipping_options,*fulfillment_sets.service_zones.shipping_options.shipping_profile",A=()=>({queryKey:N.lists(),queryFn:async()=>v.stockLocations.list({fields:g})}),de=async i=>{const s=A();return p.getQueryData(s.queryKey)??await p.fetchQuery(s)};function K(i){const{t:s}=c(),{salesChannels:t}=i;return e.jsx("div",{className:"flex flex-col px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{size:"small",weight:"plus",className:"text-ui-fg-subtle flex-1",as:"div",children:s("shipping.fulfillmentSet.salesChannels")}),e.jsx("div",{className:"flex-1 text-left",children:t!=null&&t.length?e.jsx(z,{inline:!0,n:3,list:t.map(l=>l.name)}):"-"})]})})}function f(i){const{t:s}=c(),{fulfillmentSet:t,type:l}=i,n=!!t;return e.jsx("div",{className:"flex flex-col px-6 py-5",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{size:"small",weight:"plus",className:"text-ui-fg-subtle flex-1",as:"div",children:s(`shipping.fulfillmentSet.${l}.title`)}),e.jsx("div",{className:"flex-1 text-left",children:e.jsx(F,{color:n?"green":"red",children:s(n?"statuses.enabled":"statuses.disabled")})})]})})}function $(i){var d,m;const{location:s}=i,{t}=c(),l=w(),n=P(),{mutateAsync:j}=b(s.id),y=async()=>{if(await n({title:t("general.areYouSure"),description:t("shipping.deleteLocation.confirm",{name:s.name}),confirmText:t("actions.remove"),cancelText:t("actions.cancel")}))try{await j(),u.success(t("general.success"),{description:t("shipping.deleteLocation.success",{name:s.name}),dismissLabel:t("general.close")})}catch(r){u.error(t("general.error"),{description:r.message,dismissLabel:t("actions.close")})}};return e.jsxs(x,{className:"flex flex-col divide-y p-0",children:[e.jsx("div",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex flex-row items-center justify-between gap-x-4",children:[e.jsx("div",{className:"grow-0 rounded-lg border",children:e.jsx("div",{className:"bg-ui-bg-field m-1 rounded-md p-2",children:e.jsx(L,{className:"text-ui-fg-subtle"})})}),e.jsxs("div",{className:"grow-1 flex flex-1 flex-col",children:[e.jsx(o,{weight:"plus",children:s.name}),e.jsxs(o,{className:"text-ui-fg-subtle txt-small",children:[(d=s.address)==null?void 0:d.city,","," ",(m=T.find(a=>{var r;return((r=s.address)==null?void 0:r.country_code.toLowerCase())===a.iso_2}))==null?void 0:m.display_name]})]}),e.jsxs("div",{className:"flex h-[12px] grow-0 items-center gap-4 divide-x overflow-hidden",children:[e.jsx(q,{groups:[{actions:[{label:t("actions.edit"),icon:e.jsx(B,{}),to:`/settings/shipping/${s.id}/edit`},{label:t("shipping.deleteLocation.label"),icon:e.jsx(D,{}),onClick:y}]}]}),e.jsx(h,{className:"text-ui-fg-interactive rounded-none pl-5 hover:bg-transparent",onClick:()=>l(`/settings/shipping/${s.id}`),variant:"transparent",children:t("actions.viewDetails")})]})]})}),e.jsx(K,{salesChannels:s.sales_channels}),e.jsx(f,{type:"pickup",fulfillmentSet:s.fulfillment_sets.find(a=>a.type==="pickup")}),e.jsx(f,{type:"delivery",fulfillmentSet:s.fulfillment_sets.find(a=>a.type==="delivery")})]})}function me(){const{t:i}=c(),s=S();let{stock_locations:t=[],isPending:l}=_({fields:g},{initialData:s});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"py-4",children:[e.jsxs(x,{className:"mb-4 flex h-fit items-center justify-between p-8",children:[e.jsxs("div",{children:[e.jsx(Q,{className:"mb-2",children:i("shipping.title")}),e.jsx(o,{className:"text-ui-fg-subtle txt-small",children:i("shipping.description")})]}),e.jsx(h,{size:"small",variant:"secondary",asChild:!0,children:e.jsx(k,{to:"create",children:i("shipping.createLocation")})})]}),e.jsx("div",{className:"flex flex-col gap-4 lg:col-span-2",children:t.map(n=>e.jsx($,{location:n},n.id))})]}),e.jsx(C,{})]})}export{me as Component,de as loader};
