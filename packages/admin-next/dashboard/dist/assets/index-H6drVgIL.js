import{u as f,j as o}from"./index-S--WvUSo.js";import{u as y,R as n}from"./route-focus-modal-MMx5Xnk0.js";import{t as C}from"./zod-jt04JUtm.js";import{u as F,F as e}from"./form-0PHaH8g8.js";import{z as l}from"./index-JzuMwgWW.js";import{d as b,a as w}from"./products-_PEbH1CR.js";import{I as x}from"./input-A29ux7yj.js";import{B as j}from"./button-Pc5Xo8ua.js";import{c as P,j as S}from"./react-router-dom-aSYyayiN.js";import{H as E}from"./heading-cSlef4Su.js";import"./react-PzSkSLoa.js";import"./react-dom-Og6--24v.js";import"./drawer-H3TI1lDZ.js";import"./index-sF0hA49A.js";import"./prompt-LzbVPZYR.js";import"./information-circle-solid-rXH6vJ5W.js";import"./label-HFq5fzpT.js";import"./tooltip-Ixyw9oT8.js";const I=l.object({title:l.string().min(1),values:l.array(l.string()).optional()}),L=({option:t})=>{const{t:i}=f(),{handleSuccess:c}=y(),r=F({defaultValues:{title:t.title,values:t.values.map(s=>s.value)},resolver:C(I)}),{mutateAsync:a,isLoading:d}=b(t.product_id,t.id),m=r.handleSubmit(async s=>{a({id:t.id,...s},{onSuccess:()=>{c()}})});return o.jsx(n.Form,{form:r,children:o.jsxs("form",{onSubmit:m,className:"flex flex-1 flex-col overflow-hidden",children:[o.jsxs(n.Body,{className:"flex flex-1 flex-col gap-y-8 overflow-auto",children:[o.jsx(e.Field,{control:r.control,name:"title",render:({field:s})=>o.jsxs(e.Item,{children:[o.jsx(e.Label,{children:i("products.fields.options.optionTitle")}),o.jsx(e.Control,{children:o.jsx(x,{...s})}),o.jsx(e.ErrorMessage,{})]})}),o.jsx(e.Field,{control:r.control,name:"values",render:({field:{value:s,onChange:u,...p}})=>o.jsxs(e.Item,{children:[o.jsx(e.Label,{children:i("products.fields.options.variations")}),o.jsx(e.Control,{children:o.jsx(x,{...p,value:(s??[]).join(","),onChange:h=>{const v=h.target.value;u(v.split(",").map(g=>g.trim()))}})}),o.jsx(e.ErrorMessage,{})]})})]}),o.jsx(n.Footer,{children:o.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[o.jsx(n.Close,{asChild:!0,children:o.jsx(j,{variant:"secondary",size:"small",children:i("actions.cancel")})}),o.jsx(j,{type:"submit",size:"small",isLoading:d,children:i("actions.save")})]})})]})})},K=()=>{const{id:t,option_id:i}=P(),{t:c}=f(),{product:r,isLoading:a,isError:d,error:m}=w(t),s=r==null?void 0:r.options.find(p=>p.id===i),u=!a&&s;if(!a&&!s)throw S({message:`An option with ID ${i} was not found`},404);if(d)throw m;return o.jsxs(n,{children:[o.jsx(n.Header,{children:o.jsx(E,{children:c("products.options.edit.header")})}),u&&o.jsx(L,{option:s})]})};export{K as Component};
