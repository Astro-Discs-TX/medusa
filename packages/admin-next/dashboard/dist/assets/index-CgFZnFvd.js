import{V as z,W as I,X as V,u as _,j as e}from"./index-S--WvUSo.js";import{u as R,R as c}from"./route-focus-modal-MMx5Xnk0.js";import{u as E,a as K}from"./products-_PEbH1CR.js";import{t as O}from"./zod-jt04JUtm.js";import{u as w,F as s}from"./form-0PHaH8g8.js";import{o as B,s as u,a as h}from"./index-JzuMwgWW.js";import{C as f}from"./combobox-DjjFlb75.js";import{u as H}from"./categories-OC4w38xk.js";import{c as N}from"./collections-1ZxhMSyG.js";import{u as Q}from"./product-types-gZDu6wo-.js";import{S as n}from"./select-Z4sV_-wF.js";import{B as y}from"./button-Pc5Xo8ua.js";import{c as q}from"./react-router-dom-aSYyayiN.js";import{H as A}from"./heading-cSlef4Su.js";import"./react-PzSkSLoa.js";import"./react-dom-Og6--24v.js";import"./drawer-H3TI1lDZ.js";import"./index-sF0hA49A.js";import"./prompt-LzbVPZYR.js";import"./information-circle-solid-rXH6vJ5W.js";import"./label-HFq5fzpT.js";import"./tooltip-Ixyw9oT8.js";import"./x-mark-mini-aYDSd38M.js";import"./triangles-mini-HukRlWGp.js";import"./plus-mini-IRJECoWI.js";import"./index-Hm2Uj9Gg.js";const U="tags",Y=V(U),D=(r,t)=>{const{data:l,...m}=z({queryKey:Y.list(r),queryFn:async()=>I.tags.list(r),...t});return{...l,...m}},G=B({type_id:u().optional(),collection_id:u().optional(),category_ids:h(u()).optional(),tags:h(u()).optional()}),M=({product:r})=>{var g,j;const{t}=_(),{handleSuccess:l}=R(),{product_types:m,isLoading:p}=Q(),{product_tags:x,isLoading:b}=D(),{collections:v,isLoading:C}=N(),{product_categories:L,isLoading:F}=H(),d=w({defaultValues:{type_id:r.type_id||void 0,collection_id:r.collection_id||void 0,category_ids:((g=r.categories)==null?void 0:g.map(o=>o.id))||void 0,tags:((j=r.tags)==null?void 0:j.map(o=>o.id))||void 0},resolver:O(G)}),{mutateAsync:T,isLoading:S}=E(r.id),P=d.handleSubmit(async o=>{var i;await T({type_id:o.type_id||void 0,collection_id:o.collection_id||void 0,category_ids:o.category_ids||void 0,tags:((i=o.tags)==null?void 0:i.map(a=>{}))||void 0},{onSuccess:()=>{l()}})});return e.jsx(c.Form,{form:d,children:e.jsxs("form",{onSubmit:P,className:"flex h-full flex-col",children:[e.jsx(c.Body,{children:e.jsxs("div",{className:"flex h-full flex-col gap-y-8",children:[e.jsx(s.Field,{control:d.control,name:"type_id",render:({field:{onChange:o,...i}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:t("products.fields.type.label")}),e.jsx(s.Control,{children:e.jsxs(n,{disabled:p,...i,onValueChange:o,children:[e.jsx(n.Trigger,{ref:i.ref,children:e.jsx(n.Value,{})}),e.jsx(n.Content,{children:(m??[]).map(a=>e.jsx(n.Item,{value:a.id,children:a.value},a.id))})]})})]})}),e.jsx(s.Field,{control:d.control,name:"collection_id",render:({field:{onChange:o,...i}})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:t("products.fields.collection.label")}),e.jsx(s.Control,{children:e.jsxs(n,{disabled:C,...i,onValueChange:o,children:[e.jsx(n.Trigger,{ref:i.ref,children:e.jsx(n.Value,{})}),e.jsx(n.Content,{children:(v??[]).map(a=>e.jsx(n.Item,{value:a.id,children:a.title},a.id))})]})})]})}),e.jsx(s.Field,{control:d.control,name:"category_ids",render:({field:o})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:t("products.fields.categories.label")}),e.jsx(s.Control,{children:e.jsx(f,{disabled:F,options:(L??[]).map(i=>({label:i.name,value:i.id})),...o})})]})}),e.jsx(s.Field,{control:d.control,name:"tags",render:({field:o})=>e.jsxs(s.Item,{children:[e.jsx(s.Label,{optional:!0,children:t("products.fields.tags.label")}),e.jsx(s.Control,{children:e.jsx(f,{disabled:b,options:(x??[]).map(i=>({label:i.value,value:i.id})),...o})})]})})]})}),e.jsx(c.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(c.Close,{asChild:!0,children:e.jsx(y,{size:"small",variant:"secondary",children:t("actions.cancel")})}),e.jsx(y,{size:"small",type:"submit",isLoading:S,children:t("actions.save")})]})})]})})},_e=()=>{const{id:r}=q(),{t}=_(),{product:l,isLoading:m,isError:p,error:x}=K(r);if(p)throw x;return e.jsxs(c,{children:[e.jsx(c.Header,{children:e.jsx(A,{children:t("products.editOrganization")})}),!m&&l&&e.jsx(M,{product:l})]})};export{_e as Component};
