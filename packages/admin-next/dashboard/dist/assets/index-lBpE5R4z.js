import{u as V,bu as le,j as e,T as R,bv as re,b5 as oe,m as ce,bw as ue,l as de}from"./index-S--WvUSo.js";import{u as me,a as H}from"./route-focus-modal-MMx5Xnk0.js";import{r as v,a as O}from"./react-PzSkSLoa.js";import{F as a,a as L,u as pe}from"./form-0PHaH8g8.js";import{c as $}from"./cast-number-oeIUIgsb.js";import{a as J,g as fe,b as xe}from"./money-amount-helpers--myf8Rla.js";import{T as he}from"./thumbnail-gerN888-.js";import{M as ie}from"./money-amount-cell-qk7EOos5.js";import{I as X}from"./input-A29ux7yj.js";import{S as _}from"./select-Z4sV_-wF.js";import{g as Z}from"./currencies-bd3ADI6s.js";import{S as z}from"./switch-VR1xZXYU.js";import{C as K}from"./currency-input-k1bgGOuE.js";import{H as B}from"./heading-cSlef4Su.js";import{A as ge}from"./alert-dyv3SYtc.js";import{u as je,a as be,D as _e}from"./use-data-table-TeZp00wg.js";import{P as ye,a as ve}from"./product-cell-gRltbXZC.js";import{C as U}from"./checkbox-8MlXzZCx.js";import{c as we}from"./index-JDlOzmVl.js";import{P as D}from"./progress-tabs-S8wsVeqQ.js";import{B as Y}from"./button-Pc5Xo8ua.js";import{c as Ne}from"./react-router-dom-aSYyayiN.js";import"./react-dom-Og6--24v.js";import"./drawer-H3TI1lDZ.js";import"./index-sF0hA49A.js";import"./prompt-LzbVPZYR.js";import"./information-circle-solid-rXH6vJ5W.js";import"./label-HFq5fzpT.js";import"./tooltip-Ixyw9oT8.js";import"./placeholder-cell-O6UVTGmQ.js";import"./index-Hm2Uj9Gg.js";import"./triangles-mini-HukRlWGp.js";import"./x-mark-mini-aYDSd38M.js";import"./x-circle-solid-rnqhxvfk.js";import"./check-circle-solid-7j4QonPK.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./index-1Zwdg31z.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./minus-E5-czcFC.js";import"./index-7dV3TD85.js";import"./lodash-5s15_I2H.js";import"./command-bar-wUgfUfvQ.js";const Ce=(t,o)=>{var r;let n=t.items.reduce((s,l)=>s.set(l.id,{...l}),new Map),c=[];if(t.claims&&t.claims.length)for(const s of t.claims)((r=s.return_order)==null?void 0:r.status)!=="canceled"&&(s.claim_items=s.claim_items??[],c=[...c,...s.claim_items]),!(s.fulfillment_status==="not_fulfilled"&&s.payment_status==="na")&&s.additional_items&&s.additional_items.length&&(n=s.additional_items.filter(l=>l.shipped_quantity||l.shipped_quantity===l.fulfilled_quantity).reduce((l,p)=>l.set(p.id,{...p}),n));if(!o&&t.swaps&&t.swaps.length)for(const s of t.swaps)s.fulfillment_status!=="not_fulfilled"&&(n=s.additional_items.reduce((l,p)=>l.set(p.id,{...p}),n));for(const s of c){const l=n.get(s.item_id);l&&(l.quantity=l.quantity-s.quantity,l.quantity!==0?n.set(l.id,l):n.delete(l.id))}return[...n.values()]};function Se({item:t,currencyCode:o,form:n}){const{t:c}=V(),{return_reasons:r=[]}=le();return e.jsxs("div",{className:"bg-ui-bg-subtle shadow-elevation-card-rest my-2 rounded-xl ",children:[e.jsxs("div",{className:"flex gap-x-2 border-b p-3 text-sm",children:[e.jsxs("div",{className:"flex flex-grow items-center gap-x-3",children:[e.jsx(he,{src:t.thumbnail}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{children:[e.jsx(R,{className:"txt-small",as:"span",weight:"plus",children:t.title}),t.variant.sku&&e.jsxs("span",{children:["(",t.variant.sku,")"]})]}),e.jsx(R,{as:"div",className:"text-ui-fg-subtle txt-small",children:t.variant.title})]})]}),e.jsx("div",{className:"text-ui-fg-subtle txt-small mr-2 flex flex-shrink-0",children:e.jsx(ie,{currencyCode:o,amount:t.total})})]}),e.jsx("div",{className:"block p-3 text-sm",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{weight:"plus",className:"txt-small mb-2",children:c("fields.quantity")}),e.jsx(a.Field,{control:n.control,name:`quantity.${t.id}`,render:({field:s})=>e.jsxs(a.Item,{children:[e.jsx(a.Control,{children:e.jsx(X,{className:"bg-ui-bg-base txt-small w-full rounded-lg",min:1,max:t.quantity,type:"number",...s,onChange:l=>{const p=l.target.value;s.onChange(p===""?null:Number(p))}})}),e.jsx(a.ErrorMessage,{})]})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{weight:"plus",className:"txt-small mb-2",children:c("fields.reason")}),e.jsx(a.Field,{control:n.control,name:`reason.${t.id}`,render:({field:{onChange:s,ref:l,...p}})=>e.jsxs(a.Item,{children:[e.jsx(a.Control,{children:e.jsxs(_,{onValueChange:s,...p,children:[e.jsx(_.Trigger,{className:"bg-ui-bg-base txt-small",ref:l,children:e.jsx(_.Value,{})}),e.jsx(_.Content,{children:r.map(h=>e.jsx(_.Item,{value:h.id,children:h.label},h.id))})]})}),e.jsx(a.ErrorMessage,{})]})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{weight:"plus",className:"txt-small mb-2",children:c("fields.note")}),e.jsx(a.Field,{control:n.control,name:`note.${t.id}`,render:({field:s})=>e.jsxs(a.Item,{children:[e.jsx(a.Control,{children:e.jsx(X,{className:"bg-ui-bg-base txt-small",...s})}),e.jsx(a.ErrorMessage,{})]})})]})]})})]})}function qe({form:t,items:o,order:n,onRefundableAmountChange:c}){const{t:r}=V(),{currency_code:s}=n,{setValue:l}=t,[p,h]=v.useState({}),{customShippingPrice:f,enableCustomRefund:N,enableCustomShippingPrice:C,quantity:b,shipping:d,selectedLocation:y}=Ie(t.control),{shipping_options:w=[],isLoading:S}=re({region_id:n.region_id,is_return:!0}),q=!S&&!w.length,{stock_locations:I=[]}=oe({});v.useEffect(()=>{(async()=>{const u={};return o.length&&(await Promise.all(o.map(async i=>{if(i.variant_id)return await ce.admin.variants.getInventory(i.variant_id)}))).filter(i=>i==null?void 0:i.variant).forEach(i=>{var M;const{variant:x}=i,P=(M=x.inventory[0])==null?void 0:M.location_levels;P&&(u[x.id]=P)}),u})().then(u=>{h(u)})},[o]);const T=v.useMemo(()=>y?!o.map(u=>{var i;return u!=null&&u.variant_id?(i=p[u.variant_id])==null?void 0:i.find(x=>x.location_id===y):!0}).every(Boolean):!1,[o,p,y]),k=v.useMemo(()=>{if(C&&f){const u=f===""?0:$(f);return J(u,s)}const m=w==null?void 0:w.find(u=>d===u.id);return(m==null?void 0:m.price_incl_tax)||0},[d,f,C,w,s]),g=v.useMemo(()=>{const u=o.reduce((i,x)=>{const P=(x.refundable||0)/(x.quantity-(x.returned_quantity||0));return i+P*b[x.id]},0)-(k||0);return c(u),u},[o,c,b,k]);return v.useEffect(()=>{l("enable_custom_shipping_price",!1,{shouldDirty:!0,shouldTouch:!0}),l("custom_shipping_price",0,{shouldDirty:!0,shouldTouch:!0})},[N,l]),e.jsx("div",{className:"flex size-full flex-col items-center overflow-auto p-16",children:e.jsxs("div",{className:"flex w-full max-w-[720px] flex-col justify-center px-2 pb-2",children:[e.jsx("div",{className:"flex flex-col gap-y-1 pb-10",children:e.jsx(B,{className:"text-2xl",children:r("general.details")})}),e.jsx(B,{className:"mb-2 text-base",children:r("orders.returns.chooseItems")}),o.map(m=>e.jsx(Se,{item:m,form:t,currencyCode:n.currency_code},m.id)),e.jsx("div",{className:"flex flex-col gap-y-1 pb-4 pt-8",children:e.jsx(B,{className:"text-base",children:r("fields.shipping")})}),e.jsxs("div",{className:"flex gap-x-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(a.Field,{control:t.control,name:"location",render:({field:{onChange:m,ref:u,...i}})=>e.jsxs(a.Item,{children:[e.jsxs(a.Label,{children:[" ",r("fields.location")]}),e.jsx(a.Hint,{children:r("orders.returns.locationDescription")}),e.jsx(a.Control,{children:e.jsxs(_,{onValueChange:m,...i,children:[e.jsx(_.Trigger,{className:"bg-ui-bg-base",ref:u,children:e.jsx(_.Value,{})}),e.jsx(_.Content,{children:I.map(x=>e.jsx(_.Item,{value:x.id,children:x.name},x.id))})]})}),e.jsx(a.ErrorMessage,{})]})})}),e.jsx("div",{className:"flex-1",children:e.jsx(a.Field,{control:t.control,name:"shipping",render:({field:{onChange:m,ref:u,...i}})=>e.jsxs(a.Item,{children:[e.jsx(a.Label,{tooltip:q?r("orders.returns.noShippingOptions"):void 0,children:r("fields.shipping")}),e.jsx(a.Hint,{children:r("orders.returns.shippingDescription")}),e.jsx(a.Control,{children:e.jsxs(_,{onValueChange:m,...i,disabled:q,children:[e.jsx(_.Trigger,{className:"bg-ui-bg-base",ref:u,children:e.jsx(_.Value,{})}),e.jsx(_.Content,{children:w.map(x=>e.jsx(_.Item,{value:x.id,children:x.name},x.id))})]})}),e.jsx(a.ErrorMessage,{})]})})})]}),T&&e.jsxs(ge,{variant:"warning",dismissible:!0,className:"mt-4 p-5",children:[e.jsx("div",{className:"text-ui-fg-subtle txt-small pb-2 font-medium leading-[20px]",children:r("orders.returns.noInventoryLevel")}),e.jsx(R,{className:"text-ui-fg-subtle txt-small leading-normal",children:r("orders.returns.noInventoryLevelDesc")})]}),e.jsxs("div",{className:"text-ui-fg-base my-10 flex w-full justify-between border-b border-t border-dashed py-8",children:[e.jsx(R,{weight:"plus",className:"txt-small flex-1",children:r("orders.returns.refundAmount")}),e.jsx("div",{className:"txt-small block flex-1 text-right",children:t.watch("enable_custom_refund")?e.jsx("span",{className:"text-right",children:"-"}):e.jsx(ie,{align:"right",amount:g,currencyCode:n.currency_code})})]}),e.jsx("div",{className:"flex flex-col gap-y-4",children:e.jsx(a.Field,{control:t.control,name:"send_notification",render:({field:{onChange:m,value:u,...i}})=>e.jsxs(a.Item,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a.Label,{children:r("orders.returns.sendNotification")}),e.jsx(a.Control,{children:e.jsx(a.Control,{children:e.jsx(z,{checked:!!u,onCheckedChange:m,...i})})})]}),e.jsx(a.Hint,{className:"!mt-1",children:r("orders.returns.sendNotificationHint")}),e.jsx(a.ErrorMessage,{})]})})}),e.jsxs("div",{className:"mt-10 flex flex-col gap-y-4",children:[e.jsx(a.Field,{control:t.control,name:"enable_custom_refund",render:({field:{value:m,onChange:u,...i}})=>e.jsxs(a.Item,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a.Label,{children:r("orders.returns.customRefund")}),e.jsx(a.Control,{children:e.jsx(a.Control,{children:e.jsx(z,{checked:!!m,onCheckedChange:u,...i})})})]}),e.jsx(a.Hint,{className:"!mt-1",children:r("orders.returns.customRefundHint")}),e.jsx(a.ErrorMessage,{})]})}),N&&e.jsx("div",{className:"w-[50%] pr-2",children:e.jsx(a.Field,{control:t.control,name:"custom_refund",render:({field:{onChange:m,...u}})=>e.jsxs(a.Item,{children:[e.jsx(a.Control,{children:e.jsx(K,{min:0,max:n.refundable_amount,onValueChange:m,code:n.currency_code,symbol:Z(n.currency_code),...u})}),e.jsx(a.ErrorMessage,{})]})})})]}),e.jsxs("div",{className:"mt-10 flex flex-col gap-y-4",children:[e.jsx(a.Field,{control:t.control,name:"enable_custom_shipping_price",render:({field:m})=>{let u;return N?u=r("orders.returns.shippingPriceTooltip1"):d||(u=r("orders.returns.shippingPriceTooltip2")),e.jsxs(a.Item,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(a.Label,{tooltip:u,children:r("orders.returns.customShippingPrice")}),e.jsx(a.Control,{children:e.jsx(a.Control,{children:e.jsx(z,{disabled:t.watch("enable_custom_refund")||!t.watch("shipping"),checked:!!m.value,onCheckedChange:m.onChange})})})]}),e.jsx(a.Hint,{className:"!mt-1",children:r("orders.returns.customShippingPriceHint")}),e.jsx(a.ErrorMessage,{})]})}}),C&&e.jsx("div",{className:"w-[50%] pr-2",children:e.jsx(a.Field,{control:t.control,name:"custom_shipping_price",render:({field:{onChange:m,...u}})=>e.jsxs(a.Item,{children:[e.jsx(a.Control,{children:e.jsx(K,{min:0,onValueChange:m,code:n.currency_code,symbol:Z(n.currency_code),...u})}),e.jsx(a.ErrorMessage,{})]})})})]})]})})}const Ie=t=>{const o=L({control:t,name:"enable_custom_shipping_price"}),n=L({control:t,name:"enable_custom_refund"}),c=L({control:t,name:"quantity"}),r=L({control:t,name:"shipping"}),s=L({control:t,name:"custom_shipping_price"}),l=L({control:t,name:"location"});return{enableCustomShippingPrice:o,enableCustomRefund:n,quantity:c,shipping:r,customShippingPrice:s,selectedLocation:l}},E=we(),ke=t=>{const{t:o}=V();return v.useMemo(()=>[E.display({id:"select",header:({table:n})=>e.jsx(U,{checked:n.getIsSomePageRowsSelected()?"indeterminate":n.getIsAllPageRowsSelected(),onCheckedChange:c=>n.toggleAllPageRowsSelected(!!c)}),cell:({row:n})=>{const c=n.getCanSelect();return e.jsx(U,{disabled:!c,checked:n.getIsSelected(),onCheckedChange:r=>n.toggleSelected(!!r),onClick:r=>{r.stopPropagation()}})}}),E.display({id:"product",header:()=>e.jsx(ye,{}),cell:({row:n})=>e.jsx(ve,{product:n.original.variant.product})}),E.accessor("variant.sku",{header:o("fields.sku"),cell:({getValue:n})=>n()||"-"}),E.accessor("variant.title",{header:o("fields.variant")}),E.accessor("quantity",{header:()=>e.jsx("div",{className:"flex size-full items-center overflow-hidden text-right",children:e.jsx("span",{className:"truncate",children:o("orders.returns.returnableQuantityHeader")})}),cell:({getValue:n,row:c})=>n()-(c.original.returned_quantity||0)}),E.accessor("refundable",{header:()=>e.jsx("div",{className:"flex size-full items-center justify-end overflow-hidden text-right",children:e.jsx("span",{className:"truncate",children:o("orders.returns.refundableAmountHeader")})}),cell:({getValue:n})=>{const c=n()||0,r=fe(c,t);return e.jsx("div",{className:"flex size-full items-center justify-end overflow-hidden text-right",children:e.jsx("span",{className:"truncate",children:r})})}})],[o,t])},Pe=()=>{const{t}=V();return[{key:"returnable_quantity",label:t("orders.returns.returnableQuantityLabel"),type:"number"},{key:"refundable_amount",label:t("orders.returns.refundableAmountLabel"),type:"number"},{key:"created_at",label:t("fields.createdAt"),type:"date"},{key:"updated_at",label:t("fields.updatedAt"),type:"date"}]},Re=({pageSize:t=50,prefix:o})=>{const n=je(["q","offset","order","created_at","updated_at","returnable_quantity","refundable_amount"],o),{offset:c,created_at:r,updated_at:s,refundable_amount:l,returnable_quantity:p,...h}=n;return{searchParams:{...h,limit:t,offset:c?Number(c):0,created_at:r?JSON.parse(r):void 0,updated_at:s?JSON.parse(s):void 0,refundable_amount:l?JSON.parse(l):void 0,returnable_quantity:p?JSON.parse(p):void 0},raw:n}},Q=50,ee="rit",Te=({onSelectionChange:t,selectedItems:o,items:n,currencyCode:c})=>{const[r,s]=v.useState(o.reduce((d,y)=>(d[y]=!0,d),{})),l=d=>{const y=typeof d=="function"?d(r):d;s(y),t(Object.keys(y))},{searchParams:p,raw:h}=Re({pageSize:Q,prefix:ee}),f=v.useMemo(()=>{const{order:d,offset:y,limit:w,q:S,created_at:q,updated_at:I,refundable_amount:T,returnable_quantity:k}=p;let g=n;if(S&&(g=g.filter(m=>{var u;return m.variant.product.title.toLowerCase().includes(S.toLowerCase())||m.variant.title.toLowerCase().includes(S.toLowerCase())||((u=m.variant.sku)==null?void 0:u.toLowerCase().includes(S.toLowerCase()))})),d){const m=d[0]==="-"?"desc":"asc",u=d.replace("-","");g=Me(g,u,m)}return q&&(g=te(g,q,"created_at")),I&&(g=te(g,I,"updated_at")),k&&(g=ne(g,k,"returnable_quantity",c)),T&&(g=ne(g,T,"refundable_amount",c)),g.slice(y,y+w)},[n,c,p]),N=ke(c),C=Pe(),{table:b}=be({data:f,columns:N,count:n.length,enablePagination:!0,getRowId:d=>d.id,pageSize:Q,enableRowSelection:d=>d.original.quantity-(d.original.returned_quantity||0)>0,rowSelection:{state:r,updater:l}});return e.jsx("div",{className:"flex size-full flex-col overflow-hidden",children:e.jsx(_e,{table:b,columns:N,pageSize:Q,count:f.length,filters:C,pagination:!0,layout:"fill",search:!0,orderBy:["product_title","variant_title","sku","returnable_quantity","refundable_amount"],prefix:ee,queryObject:h})})},Me=(t,o,n)=>t.sort((c,r)=>{let s,l;return o==="product_title"?(s=c.variant.product.title,l=r.variant.product.title):o==="variant_title"?(s=c.variant.title,l=r.variant.title):o==="sku"?(s=c.variant.sku,l=r.variant.sku):o==="returnable_quantity"?(s=c.quantity-(c.returned_quantity||0),l=r.quantity-(r.returned_quantity||0)):o==="refundable_amount"&&(s=c.refundable||0,l=r.refundable||0),s<l?n==="asc"?-1:1:s>l?n==="asc"?1:-1:0}),te=(t,o,n)=>{const{gt:c,gte:r,lt:s,lte:l}=o;return t.filter(p=>{const h=new Date(p[n]);let f=!0;return c&&(f=f&&h>new Date(c)),r&&(f=f&&h>=new Date(r)),s&&(f=f&&h<new Date(s)),l&&(f=f&&h<=new Date(l)),f})},se={eq:void 0,gt:void 0,gte:void 0,lt:void 0,lte:void 0},ne=(t,o,n,c)=>{const{eq:r,gt:s,lt:l,gte:p,lte:h}=typeof o=="object"?{...se,...o}:{...se,eq:o};return t.filter(f=>{const N=f.quantity-(f.returned_quantity||0),C=xe(f.refundable||0,c),b=n==="returnable_quantity"?N:C;if(r)return b===r;let d=!0;return s&&(d=d&&b>s),p&&(d=d&&b>=p),l&&(d=d&&b<l),h&&(d=d&&b<=h),d})};function Le({order:t}){const{t:o}=V(),{handleSuccess:n}=me(),[c,r]=v.useState([]),[s,l]=O.useState("items"),{mutateAsync:p,isLoading:h}=ue(t.id),{shipping_options:f=[]}=re({region_id:t.region_id,is_return:!0}),N=v.useRef(0),C=v.useMemo(()=>Ce(t,!1),[]),b=C.filter(i=>c.includes(i.id)),d=pe({defaultValues:{quantity:{},reason:{},note:{},location:"",shipping:"",send_notification:!t.no_notification,enable_custom_refund:!1,enable_custom_shipping_price:!1,custom_refund:"",custom_shipping_price:""}}),{formState:{isDirty:y},setValue:w}=d,S=d.handleSubmit(async i=>{var W;const x=b.map(j=>{const F={item_id:j.id,quantity:i.quantity[j.id]};return i.reason[j.id]&&(F.reason_id=i.reason[j.id]),i.note[j.id]&&(F.note=i.note[j.id]),F});let P=N.current;if(i.enable_custom_refund&&i.custom_refund){const j=i.custom_refund===""?0:$(i.custom_refund);P=J(j,t.currency_code)}const M={items:x,no_notification:!i.send_notification,refund:P};if(i.location&&(M.location_id=i.location),i.shipping){const j=f.find(A=>A.id===i.shipping),F=((W=j==null?void 0:j.tax_rates)==null?void 0:W.reduce((A,ae)=>A+(ae.rate||0)/100,0))||0;let G=j!=null&&j.price_incl_tax?Math.round(j.price_incl_tax/(1+F)):0;if(i.enable_custom_shipping_price){const A=i.custom_shipping_price?$(i.custom_shipping_price):0;G=J(A,t.currency_code)}M.return_shipping={option_id:i.shipping,price:G}}await p(M),n(`/orders/${t.id}`)}),[q,I]=O.useState({items:"not-started",details:"not-started"}),T=O.useCallback(async i=>{l(i)},[]),k=O.useCallback(async()=>{switch(s){case"items":{b.forEach(i=>{w(`quantity.${i.id}`,i.quantity,{shouldDirty:!0,shouldTouch:!0}),w(`reason.${i.id}`,"",{shouldDirty:!0,shouldTouch:!0}),w(`note.${i.id}`,"",{shouldDirty:!0,shouldTouch:!0})}),l("details");break}case"details":await S();break}},[s,b,w,S]),g=i=>{r(i),i.length&&I(x=>({...x,items:"in-progress"}))},m=i=>{N.current=i};v.useEffect(()=>{s==="details"&&I({items:"completed",details:"not-started"})},[s]),v.useEffect(()=>{y&&I({items:"completed",details:"in-progress"})},[y]);const u=c.length;return e.jsx(H.Form,{form:d,children:e.jsxs(D,{value:s,className:"h-full",onValueChange:i=>T(i),children:[e.jsxs(H.Header,{className:"flex w-full items-center justify-between",children:[e.jsxs(D.List,{className:"border-ui-border-base -my-2 ml-2 min-w-0 flex-1 border-l",children:[e.jsx(D.Trigger,{value:"items",className:"w-full max-w-[200px]",status:q.items,disabled:s==="details",children:e.jsx("span",{className:"w-full cursor-auto overflow-hidden text-ellipsis whitespace-nowrap",children:o("orders.returns.chooseItems")})}),e.jsx(D.Trigger,{value:"details",className:"w-full max-w-[200px]",status:q.details,disabled:!u,children:e.jsx("span",{className:"w-full overflow-hidden text-ellipsis whitespace-nowrap",children:o("orders.returns.details")})})]}),e.jsxs("div",{className:"flex flex-1 items-center justify-end gap-x-2",children:[e.jsx(H.Close,{asChild:!0,children:e.jsx(Y,{variant:"secondary",size:"small",children:o("actions.cancel")})}),e.jsx(Y,{size:"small",className:"whitespace-nowrap",isLoading:h,onClick:k,disabled:!u,type:s==="details"?"submit":"button",children:o(s==="details"?"actions.save":"general.next")})]})]}),e.jsxs(H.Body,{className:"flex h-[calc(100%-56px)] w-full flex-col items-center overflow-y-auto",children:[e.jsx(D.Content,{value:"items",className:"h-full w-full",children:e.jsx(Te,{items:C,selectedItems:c,onSelectionChange:g,currencyCode:t.currency_code})}),e.jsx(D.Content,{value:"details",className:"h-full w-full",children:e.jsx(qe,{form:d,items:b,order:t,onRefundableAmountChange:m})})]})]})})}function St(){const{id:t}=Ne(),{order:o,isLoading:n,isError:c,error:r}=de(t,{expand:"items,items.variant,items.variant.product,returnable_items,claims,claims.additional_items,claims.return_order,swaps,swaps.additional_items"});if(c)throw r;const s=!n&&o;return e.jsx(H,{children:s&&e.jsx(Le,{order:o})})}export{St as Component};
