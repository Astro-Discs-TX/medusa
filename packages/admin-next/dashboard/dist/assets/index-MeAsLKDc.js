import{u as p,j as e,d as x,T as g,I as _,ap as C,a1 as T}from"./index-S--WvUSo.js";import{r as h}from"./react-PzSkSLoa.js";import{A as N}from"./action-menu-olZwXQ3q.js";import{u as P,a as z,D as E}from"./use-data-table-TeZp00wg.js";import{u as w}from"./categories-OC4w38xk.js";import{S as f}from"./status-cell-9XExsAIG.js";import{T as c,a as H}from"./text-cell-OtkuJsO8.js";import{g as I,a as S,b as q}from"./utils-Dovxpp5e.js";import{T as D}from"./index-1Zwdg31z.js";import{c as j}from"./index-JDlOzmVl.js";import{P as R}from"./pencil-square-u3fizEAQ.js";import{H as A}from"./heading-cSlef4Su.js";import"./react-dom-Og6--24v.js";import"./react-router-dom-aSYyayiN.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./button-Pc5Xo8ua.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./x-mark-mini-aYDSd38M.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./command-bar-wUgfUfvQ.js";import"./placeholder-cell-O6UVTGmQ.js";const m=j(),M=()=>{const{t:s}=p();return h.useMemo(()=>[m.accessor("name",{header:()=>e.jsx(c,{text:s("fields.name")}),cell:({getValue:a,row:t})=>{const r=t.getToggleExpandedHandler();if(t.original.parent_category!==void 0){const o=I(t.original);return e.jsx("div",{className:"flex size-full items-center gap-1 overflow-hidden",children:o.map((i,l)=>e.jsxs("div",{className:x("overflow-hidden",{"text-ui-fg-muted flex items-center gap-x-1":l!==o.length-1}),children:[e.jsx(g,{size:"small",leading:"compact",className:"truncate",children:i.name}),l!==o.length-1&&e.jsx(g,{size:"small",leading:"compact",children:"/"})]},i.id))})}return e.jsxs("div",{className:"flex size-full items-center gap-x-3 overflow-hidden",children:[e.jsx("div",{className:"flex size-7 items-center justify-center",children:t.getCanExpand()?e.jsx(_,{type:"button",onClick:o=>{o.stopPropagation(),o.preventDefault(),r()},size:"small",variant:"transparent",className:"text-ui-fg-subtle",children:e.jsx(D,{className:x({"rotate-90 transition-transform will-change-transform":t.getIsExpanded()})})}):null}),e.jsx("span",{className:"truncate",children:a()})]})}}),m.accessor("handle",{header:()=>e.jsx(c,{text:s("fields.handle")}),cell:({getValue:a})=>e.jsx(H,{text:`/${a()}`})}),m.accessor("is_active",{header:()=>e.jsx(c,{text:s("fields.status")}),cell:({getValue:a})=>{const{color:t,label:r}=S(a(),s);return e.jsx(f,{color:t,children:r})}}),m.accessor("is_internal",{header:()=>e.jsx(c,{text:s("categories.fields.visibility")}),cell:({getValue:a})=>{const{color:t,label:r}=q(a(),s);return e.jsx(f,{color:t,children:r})}})],[s])},L=({pageSize:s=20,prefix:a})=>{const t=P(["q","offset","order"],a),r={q:t.q,limit:s,offset:t.offset?Number(t.offset):0,order:t.order};return{raw:t,searchParams:r}},d=20,$=()=>{const{t:s}=p(),{raw:a,searchParams:t}=L({pageSize:d}),r=a.q?{include_ancestors_tree:!0,fields:"id,name,handle,is_active,is_internal,parent_category",...t}:{include_descendants_tree:!0,parent_category_id:"null",fields:"id,name,category_children,handle,is_internal,is_active",...t},{product_categories:o,count:i,isLoading:l,isError:y,error:b}=w({...r},{placeholderData:C}),u=B(),{table:v}=z({data:o||[],columns:u,count:i,getRowId:n=>n.id,getSubRows:n=>n.category_children,enableExpandableRows:!0,pageSize:d});if(y)throw b;return e.jsxs(T,{className:"divide-y p-0",children:[e.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:e.jsx(A,{children:s("categories.domain")})}),e.jsx(E,{table:v,columns:u,count:i,pageSize:d,isLoading:l,navigateTo:n=>n.id,queryObject:a,search:!0,pagination:!0})]})},k=({category:s})=>{const{t:a}=p();return e.jsx(N,{groups:[{actions:[{label:a("actions.edit"),icon:e.jsx(R,{}),to:`${s.id}/edit`}]}]})},Q=j(),B=()=>{const s=M();return h.useMemo(()=>[...s,Q.display({id:"actions",cell:({row:a})=>e.jsx(k,{category:a.original})})],[s])},je=()=>e.jsx("div",{className:"flex flex-col gap-y-2",children:e.jsx($,{})});export{je as Component};
