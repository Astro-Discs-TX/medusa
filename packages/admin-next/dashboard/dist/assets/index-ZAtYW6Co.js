import{Z as g,m as j,u,ap as b,j as s,a1 as h}from"./index-S--WvUSo.js";import{p as P,f as T,g as w}from"./products-_PEbH1CR.js";import{r as L}from"./react-PzSkSLoa.js";import{d as C,L as D,O as v}from"./react-router-dom-aSYyayiN.js";import{A as q}from"./action-menu-olZwXQ3q.js";import{a as S,D as E}from"./use-data-table-TeZp00wg.js";import{u as A,a as Q,b as z}from"./use-product-table-columns-k99B-kCF.js";import{P as H}from"./pencil-square-u3fizEAQ.js";import{T as k}from"./trash-nTjeUaCp.js";import{t as l}from"./toast-4oQfF9Sm.js";import{u as B}from"./use-prompt-wB0F2CxI.js";import{H as K}from"./heading-cSlef4Su.js";import{B as N}from"./button-Pc5Xo8ua.js";import{c as O}from"./index-JDlOzmVl.js";import"./react-dom-Og6--24v.js";import"./empty-table-content-i72rBIA2.js";import"./plus-mini-IRJECoWI.js";import"./index-1Zwdg31z.js";import"./use-date-Putn0_Ur.js";import"./format-vrL-wy9v.js";import"./date-picker-s8-9mila.js";import"./input-A29ux7yj.js";import"./minus-E5-czcFC.js";import"./x-mark-mini-aYDSd38M.js";import"./index-7dV3TD85.js";import"./index-Hm2Uj9Gg.js";import"./lodash-5s15_I2H.js";import"./label-HFq5fzpT.js";import"./command-bar-wUgfUfvQ.js";import"./product-types-gZDu6wo-.js";import"./sales-channels--fho5-f4.js";import"./placeholder-cell-O6UVTGmQ.js";import"./product-cell-gRltbXZC.js";import"./thumbnail-gerN888-.js";import"./status-cell-9XExsAIG.js";import"./tooltip-Ixyw9oT8.js";import"./information-circle-solid-rXH6vJ5W.js";import"./x-circle-solid-rnqhxvfk.js";import"./check-circle-solid-7j4QonPK.js";import"./prompt-LzbVPZYR.js";import"./index-sF0hA49A.js";const _=()=>({queryKey:P.list({limit:20,offset:0}),queryFn:async()=>j.admin.products.list({limit:20,offset:0})}),Ht=e=>async()=>{const t=_();return g.getQueryData(t.queryKey)??await e.fetchQuery(t)},F={widgets:[]},I={widgets:[]},m=20,M=()=>{const{t:e}=u(),t=C(),{searchParams:o,raw:r}=A({pageSize:m}),{products:a,count:i,isLoading:n,isError:d,error:f}=T({...o},{initialData:t,placeholderData:b}),x=Q(),p=$(),{table:y}=S({data:a??[],columns:p,count:i,enablePagination:!0,pageSize:m,getRowId:c=>c.id});if(d)throw f;return s.jsxs(h,{className:"divide-y p-0",children:[s.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[s.jsx(K,{level:"h2",children:e("products.domain")}),s.jsx(N,{size:"small",variant:"secondary",asChild:!0,children:s.jsx(D,{to:"create",children:e("actions.create")})})]}),s.jsx(E,{table:y,columns:p,count:i,pageSize:m,filters:x,search:!0,pagination:!0,isLoading:n,queryObject:r,navigateTo:c=>`${c.original.id}`,orderBy:["title","created_at","updated_at"]}),s.jsx(v,{})]})},R=({product:e})=>{const{t}=u(),o=B(),{mutateAsync:r}=w(e.id),a=async()=>{await o({title:t("general.areYouSure"),description:t("products.deleteWarning",{title:e.title}),confirmText:t("actions.delete"),cancelText:t("actions.cancel")})&&await r(void 0,{onSuccess:()=>{l.success(t("products.toasts.delete.success.header"),{description:t("products.toasts.delete.success.description",{title:e.title}),dismissLabel:t("actions.close")})},onError:n=>{l.error(t("products.toasts.delete.error.header"),{description:n.message,dismissLabel:t("actions.close")})}})};return s.jsx(q,{groups:[{actions:[{icon:s.jsx(H,{}),label:t("actions.edit"),to:`/products/${e.id}/edit`}]},{actions:[{icon:s.jsx(k,{}),label:t("actions.delete"),onClick:a}]}]})},Z=O(),$=()=>{const e=z();return L.useMemo(()=>[...e,Z.display({id:"actions",cell:({row:o})=>s.jsx(R,{product:o.original})})],[e])},kt=()=>s.jsxs("div",{className:"flex flex-col gap-y-2",children:[I.widgets.map((e,t)=>s.jsx(e.Component,{},t)),s.jsx(M,{}),F.widgets.map((e,t)=>s.jsx(e.Component,{},t))]});export{kt as Component,Ht as productLoader};
