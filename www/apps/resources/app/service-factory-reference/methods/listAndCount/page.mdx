---
sidebar_label: "listAndCount"
---

export const metadata = {
  title: `listAndCount Method - Service Factory Reference`,
}

# {metadata.title}

This method retrieves a list of records with the total count.

## Retrieve List of Records

```ts
const [posts, count] = await customModuleService.listAndCountPosts()
```

If no parameters are passed, the method returns an array with two items:

1. The first is an array of the first `15` records retrieved.
2. The second is the total count of records.

---

## Filter Records

```ts
const [posts, count] = await customModuleService.listAndCountPosts({
  id: ["123", "321"]
})
```

To retrieve records matching a set of filters, pass an object of the filters as a first parameter.

{/* TODO add a link to filtering */}

The method returns an array with two items:

1. The first is an array of the first `15` records retrieved matching the specified filters.
2. The second is the total count of records.

---

## Retrieve Relations

<Note>

This applies to relations between data models of the same module. To retrieve linked records of different modules, use [remote query](!docs!/advanced-development/modules/remote-query).

</Note>

```ts
const [posts, count] = await customModuleService.listAndCountPosts({}, {
  relations: ["author"]
})
```

To retrieve records with their relations, pass as a second parameter an object having a `relations` property. `relations`'s value is an array of relation names.

The method returns an array with two items:

1. The first is an array of the first `15` records retrieved.
2. The second is the total count of records.

---

## Select Properties

```ts
const [posts, count] = await customModuleService.listAndCountPosts({}, {
  select: ["id", "name"]
})
```

By default, retrieved records have all their properties. To select specific properties to retrieve, pass in the second object parameter a `select` property.

`select`'s value is an array of property names to retrieve.

The method returns an array with two items:

1. The first is an array of the first `15` records retrieved.
2. The second is the total count of records.

---

## Paginate Relations

```ts
const [posts, count] = await customModuleService.listAndCountPosts({}, {
  take: 20,
  skip: 10
})
```

To paginate the returned records, the second object parameter accepts the following properties:

- `take`: a number indicating how many records to retrieve. By default, it's `15`.
- `skip`: a number indicating how many records to skip before the retrieved records. By default, it's `0`.

The method returns an array with two items:

1. The first is an array of the records retrieved. The number of records is less than or equal to `take`'s value.
2. The second is the total count of records.

---

## Sort Records

```ts
const [posts, count] = await customModuleService.listAndCountPosts({}, {
  order: {
    name: "ASC"
  }
})
```

To sort records by one or more properties, pass to the second object parameter the `order` property. Its value is an object whose keys are the property names, and values can either be:

- `ASC` to sort by this property in the ascending order.
- `DESC` to sort by this property in the descending order.

The method returns an array with two items:

1. The first is an array of the first `15` records retrieved.
2. The second is the total count of records.
